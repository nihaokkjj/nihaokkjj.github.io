<!DOCTYPE html><html lang="zn-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>JavaScript下 | 荥晋</title><meta name="keywords" content="JavaScript"><meta name="author" content="匡思进"><meta name="copyright" content="匡思进"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="JavaScript下"><meta name="application-name" content="JavaScript下"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="JavaScript下"><meta property="og:url" content="https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html"><meta property="og:site_name" content="荥晋"><meta property="og:description" content="JavaScript"><meta property="og:locale" content="zn-CN"><meta property="og:image" content="https://kkksj.cn/img/4.jpg"><meta property="article:author" content="匡思进"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://kkksj.cn/img/4.jpg"><meta name="description" content="JavaScript"><link rel="shortcut icon" href="/img/images.jpg"><link rel="canonical" href="https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/swiper/swiper.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: undefined,
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 浆糊!","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: {"enable":true,"default":"你好啊, 人类👋","list":[{"greeting":"晚安😴","startTime":0,"endTime":5},{"greeting":"早上好鸭👋, 祝你一天好心情！","startTime":6,"endTime":9},{"greeting":"上午好👋, 状态很好，鼓励一下～","startTime":10,"endTime":10},{"greeting":"11点多啦, 在坚持一下就吃饭啦～","startTime":11,"endTime":11},{"greeting":"午安👋, 宝贝","startTime":12,"endTime":14},{"greeting":"🌈充实的一天辛苦啦！","startTime":14,"endTime":18},{"greeting":"19点喽, 奖励一顿丰盛的大餐吧🍔。","startTime":19,"endTime":19},{"greeting":"晚上好👋, 在属于自己的时间好好放松😌~","startTime":20,"endTime":24}]},
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  music_page_default: "nav_music",
  root: '/',
  preloader: {"source":2},
  friends_vue_info: {"apiurl":null},
  navMusic: true,
  mainTone: {"mode":"api","api":"/img/images.jpg","cover_change":true},
  authorStatus: {"skills":["🤖️ 数码科技爱好者","🔍 分享与热心帮助","🏠 智能家居小能手","🔨 设计开发一条龙","🤝 专修交互与设计","🏃 脚踏实地行动派","🧱 团队小组发动机"]},
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: 匡思进","link":"链接: ","source":"来源: 荥晋","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: '荥晋',
  title: 'JavaScript下',
  postAI: '',
  pageFillDescription: 'this指向, this的绑定规则, this的指向, 默认绑定, 隐式绑定, new绑定, 显式绑定, 绑定优先级, this面试题, 一, 二, 三, 四, 手写call、apply、bind函数, 箭头函数, 深入浏览器的渲染原理, 网页被解析的过程, 浏览器的内核, 渲染页面的详细流程, HTML解析过程, 生成CSS规则, 构建Render Tree, 布局（Layout）和绘制（paint）, 回流和重绘, 特殊解析 - composite合成, script元素和页面解析的关系, defer属性, async属性, 深入JavaScript的运行原理, V8引擎的执行原理, V8引擎的架构, JS执行上下文, 执行上下文, 认识VO对象, 函数执行上下文, JavaScript的内存管理和闭包, JavaScript内存管理, 垃圾回收（GC）算法, 引用计数, 标记清除, 算法优化, 闭包, 闭包的定义, JavaScript函数的增强知识, 函数对象的属性和argumens, 属性name和length, 认识arguments, arguments转Array, 函数的剩余（rest）参数, 纯函数, 理解纯函数, 柯里化函数, 自动柯里化（了解）, 组合函数, 严格模式, 对象增强, Object.defineProperty, 数据属性描述符, 存取属性描述符, 同时定义多个属性, ES5中的继承, 对象和函数的原型, 认识对象原型, 函数对象的原型, constructor属性, 通过原型链实现继承, 借用构造函数实现继承, 寄生组合实现继承, 对象的方法补充, ES6实现继承, 原型继承关系图, class方式定义类, 实例方法, 类的静态方法, super关键字, 继承内置类, 类的混入mixins, ES6对象的增强, 字面量的增强, 解构, ES6新特性, let、const, 基本使用, let、const的块级作用域, 应用场景, 模版字符串, 标签模版字符串, 展开运算符, 展开语法, Symbol, Set-Map, Set, WeakSet, Map, WeakMap, Promise, ES8~ES13, ES8中对象的相关属性, ES8-padStart和padEnd, ES9-Object spread operators, ES10-flat flatMap, ES10-Object.fromEntries, ES10-trimStart trimEnd, ES11-BigInt, ES11-Nullish Coalescing Operator (空值合并运算符), ES11-Optional Chaining (可选链), ES12-FinalizationRegistry, ES12-WeakRefs, ES13-method.at(), ES13-Object.hasOwn(obj prop), Proxy-Reflect, Proxy基本使用, Proxy的捕获器, Reflect, Promise, 异步任务的处理, Promise的基本使用, resolve不同值, then的返回值, catch的返回值, finally的回调, Promise类方法, 1. Promise.resolve(value), 2. Promise.reject(reason), 3. Promise.all(iterable), 4. Promise.allSettled(iterable), 5. Promise.any(iterable), 6. Promise.race(iterable), 迭代器和生成器, 什么是迭代器, 自定义可迭代对象, 可迭代对象的应用, 什么是生成器, 生成器函数参数返回值, 生成器函数提前结束, 生成器替代迭代器, 异步处理方案, async、await - 队列, 异步函数async function, await关键字, 进程和线程, 浏览器中的JavaScript线程, 浏览器的事件循环, 微任务和宏任务, Promise面试题, 1, 2, 异常处理, throw关键字, Error类型, 异常的捕获, Storage和正则表达式, 认识Storage, Storage的基本使用, localStorage和sessionStorage的区别, Storage工具封装, 正则表达式, 正则表达式的使用方法, 修饰符flag的使用, 正则表达式规则, 字符类, 锚点, 转义, 集合, 量词, 贪婪和惰性, 捕获组, 正则练习-歌词解析, 正则练习-时间格式化, 防抖、节流、深拷贝、事件总线, 防抖函数, 认识防抖debounce函数, 手动实现防抖函数, 节流函数, 认识节流throttle函数, 手动实现节流函数, 深拷贝, 事件总线, JavaScript网络编程, 前后端分离的优势, Http协议, 什么是Http, 网页中资源的获取, Http的组成, Http的版本, Http的请求方式, Header, Response响应状态码, XHR发送请求, XHR发送请求的基本过程, AJAX发送请求, XMLHttpRequest的state, 其他事件监听, 响应数据和类型, HTTP响应的状态status, GETx2FPOST请求传递参数, ajax网络请求封装, 过期时间和取消请求, Fetch和Fetch API, 认识Fetch和API, Fetch数据的响应, XMLHttpRequest文件上传, Fetch文件上传指向的绑定规则的指向在函数调用的时候会默认给绑定一个值的绑定和定义的位置即编写的位置没有关系的绑定和调用方式以及调用的位置有关系是在运行时才被绑定的默认绑定独立的调用函数指向但在严格模式下独立调用的函数中的指向的是默认绑定案例一案例二案例三隐式绑定这里的绑定到对象绑定执行的操作创建一个全新的对象这个新对象会被执行连接这个新对象会绑定到函数调用的上如果函数没有返回其他对象表达式会返回这个新对象绑定显式绑定执行函数并且强制指向小羊绑定优先级显式隐式隐式面试题一二三四手写函数箭头函数箭头函数不会绑定属性没有显示原型不能和一起使用优化如果只有一个参数可以省略如果执行体只有一行代码可以省略大括号并且会返回这行代码的返回值如果执行体只返回一个对象需要给对象加上深入浏览器的渲染原理网页被解析的过程浏览器的内核常见的浏览器内核浏览器内核也称作浏览器排版引擎渲染页面的详细流程解析生成遇到文件时解析生成这两者的解析过程不产生冲突和生成渲染树渲染树中没有节点的位置再通过进行布局然后进行绘画和展示解析过程解析是所有步骤的开始服务器给浏览器默认返回文件解析构建生成规则解析过程中遇到的元素浏览器会下载对应的文件下载文件不会影响解析下载完文件会对文件进行解析得到对应的规则树也可以称之为对象模型构建和结合构建元素不会阻碍的构建过程但会阻碍的构建过程因为在构建时需要对应的和并不是一一对应的关系为的元素不会出现在中布局和绘制在上运行布局来计算每个节点的几何体会显示节点及其他样式但不显示每个节点的尺寸位置等信息布局可以确定呈现树中所有节点的宽度高度和位置信息将每个节点绘制到屏幕上绘制时浏览器将布局的每个转为屏幕上实际的像素点包括将元素的可见部分进行绘制如文本颜色边框阴影替换元素等回流和重绘回流在第一次确定节点的大小和位置称之为布局之后再进行修改重新计算称为回流引起回流的情况重绘第一次渲染内容称之为绘制之后重新渲染称之为重绘引起重绘的情况修改背景色文字颜色边框颜色样式等特殊解析合成每个合成层都是单独渲染的默认情况下标准流中的内容都是被绘制在同一个图层中有一些属性绘创建一个新的合成层利用来加速绘制动画转换时固定定位目前还是一个实验性的属性提前告诉浏览器元素可能发生的变化或设置了透明度分层是以内存管理为代价提高性能不能作为性能优化策略过度使用元素和页面解析的关系浏览器在解析过程中遇到了元素是不能继续构建树的会停止构建先下载代码并且执行的脚本等到脚本执行结束后再继续解析构建树属性属性告诉浏览器不要等待脚本下载继续解析构建如果脚本提前下载好了它会等待构建完成在事件完成前先执行中的代码多个带的脚本会保持正确的顺序执行可以提高网页的性能推荐放在元素中注意只适用于外部脚本对于默认内容会被忽略属性让一个脚本完全独立脚本不会阻碍浏览器的解析与类似脚本不能保证顺序它独立下载独立运行不会等待其他脚本不能保证在之前或者之后执行常用于需要在文档解析后操作的代码并且对多个文件有顺序要求通常用于独立的脚本对其他脚本甚至没有依赖的深入的运行原理引擎的执行原理引擎的架构执行上下文执行上下文引擎内部有一个执行上下文栈简称用于执行代码的调用栈全局的代码块为了执行会构建一个会被放入中执行认识对象每一个执行上下文会关联一个变量对象变量和函数声明会被添加到这个对象中当全局代码被执行的时候就是对象了函数执行上下文的内存管理和闭包内存管理会在定义数据时为我们分配内存对于原始数据类型内存的分配会在执行时直接在栈空间进行分配对于复杂数据类型内存的分配会在堆内存中开辟一块空间并且将这块空间的指针返回值变量引用垃圾回收算法引用计数当一个对象有一个引用指向它时这个对象的的引用就当一个对象的引用为时这个对象就可以被销毁掉弊端会产生循环引用标记清除核心思路可达性实现思路设置一个根对象垃圾回收器会定期从这个根对象开始找到所有从根开始有引用到的对象对于没有引用到的对象认为是不可用的对象这个算法解决了上一个算法产生的循环引用的问题算法优化引擎为了进行更好的优化在算法实现细节上会结合一些其他算法标记整理回收期间会将保存的储存对象搬运汇集到连续的内存空间从而整合空闲空间避免内存碎片化分代收集对象被分为新的和旧的很多对象完成工作并很快死去它们会被很快被清理那些长期存活的对象会变老旧而且被检查的频次也会减少增量收集将垃圾收集工作分成几个部分来做然后将这几部分逐一处理这样把一个大的延迟分成许多微小的延迟闲时收集垃圾收集器只会在空闲时尝试运行减少可能对代码执行的影响闭包闭包的定义一个函数和周围的环境的引用捆绑在一起这样的组合就是闭包闭包可以在一个内层函数中访问到其外层函数的作用域广义理解中的函数都是闭包狭义理解中的一个函数如果访问了外层作用域的变量那么它就是一个闭包函数的增强知识函数对象的属性和属性和属性一个函数的名词我们可以通过来访问属性返回函数输入参数的个数参数不参与参数的个数认识是一个类数组对象不是一个数组类型而是一个对象类型它拥有数组的一些特性如可以用索引来访问但没有数组的一些方法如转方法一遍历添加到一个新数组中方法二中的两个方法方法三调用函数的方法函数的剩余参数中引用了可以将不定数量的参数放入到一个数组中最后一个参数是为前缀那么剩余的参数会作为一个数组放到该参数中剩余参数和的区别剩余参数只包含没有对应形参的实参对象包含了传给函数的所有实参对象不是一个数组只是类数组对象而参数是一个真正的数组可以进行数组的所有操作剩余参数必须放到最后一个位置否则会报错纯函数理解纯函数有确定的输入一定会产生确定的输出函数在执行过程中不能产生副作用柯里化函数自动柯里化了解组合函数严格模式对象增强方法会直接在对象上定义一个新属性或者修改一个对象的现有属性并返回此对象可接受三个参数要定义属性的对象要定义或修改属性的名称或要定义或修改的属性描述符返回值被传递给函数的对象数据属性描述符存取属性描述符同时定义多个属性方法直接在一个对象上定义多个新的属性或修改现有属性并且返回该对象中的继承对象和函数的原型认识对象原型函数对象的原型将方法放在原型上减少内存占用当方法定义在对象的实例上时每个对象都会有一个独立的方法副本这会浪费内存将方法放在原型上所有对象实例共享同一个方法大大减少了内存的使用提高代码复用性将方法放在原型上可以让所有对象实例都能访问和使用这些方法这提高了代码的复用性避免了在每个对象实例上都定义相同的方法提高了开发效率动态添加修改方法通过修改原型可以动态地为所有对象实例添加或修改方法这使得代码更加灵活和可扩展保持对象实例的轻量级将方法放在原型上可以保持对象实例本身更加简单和轻量级对象实例中只保存自己的属性方法都存储在原型上这样可以提高性能继承和多态通过原型链机制可以实现继承和多态子类可以重写或扩展从父类继承的方法实现代码复用和多态特性注意讲方法放在原型上的方法也叫做实例方法在没有实例对象的情况下不能调用此函数定义构造函数将方法放在原型上创建实例对象属性理解重写原型对象通过原型链实现继承创建父类对象并且作为子类的原型对象借用构造函数实现继承组合原型链和借用构造函数实现继承的问题寄生组合实现继承最终实现方案将继承函数封装成工具放在文件中代码对象的方法补充实现继承原型继承关系图方式定义类使用来定义一个类类声明和类表达式在创建对象的时候想给类传递一些参数每个类有一个固定的构造函数方法每个类只能有一个构造函数注意类中定义的多个内容不需要使用进行分割实例方法和被添加在上类的静态方法静态方法通常用于定义直接使用类来执行的方法不需要有类的实例使用关键字来定义类方法里面的指向类本身静态方法可以直接通过类名调用不需要实例化对象这里的指向类本身输出关键字执行来调用一个父类方法执行来调用一个父类只能在自己的中调用注意在子类的构造函数中使用或者返回默认对象之前必须先通过调用父类的构造函数的使用位置有三个子类的构造方法实例方法静态方法调用父类构造函数重写父类方法调用父类方法新增方法重写父类静态方法调用父类静态方法继承内置类创建一个新的类继承内置类直接对进行扩展类的混入的类只支持单继承当我们需要多继承时可以使用混入对象的增强字面量的增强属性的简写属性的增强小明等同于等同于等同于等同于方法的增强方法的增强小明等同于小明计算属性名计算属性名北京市海淀区等同于北京市海淀区解构数组的解构数组的解构语法基本用法按照严格的顺序解构出数组默认值对象的解构对象的解构语法基本用法对象的解构没有顺序根据值解构解构出对象默认值对变量名进行重命名新特性基本使用关键字与没有太大的区别都是用于声明一个变量关键字用关键字声明的变量一旦被赋值就不能被修改如果赋值的是引用类型那么可以通过引用找到对应的对象修改对象的内容都不允许重复声明变量不会给上添加任何属性的块级作用域声明的标识符具备块级作用域的限制但是函数拥有块级作用域但是在外面依然可以访问应用场景获取多个按钮监听点击模版字符串开始使用模版字符串来嵌入的变量或者表达式来进行拼接使用反引号来编写字符串称为模版字符串再通过来动态嵌入内容标签模版字符串使用标签模版字符串在调用时插入其他变量模版字符串会被拆分第一个元素是数组是被模版字符串拆分的字符串组合后面的元素是一个个模版字符串传入的内容展开运算符展开语法基本使用中的元素不能重复这个功能可以给数组去重常见属性和方法属性返回中元素的个数方法添加某个元素返回对象本身从中删除和值相等的元素返回类型判断中是否存在某个元素返回类型清空中的所有的元素没有返回值通过遍历用于处理异步的解决方案的状态有三种状态进行中已成功和已失败这些状态可以帮助我们更好地跟踪异步操作的进度的链式调用通过和方法我们可以将多个异步操作串联起来形成一个链这样可以使代码更加清晰和可读错误处理在链中只需在最后添加一个方法即可捕获任何一个步骤中出现的错误大大简化了错误处理的逻辑为了进一步简化的使用引入了语法糖使用函数可以让异步代码看起来更像同步代码大大提高了可读性使用基本格式创建使用创建一个新的对象传递一个函数作为参数这个函数被称为执行器在执行器函数内部我们执行异步操作如果异步操作成功调用函数将结果传递出去如果异步操作失败调用函数将错误信息传递出去使用通过方法处理成功的情况通过方法处理失败的情况通过方法处理无论成功还是失败都要执行的代码链式调用每次调用或方法都会返回一个新的对象可以将多个操作串联起来形成链下一个方法会等待上一个完成后再执行执行一些异步操作操作成功处理成功的结果处理失败的情况无论成功还是失败都会执行的代码不同值的区别传递普通值输出如果函数传递一个普通值这个值会作为的结果被传递到后续的方法中传递对象输出如果函数传递的是另一个对象那么外层的状态会跟随内层的状态进行变化外层会等待内层完成然后采用内层的状态和结果传递对象输出如果函数传递的是一个具有方法的对象称为对象那么会等待这个对象执行完方法并采用其返回的结果传递或输出如果在执行器函数内部调用或函数那么的状态会变为后续的方法会捕获到这个错误并进行处理中对象的相关属性该方法返回一个给定对象自身的所有可枚举属性值的数组它的行为与类似但返回的是属性值而不是属性名该方法返回一个给定对象自身可枚举字符串键属性的数组这个方法提供了一种迭代一个对象的所有属性的便捷方式该方法返回指定对象所有自身属性的描述符这个方法在时很有用用于实现属性的复制和继承允许在对象字面量数组字面量函数参数列表和函数调用中使用尾随逗号这可以使代码更容易维护和扩展因为添加新属性或参数不会影响前面的代码是中引入的一个重要特性用于简化异步编程函数返回一个对象可以使用关键字来等待完成和方法将当前字符串填充到指定的长度填充从字符串的开始左侧应用的用填充到长度用空格填充到长度方法将当前字符串填充到指定的长度填充从字符串的末尾右侧应用的用填充到长度用空格填充到长度这些方法在处理金额日期编号等数据格式时非常有用可以帮助我们快速地格式化字符串格式化金额格式化日期隐藏卡号操作符操作符可以在对象字面量中使用用于展开一个现有的对象将其属性复制到新的对象中在上面的例子中我们使用操作符将的属性复制到中并添加了一个新的属性合并多个对象操作符可以方便地合并多个对象在这个例子中我们使用多个操作符将和的属性合并到中当有重复的属性时后面的对象的属性会覆盖前面对象的属性与解构赋值结合使用操作符也可以与对象解构赋值结合使用在这个例子中我们使用对象解构赋值提取属性并使用操作符将剩余的属性赋值给对象浅拷贝和深拷贝需要注意的是操作符只能进行浅拷贝如果对象中嵌套了其他对象或数组则需要使用其他方法实现深拷贝浅拷贝方法用于将嵌套数组拉平为一维数组它接受一个可选的参数指定要提取嵌套数组的深度如果不传参数默认深度为在上面的例子中第一个调用将数组拉平一层第二个调用将数组拉平两层是和的组合它首先使用提供的映射函数映射每个元素然后将结果压缩成一个新数组在上面的例子中我们使用将每个元素映射为一个包含原始值和其双倍值的数组然后将这些数组压缩成一个新数组的好处是它可以在一步操作中完成映射和拉平操作相比于先使用再使用效率更高方法返回一个给定对象自身可枚举字符串属性对组成的数组这个方法在需要遍历对象属性时非常有用比如使用循环方法执行与逆向操作将一个键值对列表转换为一个对象这个方法在需要从其他数据结构如转换为对象时非常有用应用场景和是中用于删除字符串两端空白字符的三个方法方法返回一个新的字符串其中从字符串的两端删除了所有空白字符方法返回一个新的字符串其中从字符串的开头删除了所有空白字符方法返回一个新的字符串其中从字符串的末尾删除了所有空白字符这三个方法的主要区别在于它们删除空白字符的位置删除字符串两端的空白字符删除字符串开头的空白字符删除字符串末尾的空白字符要表示大于的数值需要在数值后面加上空值合并运算符空值合并运算符是引入的一个新的运算符它可以帮助我们处理和值这个运算符的符号是它的工作原理是如果左侧的操作数不是或则返回左侧的操作数如果左侧的操作数是或则返回右侧的操作数下面是一些例子基本用法输出输出与逻辑运算符的比较输出在上面的例子中当为空字符串时逻辑运算符将返回但是空字符串在中是一个有效的值我们可能不希望将其视为这时就很有用它只会在值为或时返回右侧操作数另一个常见的用例是设置默认值输出输出输出在这个例子中如果参数是或会将设置为但如果是一个空字符串它仍然会被使用因为空字符串不是或可选链可选链是引入的一个新的运算符用于安全地访问嵌套对象的属性它的符号是可以帮助我们避免在访问嵌套对象属性时出现的错误下面是一些例子不使用可选链使用可选链在第一个例子中尝试访问会抛出因为是但在第二个例子中使用运算符可以安全地访问嵌套属性如果是则整个表达式的结果也是而不会抛出错误也可以与函数调用一起使用在最后一个例子中即使不存在使用也不会抛出错误而是返回是引入的一个新的它允许在对象被垃圾回收时执行自定义的清理逻辑的主要用途是监听对象的清理当一个对象被垃圾回收时会通知注册的回调函数这可以用于执行清理操作比如释放资源发送通知等避免内存泄漏可以帮助开发者避免内存泄漏因为它可以确保在对象被销毁时执行清理逻辑示例创建实例注册对象手动触发垃圾回收在中手动触发输出在上述示例中我们创建了一个实例并传入一个回调函数该函数将在对象被垃圾回收时被调用我们注册了一个对象到并为其提供了一个标识符我们手动将设置为然后调用来触发垃圾回收在中需要使用标志来启用手动垃圾回收当对象被垃圾回收时会调用我们提供的回调函数并输出的一个主要优点是它不会阻止对象被垃圾回收相反它会在对象被回收后执行清理逻辑这使得它比和更加灵活和强大的典型用例包括清理元素和事件监听器关闭数据库连接或释放其他系统资源发送对象销毁的通知是引入的一个新的它允许创建对对象的弱引用这意味着被引用的对象可以被垃圾回收器回收即使还有引用它主要用途避免内存泄漏由于不会妨碍对象被垃圾回收因此可以帮助开发者避免内存泄漏的问题缓存模式可以用于实现一种缓存模式在需要时重新创建对象而不是持有永久引用观察对象生命周期可以用于观察对象的生命周期并在对象被垃圾回收时执行相应的清理操作示例创建一个对象创建一个实例手动触发垃圾回收在中手动触发尝试访问持有的对象输出我们创建了一个对象我们使用创建了一个实例它持有对的引用我们手动将设置为然后调用来触发垃圾回收在中需要使用标志来启用手动垃圾回收我们尝试使用方法访问持有的对象如果对象还存在则输出否则输出的一个主要特点是它不会阻止被引用的对象被垃圾回收相反一旦对象没有其他强引用它就可以被垃圾回收即使还有引用它这使得非常适合于缓存模式和生命周期观察等用例通常与配合使用后者可以在对象被垃圾回收时执行清理逻辑这种组合可以帮助开发者更好地管理内存和系统资源是引入的一个新的数组方法它允许使用索引值访问数组元素并且可以接受负值索引特点支持负值索引方法可以接受负值索引这意味着可以从数组末尾开始计数例如返回数组的最后一个元素返回而不是抛出错误如果使用无效的索引值例如索引超出数组范围方法不会抛出错误而是返回更简洁的语法方法提供了一种更简洁的语法来访问数组元素相比于使用方括号语法更加直观示例输出输出输出是引入的一个新的静态方法它用于检查一个对象是否包含指定的属性这个方法是方法的一种更简洁的替代方式特点更简洁的语法方法提供了一种更简洁的语法来检查对象是否包含指定的属性相比于使用更加简洁更安全的属性检查避免了原型污染问题因为它直接在对象上检查属性而不会受到原型链上的属性影响这使得它更安全地用于检查对象属性支持和与不同可以接受或作为第一个参数并在这种情况下返回示例与语法相比的优势优势更简洁的语法更容易阅读和理解避免了原型污染问题更安全地检查对象属性可以处理和参数返回基本使用如果我们希望监听一个对象的相关操作那么我们可以先创建一个代理对象对象之后通过对代理对象的操作来监听我们想要对原对象进行的操作步骤首先需要对象并且传入需要监听的对象以及一个处理对象称之为其次我们之后的操作都是直接对的操作而不是原有的对象因为我们需要在里的捕获器如果想要监听某些具体的操作就可以在中添加对应的捕获器函数有个参数目标对象监听的对象将被设置的属性新属性值调用的代理对象函数有个参数目标对象监听的对象将被设置的属性调用的代理对象属性被设置成属性被读取这里返回可以让属性的读取操作正常进行四川省四川省作用是中的一个内置对象它提供了一组方法和属性用于更好地反映和操作对象相比于直接使用对象的属性和方法提供了一些额外的功能和便利与的区别与的方法名称很相似但方法会返回操作结果而方法则会返回操作对象本身常见方法获取属性值获取对象的属性的值设置属性值设置对象的属性的值为删除属性删除对象的属性检查属性是否存在检查对象是否拥有属性获取对象原型获取对象的原型设置对象原型设置对象的原型为判断对象是否可扩展判断对象是否可扩展冻结对象让对象变为不可扩展获取自身属性描述符获取对象的属性的描述符定义属性在对象上定义属性调用函数使用给定的值和参数列表调用目标函数使用创建实例使用给定的构造函数和参数列表创建一个新实例好处代理对象的目的不再直接操作原对象好处方法可以返回一个布尔值表示是否设置成功好处就是外层的对象最后一个参数可以决定对象访问器的的指向中的设置方法被调用中的获取方法被调用异步任务的处理我们调用一个函数这个函数中发送网络请求如果发送网络请求成功了那么告知调用者发送成功并且返回相关数据如果发送网络请求失败了那么告知调用者发送失败并且告知错误信息的基本使用是一个类当我们需要的时候给予调用者一个承诺待会儿回调函数的时候就可以创建一个对象在通过创建对象时我们需要传入一个回调函数称为这个回调函数会被立即执行并且给传入另外两个回调函数调用回调函数时会执行对象的方法传入的回调函数调用回调函数时会执行对象的方法传入的回调函数异步处理模拟异步处理输入错误成功失败成功失败不同值传递普通值输出如果函数传递一个普通值这个值会作为的结果被传递到后续的方法中传递对象输出如果函数传递的是另一个对象那么外层的状态会跟随内层的状态进行变化外层会等待内层完成然后采用内层的状态和结果传递对象输出如果函数传递的是一个具有方法的对象称为对象那么会等待这个对象执行完方法并采用其返回的结果传递或输出如果在执行器函数内部调用或函数那么的状态会变为后续的方法会捕获到这个错误并进行处理的返回值的方法的返回值是一个新的对象这个返回值可以用于实现链式调用关键点成功回调的返回值如果在的成功回调中返回一个值这个值将作为下一个的输入如果返回的是一个下一个将等待该完成失败回调的返回值如果在的失败回调中返回一个值该值将被忽略链中的下一个将继续执行如果返回的是一个同样会等待下一个完成示例输出返回输出返回一个新的输出的返回值的方法的返回值也会是一个新的对象具有和方法相似的特性具体来说主要用于处理链中的错误但是它的返回值可以影响后续的链式调用关键点处理错误并返回值如果处理了错误并返回一个值这个值将作为后续链中下一个的输入返回新如果在中返回一个下一个会等待这个完成然后将结果传递下去示例出错了不会执行输出出错了处理完毕返回一个字符串输出处理完毕如果我们希望后续继续执行那么需要抛出一个异常的回调的方法用于在操作结束后执行一个回调函数无论是成功还是失败这使得非常适合用于清理或执行一些始终需要进行的操作比如关闭文件清理资源等特点不影响链的结果的回调不会接收的结果或错误无论前面的或是否成功始终会执行返回值返回一个新的其解析方式与前面的一致如果在中返回一个值或将不会影响前面或的结果示例模拟操作成功或失败成功失败输出成功不会执行清理操作输出清理操作类方法的类方法提供了用于创建和操作实例的多种功能以下是主要的类方法及其描述功能返回一个以给定值解析后的对象示例输出功能返回一个以给定原因拒绝后的对象示例出错了输出出错了功能接受一个可迭代对象如数组当所有都已成功时返回一个新的并解析为一个数组包含所有的结果如果其中任何一个被拒绝它将立即返回拒绝状态示例输出功能接受一个可迭代对象返回一个新的当所有的状态都已确定时不论成功还是失败以数组的形式解析数组中的每个对象描述了每个的结果示例失败输出失败功能接受一个可迭代对象返回一个新的只要有一个成功它就会解析为那个成功的值如果所有都被拒绝则返回一个拒绝的其理由是一个示例失败失败输出功能接受一个可迭代对象返回一个新的只要有一个完成或被拒绝返回的就会返回这个完成或被拒绝的值示例快速完成慢完成输出快速完成迭代器和生成器什么是迭代器自定义可迭代对象可迭代对象的应用什么是生成器生成器函数参数返回值在中间位置直接结束在这里返回终止生成器此行不会被执行输出输出输出结束输出给函数每次执行的时候传入参数内部内部内部内部内部内部生成器函数提前结束使用语句结束提前结束不会被执行输出输出输出结束输出使用语句捕获错误如果被抛出错误将不会执行输出输出捕获错误输出捕获错误输出使用结合输出提前结束输出提前结束输出生成器替代迭代器异步处理方案需求发送一次网络请求等到这次网络请求的结果再发送一次网络请求并将这次网络请求的结果作为参数再次发送网络请求再次发送网络请求并将这次网络请求的结果作为参数再次发送网络请求最后一次的网络请求的结果作为最终结果异步请求代码结构方法一回调地域第一次结果第二次结果第三次结果方法二使用进行重构解决回调地狱第一次结果第二次结果第三次结果方法三使用生成器进行重构第一次结果第二次结果第三次结果方法四使用进行重构第一次结果第二次结果第三次结果队列异步函数关键字处理异步请求进程和线程浏览器中的线程浏览器的事件循环微任务和宏任务面试题代码执行顺序代码执行顺序异常处理关键字类型异常的捕获和正则表达式认识的基本使用操作从服务器获取用户名和密码操作从服务器获取用户名和密码和的区别工具封装必须有值正则表达式使用单个字符串来描述匹配一系列句法规则的字符串是一种字符串匹配利器可以帮助我们搜索获取替代字符串正则表达式主要由两部分组成模式和修饰符正则表达式的使用方法的正则表达式被用于的和方法的方法修饰符的使用正则表达式规则字符类锚点转义集合量词贪婪和惰性捕获组正则练习歌词解析根据切割字符串根据每一行歌词进行解析获取时间获取歌词保存歌词信息正则练习时间格式化将时间戳转化为将正则和值匹配构造正则表达式如果正则表达式匹配到中则替换补零替换防抖节流深拷贝事件总线防抖函数认识防抖函数手动实现防抖函数基本实现第次输入绑定这里的绑定到第次输入实现取消功能用于记录上一次事件触发的触发事件时执行的函数如果有再次触发事件那么取消上一次的事件延迟去执行对应函数这里的绑定到给添加一个方法用于取消防抖第次输入立即执行功能用于记录上一次事件触发的是否立即执行触发事件时执行的函数如果有再次触发事件那么取消上一次的事件如果是立即执行那么立即执行对应函数延迟去执行对应函数这里的绑定到重置和给添加一个方法用于取消防抖重置和第次输入获取返回值用于记录上一次事件触发的是否立即执行触发事件时执行的函数如果有再次触发事件那么取消上一次的事件如果是立即执行那么立即执行对应函数延迟去执行对应函数这里的绑定到重置和给添加一个方法用于取消防抖重置和可以用库节流函数认识节流函数手动实现节流函数实现思路基本实现绑定控制立即执行获取当前时间对立即执行函数进行控制尾部执行控制获取当前时间对立即执行函数进行控制节流函数尾部执行控制取消尾部功能获取当前时间对立即执行函数进行控制节流函数尾部执行控制获取返回值获取当前时间对立即执行函数进行控制节流函数尾部执行控制深拷贝深拷贝函数的基本使用深拷贝函数小羊四川成都市区分数组与对象深拷贝函数小羊四川成都市其他类型处理深拷贝函数类型类型类型不需要深拷贝为类型如果是对象类型小羊四川成都市函数的循环引用深拷贝函数类型类型类型不需要深拷贝为类型如果是对象类型小羊四川成都市事件总线实现用于存储所有注册的事件及其对应的回调函数注册事件监听器获取指定事件名称下的回调函数列表如果列表不存在则创建一个新的列表将新的回调函数添加到列表中取消事件监听器获取指定事件名称下的回调函数列表如果列表不存在则直接返回遍历列表找到与传入的相同的函数并从列表中移除如果列表中已经没有回调函数了则从中移除该事件发布事件触发指定事件名称下的所有回调函数获取指定事件名称下的回调函数列表如果列表不存在则直接返回遍历列表依次执行回调函数并传递参数创建一个事件总线实例注册事件监听器另一个事件监听器秒后取消监听器点击按钮时触发事件张三网络编程前后端分离的优势服务器端渲染过程前后端分离渲染过程协议什么是网页中资源的获取的组成的版本的请求方式响应状态码响应码地址响应状态码发送请求发送请求的基本过程发送请求创建对象监听状态的改变将字符串转化为对象配置请求请求方式和请求地址发送请求的其他事件监听响应数据和类型响应的状态请求传递参数网络请求封装可以使用库封装创建对象监听数据设置类型配置请求封装创建对象监听数据设置类型配置请求过期时间和取消请求和认识和数据的响应文件上传文件上传',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-22 09:35:28',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><!-- hexo injector head_end start --><link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/Zfour/Butterfly-double-row-display@1.00/cardlistpost.min.css"/>
<style>#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags:before {content:"\A";
  white-space: pre;}#recent-posts > .recent-post-item >.recent-post-info > .article-meta-wrap > .tags > .article-meta__separator{display:none}</style>
<!-- hexo injector head_end end --><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><div class="back-home-button"><i class="anzhiyufont anzhiyu-icon-grip-vertical"></i><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://kksj.cn" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/images.jpg" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/nihaokkjj" title="去我的github里面瞅瞅吧"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cute.webp" alt="去我的github里面瞅瞅吧"/><span class="back-menu-item-text">去我的github里面瞅瞅吧</span></a></div></div></div></div><a id="site-name" href="/" accesskey="h"><div class="title">荥晋</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a><div id="he-plugin-simple"></div><script>var WIDGET = {
  "CONFIG": {
    "modules": "0124",
    "background": "2",
    "tmpColor": "FFFFFF",
    "tmpSize": "16",
    "cityColor": "FFFFFF",
    "citySize": "16",
    "aqiColor": "E8D87B",
    "aqiSize": "16",
    "weatherIconSize": "24",
    "alertIconSize": "18",
    "padding": "10px 10px 10px 10px",
    "shadow": "0",
    "language": "auto",
    "borderRadius": "20",
    "fixed": "true",
    "vertical": "top",
    "horizontal": "left",
    "left": "20",
    "top": "7.1",
    "key": "df245676fb434a0691ead1c63341cd94"
  }
}
</script><link rel="stylesheet" href="https://widget.qweather.net/simple/static/css/he-simple.css?v=1.4.0"/><script src="https://widget.qweather.net/simple/static/js/he-simple.js?v=1.4.0"></script></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button only-home" id="travellings_button" title="随机前往一个开往项目网站"><a class="site-page" onclick="anzhiyu.totraveling()" title="随机前往一个开往项目网站" href="javascript:void(0);" rel="external nofollow" data-pjax-state="external"><i class="anzhiyufont anzhiyu-icon-train"></i></a></div><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="/img/wchat.jpg" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wchat.jpg"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/zhifubao.jpg"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Vue/" style="font-size: 1.05rem;">Vue<sup>1</sup></a><a href="/tags/blog/" style="font-size: 1.05rem;">blog<sup>2</sup></a><a href="/tags/minvue/" style="font-size: 1.05rem;">minvue<sup>1</sup></a><a href="/tags/node/" style="font-size: 1.05rem;">node<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" style="font-size: 1.05rem;">前端三件套<sup>5</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/" style="font-size: 1.05rem;">前端学习路线<sup>1</sup></a><a href="/tags/%E6%89%8B%E6%9C%BA%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/" style="font-size: 1.05rem;">手机设置代理<sup>1</sup></a><a href="/tags/%E6%B2%A1%E6%9C%89%E8%90%A5%E5%85%BB%E7%9A%84%E8%AF%9D/" style="font-size: 1.05rem;">没有营养的话<sup>1</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/07/"><span class="card-archive-list-date">July 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/06/"><span class="card-archive-list-date">June 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">April 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">6</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="post-meta-categories"><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-inbox post-meta-icon"></i><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a></span><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>前端三件套</span></a></span></div></div><h1 class="post-title" itemprop="name headline">JavaScript下</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2025-04-01T00:00:00.000Z" title="发表于 2025-04-01 00:00:00">2025-04-01</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-07-22T09:35:28.538Z" title="更新于 2025-07-22 09:35:28">2025-07-22</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为四川"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>四川</span></div></div></div><article class="post-content" id="article-container" itemscope itemtype="https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html"><header><a class="post-meta-categories" href="/categories/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91/" itemprop="url">前端开发</a><a href="/tags/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" tabindex="-1" itemprop="url">前端三件套</a><h1 id="CrawlerTitle" itemprop="name headline">JavaScript下</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">匡思进</span><time itemprop="dateCreated datePublished" datetime="2025-04-01T00:00:00.000Z" title="发表于 2025-04-01 00:00:00">2025-04-01</time><time itemprop="dateCreated datePublished" datetime="2025-07-22T09:35:28.538Z" title="更新于 2025-07-22 09:35:28">2025-07-22</time></header><h1 id="this指向"><a href="#this指向" class="headerlink" title="this指向"></a>this指向</h1><h2 id="this的绑定规则"><a href="#this的绑定规则" class="headerlink" title="this的绑定规则"></a>this的绑定规则</h2><h3 id="this的指向"><a href="#this的指向" class="headerlink" title="this的指向"></a>this的指向</h3><ul>
<li>在函数调用的时候，JavaScript会 <em>默认给this绑定一个值</em></li>
<li>this的 <em>绑定和定义的位置（即编写的位置）</em> 没有关系</li>
<li>this的 <em>绑定和调用方式以及调用的位置有关系</em></li>
<li>this <em>是在运行时才被绑定的</em></li>
</ul>
<h3 id="默认绑定"><a href="#默认绑定" class="headerlink" title="默认绑定"></a>默认绑定</h3><ul>
<li>独立的调用函数this指向window，但在严格模式下独立调用的函数中的this指向的是Undefined(“use strict”)</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 默认绑定</span></span><br><span class="language-javascript">      <span class="hljs-comment">// 1.案例一</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">      &#125; </span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-title function_">foo</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 2.案例二</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">test1</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">        <span class="hljs-title function_">test2</span>()</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">test2</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">        <span class="hljs-title function_">test3</span>()</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">test3</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript">      <span class="hljs-title function_">test1</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-comment">// 3.案例三</span></span><br><span class="language-javascript">      <span class="hljs-keyword">function</span> <span class="hljs-title function_">project</span>(<span class="hljs-params">func</span>) &#123;</span><br><span class="language-javascript">        <span class="hljs-title function_">func</span>()</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-keyword">var</span> obj = &#123;</span><br><span class="language-javascript">        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;jojo&quot;</span>,</span><br><span class="language-javascript">        <span class="hljs-attr">bar</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">        &#125;</span><br><span class="language-javascript">      &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">      <span class="hljs-title function_">project</span>(obj.<span class="hljs-property">bar</span>)</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="隐式绑定"><a href="#隐式绑定" class="headerlink" title="隐式绑定"></a>隐式绑定</h3><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>) <span class="hljs-comment">//这里的this绑定到obj对象</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> obj = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">bar</span>: foo</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    obj.<span class="hljs-title function_">bar</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="new绑定"><a href="#new绑定" class="headerlink" title="new绑定"></a>new绑定</h3><ul>
<li>执行的操作<ul>
<li>创建一个全新的对象</li>
<li>这个新对象会被执行prototype连接</li>
<li>这个新对象会绑定到函数调用的this上</li>
<li>如果函数没有返回其他对象，表达式会返回这个新对象</li>
</ul>
</li>
</ul>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>); </span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;why&quot;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">new</span> <span class="hljs-title function_">foo</span>() <span class="hljs-comment">//this绑定foo</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="显式绑定"><a href="#显式绑定" class="headerlink" title="显式绑定"></a>显式绑定</h3><p>call：<code>func.call(thisArg, arg1, arg2, ...)</code><br>apply：<code>func.apply(thisArg, [arg1, arg2, ...]</code></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> obj = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">name, age</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>)</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name, age)</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    foo.<span class="hljs-title function_">call</span>(obj, <span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">20</span>) <span class="hljs-comment">//执行函数，并且强制this指向obj</span></span><br><span class="language-javascript">    foo.<span class="hljs-title function_">apply</span>(obj, [<span class="hljs-string">&quot;小羊&quot;</span>, <span class="hljs-number">19</span>])</span><br><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<p><strong>bind</strong></p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params">name, age</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>);</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name);</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(age);</span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript">    </span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> obj = &#123;</span><br><span class="language-javascript">      <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Tom&#x27;</span></span><br><span class="language-javascript">    &#125;</span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> bar = foo.<span class="hljs-title function_">bind</span>(obj, <span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">20</span>)</span><br><span class="language-javascript">    <span class="hljs-title function_">bar</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h3 id="绑定优先级"><a href="#绑定优先级" class="headerlink" title="绑定优先级"></a>绑定优先级</h3><p>显式 &gt; 隐式<br>new &gt; 隐式<br>new &gt;  bind</p>
<h3 id="this面试题"><a href="#this面试题" class="headerlink" title="this面试题"></a>this面试题</h3><h4 id="一"><a href="#一" class="headerlink" title="一"></a>一</h4><p>![[Pasted image 20240727141059.png]]</p>
<h4 id="二"><a href="#二" class="headerlink" title="二"></a>二</h4><p>![[Pasted image 20240727191000.png]]</p>
<h4 id="三"><a href="#三" class="headerlink" title="三"></a>三</h4><p>![[Pasted image 20240727211810.png]]</p>
<p>![[Pasted image 20240727211824.png]]</p>
<h4 id="四"><a href="#四" class="headerlink" title="四"></a>四</h4><p>![[Pasted image 20240727220053.png]]</p>
<h3 id="手写call、apply、bind函数"><a href="#手写call、apply、bind函数" class="headerlink" title="手写call、apply、bind函数"></a>手写call、apply、bind函数</h3><p>day36</p>
<h2 id="箭头函数"><a href="#箭头函数" class="headerlink" title="箭头函数"></a>箭头函数</h2><ul>
<li>箭头函数 <em>不会绑定this、arguments属性</em>， 没有显示原型，不能和new一起使用</li>
<li><code>nums.forEach((item, index, arr) =&gt; &#123; &#125;)</code></li>
<li>优化：<ul>
<li>如果只有一个参数，( )可以省略![[Pasted image 20240725150801.png]]</li>
<li>如果执行体只有一行代码，可以省略大括号，并且会返回这行代码的返回值![[Pasted image 20240725150853.png]]</li>
<li>如果执行体只返回一个对象，需要给对象加上( )![[Pasted image 20240725150934.png]]</li>
</ul>
</li>
</ul>
<h1 id="深入浏览器的渲染原理"><a href="#深入浏览器的渲染原理" class="headerlink" title="深入浏览器的渲染原理"></a>深入浏览器的渲染原理</h1><h2 id="网页被解析的过程"><a href="#网页被解析的过程" class="headerlink" title="网页被解析的过程"></a>网页被解析的过程</h2><p>![[Pasted image 20240801121708.png]]</p>
<h2 id="浏览器的内核"><a href="#浏览器的内核" class="headerlink" title="浏览器的内核"></a>浏览器的内核</h2><ul>
<li>常见的浏览器内核![[Pasted image 20240801123558.png]]</li>
<li>浏览器内核也称作浏览器排版引擎</li>
</ul>
<h2 id="渲染页面的详细流程"><a href="#渲染页面的详细流程" class="headerlink" title="渲染页面的详细流程"></a>渲染页面的详细流程</h2><p>![[Pasted image 20240801123756.png]]<br>解析HTML生成 DOM Tree ，遇到css文件时，解析CSS生成 Style Rules，这两者的解析过程不产生冲突。DOM Tree 和 Style Rules生成 Render Tree（渲染树，渲染树中没有节点的位置），再通过 Layout进行布局，然后进行绘画和展示</p>
<h3 id="HTML解析过程"><a href="#HTML解析过程" class="headerlink" title="HTML解析过程"></a>HTML解析过程</h3><ul>
<li>解析HTML是所有步骤的开始（服务器给浏览器默认返回  .html 文件）</li>
<li>解析HTML构建 DOM Tree![[Pasted image 20240801124525.png]]</li>
</ul>
<h3 id="生成CSS规则"><a href="#生成CSS规则" class="headerlink" title="生成CSS规则"></a>生成CSS规则</h3><ul>
<li>解析过程中，遇到CSS的 link元素，浏览器会下载对应的CSS文件（下载CSS文件不会影响DOM解析）</li>
<li>下载完CSS文件，会对CSS文件进行解析，得到对应的 Style Rules（规则树， 也可以称之为CSSOM，CSS对象模型）![[Pasted image 20240801124907.png]]</li>
</ul>
<h3 id="构建Render-Tree"><a href="#构建Render-Tree" class="headerlink" title="构建Render Tree"></a>构建Render Tree</h3><ul>
<li>DOM Tree 和 CSSOM Tree 结合构建 <strong>Render Tree</strong>![[Pasted image 20240801125031.png]]</li>
<li><em>link元素不会阻碍DOM Tree 的构建过程，但会阻碍 Render Tree 的构建过程</em>，因为在构建Render Tree时，需要对应的CSSOM Tree</li>
<li><em>Render Tree 和 DOM Tree 并不是一一对应的关系</em>， display为none的元素，不会出现在Render Tree中</li>
</ul>
<h3 id="布局（Layout）和绘制（paint）"><a href="#布局（Layout）和绘制（paint）" class="headerlink" title="布局（Layout）和绘制（paint）"></a>布局（Layout）和绘制（paint）</h3><ul>
<li>在Render Tree上运行 <em>布局</em> 来计算每个节点的几何体<ul>
<li>Render Tree会显示节点及其他样式，但不显示 <em>每个节点的尺寸、位置</em>等信息</li>
<li>布局可以确定呈现树中 <em>所有节点的宽度、高度和位置信息</em></li>
</ul>
</li>
<li>将每个节点绘制到屏幕上<ul>
<li>绘制时，浏览器将布局的每个frame转为屏幕上实际的像素点</li>
<li>包括将元素的可见部分进行绘制，如 <em>文本、颜色、边框、阴影、替换元素（img等）</em></li>
</ul>
</li>
</ul>
<h3 id="回流和重绘"><a href="#回流和重绘" class="headerlink" title="回流和重绘"></a>回流和重绘</h3><ul>
<li>回流<ul>
<li>在第一次确定节点的大小和位置，称之为布局</li>
<li>之后再进行修改重新计算称为回流</li>
</ul>
</li>
<li>引起回流的情况![[Pasted image 20240801131023.png]]</li>
<li>重绘<ul>
<li>第一次渲染内容称之为绘制</li>
<li>之后重新渲染称之为重绘</li>
</ul>
</li>
<li>引起重绘的情况<ul>
<li>修改背景色、文字颜色、边框颜色、样式等<br>![[Pasted image 20240801131232.png]]</li>
</ul>
</li>
</ul>
<h2 id="特殊解析-composite合成"><a href="#特殊解析-composite合成" class="headerlink" title="特殊解析 - composite合成"></a>特殊解析 - composite合成</h2><ul>
<li>每个合成层都是 <em>单独渲染的</em></li>
<li>默认情况下，标准流中的内容都是被绘制在同一个图层（Layer）中</li>
<li>有一些属性绘创建一个新的合成层，利用GPU来加速绘制<ul>
<li>**3D transforms</li>
<li>**video、canvas、iframe</li>
<li>**opacity动画转换时</li>
<li>**position: fixed(固定定位)</li>
<li><strong>will-change</strong>（目前还是一个实验性的属性，提前告诉浏览器元素可能发生的变化）</li>
<li>**animation 或 transition 设置了 opacity(透明度)、transform</li>
</ul>
</li>
<li>分层是以内存管理为代价提高性能，不能作为性能优化策略过度使用</li>
</ul>
<h2 id="script元素和页面解析的关系"><a href="#script元素和页面解析的关系" class="headerlink" title="script元素和页面解析的关系"></a>script元素和页面解析的关系</h2><ul>
<li>浏览器在解析HTML过程中，遇到了 <em>script元素是不能继续构建DOM树的</em>，会停止构建，先下载JavaScript代码，并且执行JavaScript的脚本，等到JavaScript脚本执行结束后，再继续解析HTML，构建DOM树<br>![[Pasted image 20240801142428.png]]</li>
</ul>
<h2 id="defer属性"><a href="#defer属性" class="headerlink" title="defer属性"></a>defer属性</h2><ul>
<li>defer属性告诉浏览器 <em>不要等待脚本下载， 继续解析HTML， 构建DOM Tree</em>， 如果脚本提前下载好了，它会 <em>等待DOM Tree构建完成，在DOMContentLoaded事件完成前先执行defer中的代码</em></li>
<li>多个带defer的脚本会保持正确的顺序执行</li>
<li>defer可以提高网页的性能，推荐放在head元素中</li>
<li><strong>注意：</strong> defer只适用于外部脚本，对于script默认内容会被忽略</li>
</ul>
<h2 id="async属性"><a href="#async属性" class="headerlink" title="async属性"></a>async属性</h2><ul>
<li>async让一个脚本完全独立<ul>
<li>async脚本不会阻碍浏览器的解析（与defer类似）</li>
<li><em>async脚本不能保证顺序，它独立下载、独立运行，不会等待其他脚本</em></li>
<li>async不能保证在DOMContentLoaded之前或者之后执行</li>
</ul>
</li>
<li>defer常用于需要在文档解析后操作DOM的JavaScript代码，并且对多个script文件有顺序要求</li>
<li>async通常用于独立的脚本，对其他脚本，甚至DOM没有依赖的</li>
</ul>
<h1 id="深入JavaScript的运行原理"><a href="#深入JavaScript的运行原理" class="headerlink" title="深入JavaScript的运行原理"></a>深入JavaScript的运行原理</h1><h2 id="V8引擎的执行原理"><a href="#V8引擎的执行原理" class="headerlink" title="V8引擎的执行原理"></a>V8引擎的执行原理</h2><p>![[Pasted image 20240801154302.png]]</p>
<h3 id="V8引擎的架构"><a href="#V8引擎的架构" class="headerlink" title="V8引擎的架构"></a>V8引擎的架构</h3><p>![[Pasted image 20240801154530.png]]</p>
<h2 id="JS执行上下文"><a href="#JS执行上下文" class="headerlink" title="JS执行上下文"></a>JS执行上下文</h2><h3 id="执行上下文"><a href="#执行上下文" class="headerlink" title="执行上下文"></a>执行上下文</h3><ul>
<li>JS引擎内部有一个执行上下文栈（Execution Context Stack，简称ECS），用于执行代码的调用栈</li>
<li>全局的代码块为了执行会构建一个Global Execution Context（GEC），GEC会被放入ECS中执行</li>
</ul>
<h3 id="认识VO对象"><a href="#认识VO对象" class="headerlink" title="认识VO对象"></a>认识VO对象</h3><ul>
<li>每一个执行上下文会关联一个 <em>VO（Variable Object，变量对象），变量和函数声明</em>会被添加到这个VO对象中</li>
<li>当全局代码被执行的时候，VO就是GO对象了</li>
</ul>
<h3 id="函数执行上下文"><a href="#函数执行上下文" class="headerlink" title="函数执行上下文"></a>函数执行上下文</h3><p>![[Pasted image 20240801172129.png]]</p>
<h1 id="JavaScript的内存管理和闭包"><a href="#JavaScript的内存管理和闭包" class="headerlink" title="JavaScript的内存管理和闭包"></a>JavaScript的内存管理和闭包</h1><h2 id="JavaScript内存管理"><a href="#JavaScript内存管理" class="headerlink" title="JavaScript内存管理"></a>JavaScript内存管理</h2><ul>
<li>JavaScript会在 <em>定义数据时</em>为我们分配内存</li>
<li>JavaScript对于 <em>原始数据类型内存的分配</em>  会在执行时，直接在栈空间进行分配</li>
<li>对于 <em>复杂数据类型内存的分配</em>  会在堆内存中开辟一块空间，并且将这块空间的指针返回值变量引用</li>
</ul>
<h2 id="垃圾回收（GC）算法"><a href="#垃圾回收（GC）算法" class="headerlink" title="垃圾回收（GC）算法"></a>垃圾回收（GC）算法</h2><h3 id="引用计数"><a href="#引用计数" class="headerlink" title="引用计数"></a>引用计数</h3><ul>
<li>当 <em>一个对象有一个引用指向它</em> 时，这个对象的的引用就 +1</li>
<li>当 <em>一个对象的引用为0</em> 时，这个对象就可以被销毁掉</li>
<li><strong>弊端</strong>：会产生循环引用![[Pasted image 20240802152232.png]]</li>
</ul>
<h3 id="标记清除"><a href="#标记清除" class="headerlink" title="标记清除"></a>标记清除</h3><ul>
<li><em>核心思路：</em> 可达性</li>
<li><em>实现思路：</em> 设置一个 <em>根对象</em>，垃圾回收器会定期从这个根对象开始，找到所有从根开始有引用到的对象，对于没有引用到的对象，认为是不可用的对象</li>
<li>这个算法解决了上一个算法产生的循环引用的问题![[Pasted image 20240802154857.png]]</li>
</ul>
<h3 id="算法优化"><a href="#算法优化" class="headerlink" title="算法优化"></a>算法优化</h3><p>V8引擎为了进行更好的优化，在算法实现细节上会结合一些其他算法</p>
<ul>
<li><strong>标记整理</strong><ul>
<li>回收期间会将保存的储存对象 <em>搬运汇集到连续的内存空间</em>，从而 <em>整合空闲空间，避免内存碎片化</em></li>
</ul>
</li>
<li><strong>分代收集</strong>：对象被分为 <em>新的</em> 和 <em>旧的</em><ul>
<li>很多对象完成工作并很快死去，它们会被 <em>很快被清理</em></li>
<li>那些长期存活的对象会变 <em>老旧</em>，而且 <em>被检查的频次也会减少</em></li>
</ul>
</li>
<li>**增量收集<ul>
<li>将垃圾收集工作分成几个部分来做，然后将这几部分逐一处理，这样把一个大的延迟分成许多微小的延迟</li>
</ul>
</li>
<li>**闲时收集<ul>
<li>垃圾收集器 <em>只会在CPU空闲时尝试运行，减少可能对代码执行的影响</em></li>
</ul>
</li>
</ul>
<h2 id="闭包"><a href="#闭包" class="headerlink" title="闭包"></a>闭包</h2><h3 id="闭包的定义"><a href="#闭包的定义" class="headerlink" title="闭包的定义"></a>闭包的定义</h3><ul>
<li>一个函数和周围的环境的引用捆绑在一起，这样的组合就是闭包</li>
<li>闭包可以在一个内层函数中访问到其外层函数的作用域</li>
<li>广义理解：JavaScript中的函数都是闭包</li>
<li>狭义理解：JavaScript中的一个函数，如果访问了外层作用域的变量，那么它就是一个闭包</li>
</ul>
<h1 id="JavaScript函数的增强知识"><a href="#JavaScript函数的增强知识" class="headerlink" title="JavaScript函数的增强知识"></a>JavaScript函数的增强知识</h1><h2 id="函数对象的属性和argumens"><a href="#函数对象的属性和argumens" class="headerlink" title="函数对象的属性和argumens"></a>函数对象的属性和argumens</h2><h3 id="属性name和length"><a href="#属性name和length" class="headerlink" title="属性name和length"></a>属性name和length</h3><ul>
<li><strong>属性name</strong>：一个函数的名词我们可以通过name来访问![[Pasted image 20240802203605.png]]</li>
<li><strong>属性length</strong>：返回函数输入参数的个数（rest参数不参与参数的个数）![[Pasted image 20240802203941.png]]</li>
</ul>
<h3 id="认识arguments"><a href="#认识arguments" class="headerlink" title="认识arguments"></a>认识arguments</h3><ul>
<li>arguments是一个类数组对象（不是一个数组类型，而是一个对象类型）<ul>
<li>它拥有数组的一些特性，如length、可以用Index索引来访问</li>
<li>但没有数组的一些方法，如filter、map</li>
</ul>
</li>
</ul>
<h3 id="arguments转Array"><a href="#arguments转Array" class="headerlink" title="arguments转Array"></a>arguments转Array</h3><ul>
<li>方法一：遍历arguments，添加到一个新数组中![[Pasted image 20240802205908.png]]</li>
<li>方法二：ES6中的两个方法<ul>
<li>1.Array.from![[Pasted image 20240802210001.png]]</li>
<li>2.<code>[...arguments]</code>![[Pasted image 20240802210026.png]]</li>
</ul>
</li>
<li>方法三：调用slice函数的call方法![[Pasted image 20240802210124.png]]</li>
</ul>
<h3 id="函数的剩余（rest）参数"><a href="#函数的剩余（rest）参数" class="headerlink" title="函数的剩余（rest）参数"></a>函数的剩余（rest）参数</h3><ul>
<li>ES6中引用了rest parameter，可以将不定数量的参数放入到一个数组中<ul>
<li>最后一个参数是 … 为前缀，那么剩余的参数会作为一个数组放到该参数中![[Pasted image 20240803163950.png]]</li>
</ul>
</li>
<li>剩余参数和arguments的区别<ul>
<li>剩余参数只包含 <em>没有对应形参的实参</em>，arguments对象包含了 <em>传给函数的所有实参</em></li>
<li><em>arguments对象不是一个数组，只是类数组对象，而rest参数是一个真正的数组，可以进行数组的所有操作</em></li>
</ul>
</li>
<li><strong>剩余参数必须放到最后一个位置，否则会报错</strong></li>
</ul>
<h2 id="纯函数"><a href="#纯函数" class="headerlink" title="纯函数"></a>纯函数</h2><h3 id="理解纯函数"><a href="#理解纯函数" class="headerlink" title="理解纯函数"></a>理解纯函数</h3><ul>
<li>有确定的输入，一定会产生确定的输出</li>
<li>函数在执行过程中，不能产生副作用</li>
</ul>
<h2 id="柯里化函数"><a href="#柯里化函数" class="headerlink" title="柯里化函数"></a>柯里化函数</h2><p>![[Pasted image 20240803194335.png]]</p>
<h3 id="自动柯里化（了解）"><a href="#自动柯里化（了解）" class="headerlink" title="自动柯里化（了解）"></a>自动柯里化（了解）</h3><p>![[Pasted image 20240803201340.png]]</p>
<h2 id="组合函数"><a href="#组合函数" class="headerlink" title="组合函数"></a>组合函数</h2><p>![[Pasted image 20240803203237.png]]</p>
<h2 id="严格模式"><a href="#严格模式" class="headerlink" title="严格模式"></a>严格模式</h2><p>![[Pasted image 20240803210307.png]]</p>
<h1 id="对象增强"><a href="#对象增强" class="headerlink" title="对象增强"></a>对象增强</h1><h2 id="Object-defineProperty"><a href="#Object-defineProperty" class="headerlink" title="Object.defineProperty"></a>Object.defineProperty</h2><ul>
<li>Object.defineProperty()方法会直接在对象上定义一个新属性，或者修改一个对象的现有属性，并返回此对象：<code>Object.defineProperty(obj, prop, descriptor)</code></li>
<li>可接受三个参数<ul>
<li>obj：要定义属性的对象</li>
<li>prop：要定义或修改属性的名称或Symbol</li>
<li>descriptor：要定义或修改的属性描述符</li>
</ul>
</li>
<li>返回值被传递给函数的对象</li>
</ul>
<h2 id="数据属性描述符"><a href="#数据属性描述符" class="headerlink" title="数据属性描述符"></a>数据属性描述符</h2><p>![[Pasted image 20240805170950.png]]</p>
<h2 id="存取属性描述符"><a href="#存取属性描述符" class="headerlink" title="存取属性描述符"></a>存取属性描述符</h2><p>![[Pasted image 20240805172134.png]]</p>
<h2 id="同时定义多个属性"><a href="#同时定义多个属性" class="headerlink" title="同时定义多个属性"></a>同时定义多个属性</h2><ul>
<li>Object.defineProperties()方法直接在一个对象上定义多个新的属性或修改现有属性，并且返回该对象![[Pasted image 20240805173134.png]]</li>
</ul>
<h1 id="ES5中的继承"><a href="#ES5中的继承" class="headerlink" title="ES5中的继承"></a>ES5中的继承</h1><h2 id="对象和函数的原型"><a href="#对象和函数的原型" class="headerlink" title="对象和函数的原型"></a>对象和函数的原型</h2><h3 id="认识对象原型"><a href="#认识对象原型" class="headerlink" title="认识对象原型"></a>认识对象原型</h3><p>![[Pasted image 20240805192039.png]]</p>
<h3 id="函数对象的原型"><a href="#函数对象的原型" class="headerlink" title="函数对象的原型"></a>函数对象的原型</h3><p>![[Pasted image 20240805192551.png]]<br><strong>将方法放在原型上</strong></p>
<ol>
<li>*减少内存占用：<ul>
<li>当方法定义在对象的实例上时,每个对象都会有一个独立的方法副本,这会浪费内存。</li>
<li>将方法放在原型上,所有对象实例共享同一个方法,大大减少了内存的使用。</li>
</ul>
</li>
<li><em>提高代码复用性</em>：<ul>
<li>将方法放在原型上,可以让所有对象实例都能访问和使用这些方法。</li>
<li>这提高了代码的复用性,避免了在每个对象实例上都定义相同的方法,提高了开发效率。</li>
</ul>
</li>
<li>*动态添加&#x2F;修改方法：<ul>
<li>通过修改原型,可以动态地为所有对象实例添加或修改方法。</li>
<li>这使得代码更加灵活和可扩展。</li>
</ul>
</li>
<li><em>保持对象实例的轻量级</em>：<ul>
<li>将方法放在原型上,可以保持对象实例本身更加简单和轻量级。</li>
<li>对象实例中只保存自己的属性,方法都存储在原型上,这样可以提高性能。</li>
</ul>
</li>
<li>*继承和多态：<ul>
<li>通过原型链机制,可以实现继承和多态。</li>
<li>子类可以重写或扩展从父类继承的方法,实现代码复用和多态特性。<br><strong>注意：</strong> 讲方法放在原型上的方法也叫做实例方法，在没有实例对象的情况下，不能调用此函数</li>
</ul>
</li>
</ol>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs html"><span class="hljs-meta">&lt;!DOCTYPE <span class="hljs-keyword">html</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">html</span> <span class="hljs-attr">lang</span>=<span class="hljs-string">&quot;en&quot;</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">head</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">charset</span>=<span class="hljs-string">&quot;UTF-8&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">meta</span> <span class="hljs-attr">name</span>=<span class="hljs-string">&quot;viewport&quot;</span> <span class="hljs-attr">content</span>=<span class="hljs-string">&quot;width=device-width, initial-scale=1.0&quot;</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">title</span>&gt;</span>Document<span class="hljs-tag">&lt;/<span class="hljs-name">title</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">head</span>&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">body</span>&gt;</span><br>  <span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">Students</span>(<span class="hljs-params">name, age, grade</span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age;</span><br><span class="language-javascript">      <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span> = grade;</span><br><span class="language-javascript">    &#125; <span class="hljs-comment">// 定义构造函数</span></span><br><span class="language-javascript">    </span><br><span class="language-javascript">    <span class="hljs-title class_">Students</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">running</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span><br><span class="language-javascript">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> + <span class="hljs-string">&quot; is running&quot;</span>);</span><br><span class="language-javascript">    &#125; <span class="hljs-comment">// 将方法放在原型上</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    <span class="hljs-keyword">var</span> std1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Students</span>(<span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">100</span>) <span class="hljs-comment">// 创建实例对象</span></span><br><span class="language-javascript"></span><br><span class="language-javascript">    std1.<span class="hljs-title function_">running</span>()</span><br><span class="language-javascript"></span><br><span class="language-javascript">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">body</span>&gt;</span><br><span class="hljs-tag">&lt;/<span class="hljs-name">html</span>&gt;</span><br></code></pre></td></tr></table></figure>
<h2 id="constructor属性"><a href="#constructor属性" class="headerlink" title="constructor属性"></a>constructor属性</h2><p>![[Pasted image 20240806141712.png]]<br>**理解<br>![[Pasted image 20240806145948.png]]</p>
<p>![[Pasted image 20240806145900.png]]</p>
<ul>
<li>重写原型对象![[Pasted image 20240806151052.png]]![[Pasted image 20240806151113.png]]![[Pasted image 20240806151123.png]]![[Pasted image 20240806151136.png]]</li>
</ul>
<h2 id="通过原型链实现继承"><a href="#通过原型链实现继承" class="headerlink" title="通过原型链实现继承"></a>通过原型链实现继承</h2><p>创建父类对象，并且作为子类的原型对象![[Pasted image 20240806160312.png]]![[Pasted image 20240806160344.png]]![[Pasted image 20240806160612.png]]</p>
<h2 id="借用构造函数实现继承"><a href="#借用构造函数实现继承" class="headerlink" title="借用构造函数实现继承"></a>借用构造函数实现继承</h2><p>![[Pasted image 20240806161649.png]]![[Pasted image 20240806161712.png]]![[Pasted image 20240806161725.png]]</p>
<ul>
<li>组合原型链和借用构造函数实现继承的问题![[Pasted image 20240806162633.png]]</li>
</ul>
<h2 id="寄生组合实现继承"><a href="#寄生组合实现继承" class="headerlink" title="寄生组合实现继承"></a>寄生组合实现继承</h2><p>![[Pasted image 20240806165456.png]]<br>最终实现方案：</p>
<ul>
<li>将继承函数封装成工具放在JS文件中![[Pasted image 20240806170337.png]]</li>
<li>代码![[Pasted image 20240806170358.png]]</li>
</ul>
<h2 id="对象的方法补充"><a href="#对象的方法补充" class="headerlink" title="对象的方法补充"></a>对象的方法补充</h2><p>![[Pasted image 20240806173132.png]]</p>
<h1 id="ES6实现继承"><a href="#ES6实现继承" class="headerlink" title="ES6实现继承"></a>ES6实现继承</h1><h2 id="原型继承关系图"><a href="#原型继承关系图" class="headerlink" title="原型继承关系图"></a>原型继承关系图</h2><p>![[Pasted image 20240806211030.png]]</p>
<h2 id="class方式定义类"><a href="#class方式定义类" class="headerlink" title="class方式定义类"></a>class方式定义类</h2><ul>
<li>使用class来定义一个类：<ul>
<li>类声明和类表达式![[Pasted image 20240807133150.png]]</li>
</ul>
</li>
<li>在创建对象的时候想给类传递一些参数：<ul>
<li>每个类有一个固定的构造函数方法<strong>constructor</strong></li>
<li>每个类只能有一个构造函数</li>
</ul>
</li>
<li><strong>注意</strong>：类中定义的多个内容不需要使用 “,” 进行分割</li>
</ul>
<h3 id="实例方法"><a href="#实例方法" class="headerlink" title="实例方法"></a>实例方法</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>     <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) &#123;<br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name<br>       <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age<br>     &#125;<br><br>     <span class="hljs-comment">//running和eating被添加在Person.prototype上</span><br>     <span class="hljs-title function_">running</span>(<span class="hljs-params"></span>) &#123;<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.name&#125;</span> is running.`</span>)<br>     &#125;<br><br>     <span class="hljs-title function_">eating</span>(<span class="hljs-params"></span>) &#123;<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.name&#125;</span> is eating.`</span>)<br>     &#125;<br>   &#125;<br><br>   <span class="hljs-keyword">var</span> p1 = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Person</span>(<span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">20</span>)<br>   p1.<span class="hljs-title function_">running</span>()<br>   p1.<span class="hljs-title function_">eating</span>()<br></code></pre></td></tr></table></figure>
<h3 id="类的静态方法"><a href="#类的静态方法" class="headerlink" title="类的静态方法"></a>类的静态方法</h3><ul>
<li>静态方法通常用于定义直接使用类来执行的方法，不需要有类的实例，使用 <strong>static关键字</strong>来定义</li>
<li>类方法里面的this指向类本身</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br>      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age<br>      &#125;<br><br>      <span class="hljs-keyword">static</span> <span class="hljs-title function_">running</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;<span class="hljs-variable language_">this</span>.name&#125;</span> is running.`</span>); <br>      &#125;<br>    &#125;<br><br>    <span class="hljs-title class_">Person</span>.<span class="hljs-title function_">running</span>() <span class="hljs-comment">// 静态方法可以直接通过类名调用，不需要实例化对象,这里的this指向类本身，输出Person is running.</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="super关键字"><a href="#super关键字" class="headerlink" title="super关键字"></a>super关键字</h3><ul>
<li>执行 super.method(…) 来调用一个父类方法</li>
<li>执行 super(…) 来调用一个父类 constructor (只能在自己的constructor中调用)</li>
<li><strong>注意：</strong> 在子类的构造函数中使用this或者返回默认对象之前，必须先通过super调用父类的构造函数</li>
<li>super的使用位置有三个：子类的构造方法、实例方法、静态方法</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Person</span> &#123;<br><br>      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age</span>) &#123;<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span> = name<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">age</span> = age<br>      &#125;<br>      <span class="hljs-title function_">running</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;running&#x27;</span>)<br>      &#125;<br>      <span class="hljs-title function_">eating</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;eating&#x27;</span>)<br>      &#125;<br><br>      <span class="hljs-keyword">static</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sleeping&#x27;</span>)<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">Student</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Person</span> &#123;<br>      <span class="hljs-title function_">constructor</span>(<span class="hljs-params">name, age, grade</span>) &#123;<br>        <span class="hljs-comment">// 调用父类构造函数</span><br>        <span class="hljs-variable language_">super</span>(name, age)<br>        <span class="hljs-variable language_">this</span>.<span class="hljs-property">grade</span> = grade<br>      &#125;<br><br>      <span class="hljs-comment">// 重写父类方法</span><br>      <span class="hljs-title function_">running</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;running in class&#x27;</span>)<br>        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">running</span>() <span class="hljs-comment">// 调用父类方法</span><br>      &#125;<br><br>      <span class="hljs-comment">// 新增方法</span><br>      <span class="hljs-title function_">studying</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;studying&#x27;</span>)<br>      &#125;<br><br>      <span class="hljs-comment">// 重写父类静态方法</span><br>      <span class="hljs-keyword">static</span> <span class="hljs-title function_">sleep</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;sleeping in class&#x27;</span>)<br>        <span class="hljs-variable language_">super</span>.<span class="hljs-title function_">sleep</span>() <span class="hljs-comment">// 调用父类静态方法</span><br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> stu = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Student</span>(<span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">18</span>)<br>    stu.<span class="hljs-title function_">running</span>()<br>    stu.<span class="hljs-title function_">eating</span>()<br>    stu.<span class="hljs-title function_">studying</span>()<br>    <span class="hljs-title class_">Student</span>.<span class="hljs-title function_">sleep</span>()<br>    <br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="继承内置类"><a href="#继承内置类" class="headerlink" title="继承内置类"></a>继承内置类</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-comment">// 1、创建一个新的类，继承内置类 Array</span><br>    <span class="hljs-keyword">class</span> <span class="hljs-title class_">xyArray</span> <span class="hljs-keyword">extends</span> <span class="hljs-title class_ inherited__">Array</span> &#123;<br>      <span class="hljs-keyword">get</span> <span class="hljs-title function_">lastItem</span>() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]<br>      &#125;<br><br>      <span class="hljs-keyword">get</span> <span class="hljs-title function_">firstItem</span>() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[<span class="hljs-number">0</span>]<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> arr = <span class="hljs-keyword">new</span> <span class="hljs-title function_">xyArray</span>(<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr) <span class="hljs-comment">// [1, 2, 3, 4, 5]</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">length</span>) <span class="hljs-comment">// 5</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">lastItem</span>) <span class="hljs-comment">// 5</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-property">firstItem</span>) <span class="hljs-comment">// 1</span><br><br>    <span class="hljs-comment">// 2、直接对Array进行扩展</span><br>    <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">lastItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[<span class="hljs-variable language_">this</span>.<span class="hljs-property">length</span> - <span class="hljs-number">1</span>]<br>    &#125;<br><br>    <span class="hljs-title class_">Array</span>.<span class="hljs-property"><span class="hljs-keyword">prototype</span></span>.<span class="hljs-property">firstItem</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>[<span class="hljs-number">0</span>]<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> arr2 = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>]<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2) <span class="hljs-comment">// [1, 2, 3, 4, 5]</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2.<span class="hljs-property">length</span>) <span class="hljs-comment">// 5</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2.<span class="hljs-title function_">lastItem</span>()) <span class="hljs-comment">// 5</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr2.<span class="hljs-title function_">firstItem</span>()) <span class="hljs-comment">// 1</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="类的混入mixins"><a href="#类的混入mixins" class="headerlink" title="类的混入mixins"></a>类的混入mixins</h3><ul>
<li>JavaScript的类只支持单继承，当我们需要多继承时，可以使用混入![[Pasted image 20240807153120.png]]</li>
</ul>
<h2 id="ES6对象的增强"><a href="#ES6对象的增强" class="headerlink" title="ES6对象的增强"></a>ES6对象的增强</h2><h3 id="字面量的增强"><a href="#字面量的增强" class="headerlink" title="字面量的增强"></a>字面量的增强</h3><ul>
<li>属性的简写</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1、属性的增强</span><br>    <span class="hljs-keyword">var</span> name = <span class="hljs-string">&quot;小明&quot;</span><br>    <span class="hljs-keyword">var</span> age = <span class="hljs-number">18</span><br><br>    <span class="hljs-keyword">var</span> obj = &#123;<br>      name, <span class="hljs-comment">// 等同于 name: name</span><br>      age <span class="hljs-comment">// 等同于 age: age</span><br>    &#125;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">foo</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">var</span> message = <span class="hljs-string">&quot;Hello World&quot;</span><br>      <span class="hljs-keyword">var</span> info = <span class="hljs-string">&quot;This is a message from &quot;</span><br>      <span class="hljs-keyword">return</span> &#123;<br>        message, <span class="hljs-comment">// 等同于 message: message</span><br>        info <span class="hljs-comment">// 等同于 info: info</span><br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">var</span> result = <span class="hljs-title function_">foo</span>()<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">message</span>) <span class="hljs-comment">// Hello World</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result.<span class="hljs-property">info</span>) <span class="hljs-comment">// This is a message from </span><br></code></pre></td></tr></table></figure>
<ul>
<li>方法的增强</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 2、方法的增强</span><br><span class="hljs-keyword">var</span> obj = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;小明&quot;</span>,<br>  <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>  <span class="hljs-title function_">sayHello</span>(<span class="hljs-params"></span>) &#123; <span class="hljs-comment">// 等同于 sayHello: function() &#123;...&#125;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Hello, &quot;</span> + <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span>)<br>  &#125;<br>&#125;<br><br>obj.<span class="hljs-title function_">sayHello</span>() <span class="hljs-comment">// Hello, 小明</span><br></code></pre></td></tr></table></figure>
<ul>
<li>计算属性名</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 3、计算属性名</span><br>    <span class="hljs-keyword">var</span> key = <span class="hljs-string">&quot;address&quot;</span><br>    <span class="hljs-keyword">var</span> value = <span class="hljs-string">&quot;北京市海淀区&quot;</span><br>    <span class="hljs-keyword">var</span> obj = &#123;<br>      [key]: value <span class="hljs-comment">// 等同于 obj[key] = value</span><br>    &#125;<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj.<span class="hljs-property">address</span>) <span class="hljs-comment">// 北京市海淀区</span><br><br></code></pre></td></tr></table></figure>
<h3 id="解构"><a href="#解构" class="headerlink" title="解构"></a>解构</h3><ul>
<li>数组的解构</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 1.数组的解构语法</span><br>    <span class="hljs-keyword">var</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-literal">undefined</span>, <span class="hljs-number">5</span>]<br><br>    <span class="hljs-comment">// 1.1基本用法</span><br>    <span class="hljs-keyword">var</span> [a, b, c] = arr<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b, c) <span class="hljs-comment">// 1 2 3</span><br><br>    <span class="hljs-comment">// 1.2按照严格的顺序</span><br>    <span class="hljs-keyword">var</span> [a, , c] = arr<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, c) <span class="hljs-comment">// 1 3</span><br><br>    <span class="hljs-comment">// 1.3解构出数组</span><br>    <span class="hljs-keyword">var</span> [a, b, ...arr2] = arr<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b, arr2) <span class="hljs-comment">// 1 2 [3, 4, 5]</span><br><br>    <span class="hljs-comment">// 1.4默认值</span><br>    <span class="hljs-keyword">var</span> [a , b, c, d = <span class="hljs-number">4</span>, e] = arr<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a, b, c, d, e) <span class="hljs-comment">// 1 2 3 4 5</span><br></code></pre></td></tr></table></figure>
<ul>
<li>对象的解构</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 2.对象的解构语法</span><br>    <span class="hljs-keyword">var</span> obj = &#123;<span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;zhangsan&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>, <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;beijing&#x27;</span>&#125;<br><br>    <span class="hljs-comment">// 2.1基本用法</span><br>    <span class="hljs-keyword">var</span> &#123;name, age, city&#125; = obj<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name, age, city) <span class="hljs-comment">// zhangsan 20 beijing</span><br><br>    <span class="hljs-comment">// 2.2对象的解构没有顺序，根据key值解构</span><br>    <span class="hljs-keyword">var</span> &#123;age, name, city&#125; = obj<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name, age, city) <span class="hljs-comment">// zhangsan 20 beijing</span><br><br>    <span class="hljs-comment">// 2.3解构出对象</span><br>    <span class="hljs-keyword">var</span> &#123;name, age, ...obj2&#125; = obj<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name, age, obj2) <span class="hljs-comment">// zhangsan 20 &#123;city: &quot;beijing&quot;&#125;</span><br><br>    <span class="hljs-comment">// 2.4默认值</span><br>    <span class="hljs-keyword">var</span> &#123;name, age, city, job = <span class="hljs-string">&#x27;teacher&#x27;</span>&#125; = obj<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(name, age, city, job) <span class="hljs-comment">// zhangsan 20 beijing teacher</span><br><br>    <span class="hljs-comment">// 2.5对变量名进行重命名</span><br>    <span class="hljs-keyword">var</span> &#123;<span class="hljs-attr">name</span>: myName, <span class="hljs-attr">age</span>: myAge, <span class="hljs-attr">city</span>: myCity&#125; = obj<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(myName, myAge, myCity) <span class="hljs-comment">// zhangsan 20 beijing</span><br><br></code></pre></td></tr></table></figure>
<h1 id="ES6新特性"><a href="#ES6新特性" class="headerlink" title="ES6新特性"></a>ES6新特性</h1><h2 id="let、const"><a href="#let、const" class="headerlink" title="let、const"></a>let、const</h2><h3 id="基本使用"><a href="#基本使用" class="headerlink" title="基本使用"></a>基本使用</h3><ul>
<li>let关键字：与var没有太大的区别，都是用于声明一个变量</li>
<li>const关键字<ul>
<li>用const关键字声明的变量一旦被赋值，就不能被修改</li>
<li>如果赋值的是引用类型，那么可以通过引用找到对应的对象，修改对象的内容![[Pasted image 20240810011845.png]]</li>
</ul>
</li>
<li>let、const都不允许重复声明变量</li>
<li>let、const不会给window上添加任何属性</li>
</ul>
<h3 id="let、const的块级作用域"><a href="#let、const的块级作用域" class="headerlink" title="let、const的块级作用域"></a>let、const的块级作用域</h3><ul>
<li>let、const、function、class声明的标识符具备块级作用域的限制![[Pasted image 20240810022228.png]]</li>
<li>但是函数拥有块级作用域，但是在外面依然可以访问</li>
</ul>
<h4 id="应用场景"><a href="#应用场景" class="headerlink" title="应用场景"></a>应用场景</h4><ul>
<li>获取多个按钮监听点击<br>![[Pasted image 20240810023404.png]]</li>
</ul>
<h2 id="模版字符串"><a href="#模版字符串" class="headerlink" title="模版字符串"></a>模版字符串</h2><ul>
<li>ES6开始使用模版字符串来嵌入JS的变量或者表达式来进行拼接<ul>
<li>使用反引号来编写字符串，称为模版字符串</li>
<li>再通过 <strong>${expression}</strong> 来动态嵌入内容![[Pasted image 20240810025103.png]]</li>
</ul>
</li>
</ul>
<h3 id="标签模版字符串"><a href="#标签模版字符串" class="headerlink" title="标签模版字符串"></a>标签模版字符串</h3><ul>
<li>使用标签模版字符串，在调用时插入其他变量<ul>
<li>模版字符串会被拆分</li>
<li>第一个元素是数组，是被模版字符串拆分的字符串组合</li>
<li>后面的元素是一个个模版字符串传入的内容![[Pasted image 20240810030121.png]]</li>
</ul>
</li>
</ul>
<h2 id="展开运算符"><a href="#展开运算符" class="headerlink" title="展开运算符"></a>展开运算符</h2><h3 id="展开语法"><a href="#展开语法" class="headerlink" title="展开语法"></a>展开语法</h3><p>![[Pasted image 20240810032922.png]]<br>![[Pasted image 20240810033004.png]]</p>
<h2 id="Symbol"><a href="#Symbol" class="headerlink" title="Symbol"></a>Symbol</h2><p>![[Pasted image 20240810034748.png]]![[Pasted image 20240810034808.png]]<br>![[Pasted image 20240810035320.png]]![[Pasted image 20240810035344.png]]</p>
<h2 id="Set-Map"><a href="#Set-Map" class="headerlink" title="Set-Map"></a>Set-Map</h2><h3 id="Set"><a href="#Set" class="headerlink" title="Set"></a>Set</h3><ul>
<li>基本使用<ul>
<li>Set中的元素不能重复</li>
<li>这个功能可以给数组去重![[Pasted image 20240810143447.png]]</li>
</ul>
</li>
<li>常见属性和方法<ul>
<li>属性<ul>
<li>size：返回Set中元素的个数</li>
</ul>
</li>
<li>方法<ul>
<li>add(value)：添加某个元素，返回Set对象本身</li>
<li>delete(value)：从Set中删除和value值相等的元素，返回Boolean类型</li>
<li>has(value)：判断Set中是否存在某个元素，返回Boolean类型</li>
<li>clear()：清空Set中的所有的元素，没有返回值</li>
<li>forEach(callback, [,thisArg])：通过forEach遍历Set</li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="WeakSet"><a href="#WeakSet" class="headerlink" title="WeakSet"></a>WeakSet</h3><p>![[Pasted image 20240810145329.png]]<br>![[Pasted image 20240810145349.png]]</p>
<h3 id="Map"><a href="#Map" class="headerlink" title="Map"></a>Map</h3><p>![[Pasted image 20240810150140.png]]<br>![[Pasted image 20240810150225.png]]</p>
<h3 id="WeakMap"><a href="#WeakMap" class="headerlink" title="WeakMap"></a>WeakMap</h3><p>![[Pasted image 20240810152228.png]]<br>![[Pasted image 20240810152332.png]]</p>
<h2 id="Promise"><a href="#Promise" class="headerlink" title="Promise"></a>Promise</h2><ul>
<li>用于处理异步的解决方案</li>
</ul>
<ol>
<li><p><strong>Promise 的状态</strong>: Promise 有三种状态:Pending（进行中）、Fulfilled（已成功）和 Rejected（已失败）。这些状态可以帮助我们更好地跟踪异步操作的进度。</p>
</li>
<li><p><strong>Promise 的链式调用</strong>: 通过 <code>.then()</code> 和 <code>.catch()</code> 方法,我们可以将多个异步操作串联起来,形成一个 Promise 链。这样可以使代码更加清晰和可读。</p>
</li>
<li><p><strong>错误处理</strong>: 在 Promise 链中,只需在最后添加一个 <code>.catch()</code> 方法即可捕获任何一个步骤中出现的错误,大大简化了错误处理的逻辑。</p>
</li>
<li><p><strong>async&#x2F;await</strong>: 为了进一步简化 Promise 的使用,ES2017 引入了 <code>async/await</code> 语法糖。使用 <code>async</code> 函数可以让异步代码看起来更像同步代码,大大提高了可读性。</p>
</li>
</ol>
<ul>
<li>使用基本格式：</li>
</ul>
<ol>
<li><strong>创建 Promise</strong>:<ul>
<li>使用 <code>new Promise()</code> 创建一个新的 Promise 对象。</li>
<li>传递一个函数作为参数,这个函数被称为 Promise 执行器(Executor)。</li>
<li>在 Promise 执行器函数内部,我们执行异步操作。</li>
<li>如果异步操作成功,调用 <code>resolve(result)</code> 函数,将结果传递出去。</li>
<li>如果异步操作失败,调用 <code>reject(error)</code> 函数,将错误信息传递出去。</li>
</ul>
</li>
<li><strong>使用 Promise</strong>:<ul>
<li>通过 <code>.then()</code> 方法处理 Promise 成功的情况。</li>
<li>通过 <code>.catch()</code> 方法处理 Promise 失败的情况。</li>
<li>通过 <code>.finally()</code> 方法处理无论成功还是失败都要执行的代码。</li>
</ul>
</li>
<li><strong>Promise 链式调用</strong>:   <ul>
<li>每次调用 <code>.then()</code> 或 <code>.catch()</code> 方法都会返回一个新的 Promise 对象。</li>
<li>可以将多个 Promise 操作串联起来,形成 Promise 链。</li>
<li>下一个 <code>.then()</code> 方法会等待上一个 Promise 完成后再执行。</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-comment">// 执行一些异步操作</span><br>  <span class="hljs-keyword">if</span> (<span class="hljs-comment">/* 操作成功 */</span>) &#123;<br>    <span class="hljs-title function_">resolve</span>(result);<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    <span class="hljs-title function_">reject</span>(error);<br>  &#125;<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// 处理成功的结果</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-comment">// 处理失败的情况</span><br>&#125;)<br>.<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  <span class="hljs-comment">// 无论成功还是失败都会执行的代码</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>resolve不同值的区别</li>
</ul>
<ol>
<li><strong>传递普通值</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;success&#x27;</span>);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;success&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递一个普通值,这个值会作为 Promise 的 resolve 结果被传递到后续的 <code>.then()</code> 方法中。</li>
</ul>
</li>
<li><strong>传递 Promise 对象</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">innerResolve, innerReject</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">innerResolve</span>(<span class="hljs-string">&#x27;inner promise result&#x27;</span>);<br>      &#125;, <span class="hljs-number">2000</span>);<br>    &#125;)<br>  );<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;inner promise result&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递的是另一个 Promise 对象,那么外层 Promise 的状态会跟随内层 Promise 的状态进行变化。</li>
<li>外层 Promise 会”等待”内层 Promise 完成,然后采用内层 Promise 的状态和结果。</li>
</ul>
</li>
<li><strong>传递 thenable 对象</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> myThenable = &#123;<br>  <span class="hljs-title function_">then</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;thenable result&#x27;</span>);<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(myThenable);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;thenable result&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递的是一个具有 <code>.then()</code> 方法的对象(称为 thenable 对象),那么 Promise 会”等待”这个对象执行完 <code>.then()</code> 方法,并采用其返回的结果。</li>
</ul>
</li>
<li><strong>传递 throw 或 reject()</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Something went wrong&#x27;</span>));<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error); <span class="hljs-comment">// 输出: Error: Something went wrong</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果在 Promise 执行器函数内部调用 <code>throw</code> 或 <code>reject()</code> 函数,那么 Promise 的状态会变为 <code>rejected</code>。</li>
<li>后续的 <code>.catch()</code> 方法会捕获到这个错误,并进行处理。</li>
</ul>
</li>
</ol>
<h1 id="ES8-ES13"><a href="#ES8-ES13" class="headerlink" title="ES8~ES13"></a>ES8~ES13</h1><h2 id="ES8中对象的相关属性"><a href="#ES8中对象的相关属性" class="headerlink" title="ES8中对象的相关属性"></a>ES8中对象的相关属性</h2><ol>
<li><strong>Object.values()</strong>:<ul>
<li>该方法返回一个给定对象自身的所有可枚举属性值的数组。</li>
<li>它的行为与 <code>Object.keys()</code> 类似,但返回的是属性值,而不是属性名。</li>
</ul>
</li>
<li><strong>Object.entries()</strong>:<ul>
<li>该方法返回一个给定对象自身可枚举字符串键属性 <code>[key, value]</code> 的数组。</li>
<li>这个方法提供了一种迭代一个对象的所有属性的便捷方式。</li>
</ul>
</li>
<li><strong>Object.getOwnPropertyDescriptors()</strong>:<ul>
<li>该方法返回指定对象所有自身属性的描述符。</li>
<li>这个方法在 <code>Object.create()</code> 时很有用,用于实现属性的复制和继承。</li>
</ul>
</li>
<li><strong>Trailing commas</strong>:<ul>
<li>Trailing commas 允许在对象字面量、数组字面量、函数参数列表和函数调用中使用尾随逗号。</li>
<li>这可以使代码更容易维护和扩展,因为添加新属性或参数不会影响前面的代码。</li>
</ul>
</li>
<li><strong>Async functions</strong>:<ul>
<li>Async functions 是 ES8 中引入的一个重要特性,用于简化异步编程。</li>
<li>Async 函数返回一个 Promise 对象,可以使用 <code>await</code> 关键字来等待 Promise 完成。</li>
</ul>
</li>
</ol>
<h2 id="ES8-padStart和padEnd"><a href="#ES8-padStart和padEnd" class="headerlink" title="ES8-padStart和padEnd"></a>ES8-padStart和padEnd</h2><ul>
<li><code>padStart(targetLength, [padString])</code> 方法将当前字符串填充到指定的长度。填充从字符串的开始(左侧)应用的。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 用 &#x27;0&#x27; 填充到长度 5</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;42&#x27;</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;0&#x27;</span>)); <span class="hljs-comment">// Output: &#x27;00042&#x27;</span><br><br><span class="hljs-comment">// 用空格填充到长度 10</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo&#x27;</span>.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">10</span>)); <span class="hljs-comment">// Output: &#x27;       foo&#x27;</span><br></code></pre></td></tr></table></figure>
<ul>
<li><code>padEnd(targetLength, [padString])</code> 方法将当前字符串填充到指定的长度。填充从字符串的末尾(右侧)应用的。</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 用 &#x27;.&#x27; 填充到长度 5</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;hello&#x27;</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">5</span>, <span class="hljs-string">&#x27;.&#x27;</span>)); <span class="hljs-comment">// Output: &#x27;hello.&#x27;</span><br><br><span class="hljs-comment">// 用空格填充到长度 10</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;foo&#x27;</span>.<span class="hljs-title function_">padEnd</span>(<span class="hljs-number">10</span>)); <span class="hljs-comment">// Output: &#x27;foo        &#x27;</span><br></code></pre></td></tr></table></figure>

<p>这些方法在处理金额、日期、编号等数据格式时非常有用,可以帮助我们快速地格式化字符串。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 格式化金额</span><br><span class="hljs-keyword">const</span> amount = <span class="hljs-number">123.45</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(amount.<span class="hljs-title function_">toFixed</span>(<span class="hljs-number">2</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;0&#x27;</span>)); <span class="hljs-comment">// Output: &#x27;0000123.45&#x27;</span><br><br><span class="hljs-comment">// 格式化日期</span><br><span class="hljs-keyword">const</span> date = <span class="hljs-string">&#x27;2023-5-1&#x27;</span>;<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(date.<span class="hljs-title function_">padStart</span>(<span class="hljs-number">10</span>, <span class="hljs-string">&#x27;0&#x27;</span>)); <span class="hljs-comment">// Output: &#x27;2023-05-01&#x27;</span><br><br><span class="hljs-comment">// 隐藏卡号</span><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hideIdCard</span>(<span class="hljs-params">idCard</span>) &#123;<br>  <span class="hljs-keyword">return</span> idCard.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">4</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">18</span>, <span class="hljs-string">&#x27;*&#x27;</span>);<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hideIdCard</span>(<span class="hljs-string">&#x27;123456789012345678&#x27;</span>)); <span class="hljs-comment">// Output: ***************5678</span><br><br><span class="hljs-keyword">function</span> <span class="hljs-title function_">hideBankCard</span>(<span class="hljs-params">bankCard</span>) &#123;<br>  <span class="hljs-keyword">const</span> length = bankCard.<span class="hljs-property">length</span>;<br>  <span class="hljs-keyword">const</span> front = bankCard.<span class="hljs-title function_">slice</span>(<span class="hljs-number">0</span>, <span class="hljs-number">4</span>);<br>  <span class="hljs-keyword">const</span> back = bankCard.<span class="hljs-title function_">slice</span>(-<span class="hljs-number">4</span>);<br>  <span class="hljs-keyword">return</span> front + <span class="hljs-string">&#x27;*&#x27;</span>.<span class="hljs-title function_">repeat</span>(length - <span class="hljs-number">8</span>) + back;<br>&#125;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hideBankCard</span>(<span class="hljs-string">&#x27;1234567890123456&#x27;</span>)); <span class="hljs-comment">// Output: 1234************3456</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title function_">hideBankCard</span>(<span class="hljs-string">&#x27;123456789012345678&#x27;</span>)); <span class="hljs-comment">// Output: 1234************5678</span><br></code></pre></td></tr></table></figure>
<h2 id="ES9-Object-spread-operators"><a href="#ES9-Object-spread-operators" class="headerlink" title="ES9-Object spread operators"></a>ES9-Object spread operators</h2><ol>
<li><strong>Spread 操作符 (<code>...</code>)</strong><br>Spread 操作符可以在对象字面量中使用,用于展开一个现有的对象,将其属性复制到新的对象中。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> originalObj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;;<br><span class="hljs-keyword">const</span> newObj = &#123; ...originalObj, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj); <span class="hljs-comment">// Output: &#123; a: 1, b: 2, c: 3 &#125;</span><br></code></pre></td></tr></table></figure>
<p>在上面的例子中,我们使用 Spread 操作符 <code>...</code> 将 <code>originalObj</code> 的属性复制到 <code>newObj</code> 中,并添加了一个新的属性 <code>c</code>。<br>2. <strong>合并多个对象</strong><br>Spread 操作符可以方便地合并多个对象:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj1 = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span> &#125;;<br><span class="hljs-keyword">const</span> obj2 = &#123; <span class="hljs-attr">b</span>: <span class="hljs-number">3</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">4</span> &#125;;<br><span class="hljs-keyword">const</span> mergedObj = &#123; ...obj1, ...obj2 &#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(mergedObj); <span class="hljs-comment">// Output: &#123; a: 1, b: 3, c: 4 &#125;</span><br></code></pre></td></tr></table></figure>
<p>在这个例子中,我们使用多个 Spread 操作符将 <code>obj1</code> 和 <code>obj2</code> 的属性合并到 <code>mergedObj</code> 中。当有重复的属性时,后面的对象的属性会覆盖前面对象的属性。<br>3. <strong>与解构赋值结合使用</strong><br>Spread 操作符也可以与对象解构赋值结合使用:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> originalObj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;;<br><span class="hljs-keyword">const</span> &#123; a, ...rest &#125; = originalObj;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(a); <span class="hljs-comment">// Output: 1</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(rest); <span class="hljs-comment">// Output: &#123; b: 2, c: 3 &#125;</span><br></code></pre></td></tr></table></figure>
<p>在这个例子中,我们使用对象解构赋值提取 <code>a</code> 属性,并使用 Spread 操作符将剩余的属性赋值给 <code>rest</code> 对象。<br>4. <strong>浅拷贝和深拷贝</strong><br>需要注意的是,Spread 操作符只能进行<strong>浅拷贝</strong>,如果对象中嵌套了其他对象或数组,则需要使用其他方法实现<strong>深拷贝</strong>。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> originalObj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: &#123; <span class="hljs-attr">c</span>: <span class="hljs-number">2</span> &#125; &#125;;<br><span class="hljs-keyword">const</span> newObj = &#123; ...originalObj &#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj.<span class="hljs-property">b</span> === originalObj.<span class="hljs-property">b</span>); <span class="hljs-comment">// Output: true (浅拷贝)</span><br></code></pre></td></tr></table></figure>
<h2 id="ES10-flat-flatMap"><a href="#ES10-flat-flatMap" class="headerlink" title="ES10-flat flatMap"></a>ES10-flat flatMap</h2><ol>
<li><strong><code>flat()</code></strong><br><code>flat()</code> 方法用于将嵌套数组”拉平”为一维数组。它接受一个可选的 <code>depth</code> 参数,指定要提取嵌套数组的深度。如果不传 <code>depth</code> 参数,默认深度为 1。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> nestedArray = [<span class="hljs-number">1</span>, [<span class="hljs-number">2</span>, <span class="hljs-number">3</span>], [<span class="hljs-number">4</span>, [<span class="hljs-number">5</span>, <span class="hljs-number">6</span>]]];<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nestedArray.<span class="hljs-title function_">flat</span>()); <span class="hljs-comment">// Output: [1, 2, 3, 4, [5, 6]]</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nestedArray.<span class="hljs-title function_">flat</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// Output: [1, 2, 3, 4, 5, 6]</span><br></code></pre></td></tr></table></figure>
<p>在上面的例子中,第一个 <code>flat()</code> 调用将数组拉平一层,第二个调用将数组拉平两层。<br>2. <strong><code>flatMap()</code></strong><br><code>flatMap()</code> 是 <code>map()</code> 和 <code>flat()</code> 的组合。它首先使用提供的映射函数映射每个元素,然后将结果压缩成一个新数组。</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>];<br><br><span class="hljs-keyword">const</span> doubledAndFlattened = arr.<span class="hljs-title function_">flatMap</span>(<span class="hljs-function"><span class="hljs-params">x</span> =&gt;</span> [x, x * <span class="hljs-number">2</span>]);<br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(doubledAndFlattened); <span class="hljs-comment">// Output: [1, 2, 2, 4, 3, 6, 4, 8]</span><br></code></pre></td></tr></table></figure>
<p>在上面的例子中,我们使用 <code>flatMap()</code> 将每个元素映射为一个包含原始值和其双倍值的数组,然后将这些数组压缩成一个新数组。<br><code>flatMap()</code> 的好处是,它可以在一步操作中完成映射和拉平操作,相比于先使用 <code>map()</code> 再使用 <code>flat()</code>,效率更高。</p>
<h2 id="ES10-Object-fromEntries"><a href="#ES10-Object-fromEntries" class="headerlink" title="ES10-Object.fromEntries"></a>ES10-Object.fromEntries</h2><ol>
<li><strong><code>Object.entries()</code></strong><br><code>Object.entries()</code> 方法返回一个给定对象自身可枚举字符串属性 <code>[key, value]</code> 对组成的数组。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">a</span>: <span class="hljs-number">1</span>, <span class="hljs-attr">b</span>: <span class="hljs-number">2</span>, <span class="hljs-attr">c</span>: <span class="hljs-number">3</span> &#125;;<br><span class="hljs-keyword">const</span> entries = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(obj);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(entries); <span class="hljs-comment">// Output: [[&#x27;a&#x27;, 1], [&#x27;b&#x27;, 2], [&#x27;c&#x27;, 3]]</span><br></code></pre></td></tr></table></figure>
<p>这个方法在需要遍历对象属性时非常有用,比如使用 <code>for...of</code> 循环:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> [key, value] <span class="hljs-keyword">of</span> <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">entries</span>(obj)) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(key, value);<br>&#125;<br><span class="hljs-comment">// Output:</span><br><span class="hljs-comment">// a 1</span><br><span class="hljs-comment">// b 2</span><br><span class="hljs-comment">// c 3</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><strong><code>Object.fromEntries()</code></strong><br><code>Object.fromEntries()</code> 方法执行与 <code>Object.entries()</code> 逆向操作,将一个键值对列表转换为一个对象。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> entries = [[<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">2</span>], [<span class="hljs-string">&#x27;c&#x27;</span>, <span class="hljs-number">3</span>]];<br><span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(entries);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// Output: &#123; a: 1, b: 2, c: 3 &#125;</span><br></code></pre></td></tr></table></figure>
<p>这个方法在需要从其他数据结构(如 Map)转换为对象时非常有用:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> map = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Map</span>([[<span class="hljs-string">&#x27;a&#x27;</span>, <span class="hljs-number">1</span>], [<span class="hljs-string">&#x27;b&#x27;</span>, <span class="hljs-number">2</span>]]);<br><span class="hljs-keyword">const</span> obj = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">fromEntries</span>(map);<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(obj); <span class="hljs-comment">// Output: &#123; a: 1, b: 2 &#125;</span><br></code></pre></td></tr></table></figure>
<p>应用场景<br>![[Pasted image 20240812145943.png]]</p>
<h2 id="ES10-trimStart-trimEnd"><a href="#ES10-trimStart-trimEnd" class="headerlink" title="ES10-trimStart trimEnd"></a>ES10-trimStart trimEnd</h2><p><code>trim()</code>, <code>trimStart()</code> 和 <code>trimEnd()</code> 是 JavaScript 中用于删除字符串两端空白字符的三个方法。</p>
<ol>
<li><strong><code>trim()</code></strong><br><code>trim()</code> 方法返回一个新的字符串,其中从字符串的两端删除了所有空白字符。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> str = <span class="hljs-string">&quot;   Hello, world!   &quot;</span>;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trim</span>()); <span class="hljs-comment">// Output: &quot;Hello, world!&quot;</span><br></code></pre></td></tr></table></figure>

<ol start="2">
<li><strong><code>trimStart()</code></strong><br><code>trimStart()</code> 方法返回一个新的字符串,其中从字符串的开头删除了所有空白字符。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> str = <span class="hljs-string">&quot;   Hello, world!   &quot;</span>;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimStart</span>()); <span class="hljs-comment">// Output: &quot;Hello, world!   &quot;</span><br></code></pre></td></tr></table></figure>

<ol start="3">
<li><strong><code>trimEnd()</code></strong><br><code>trimEnd()</code> 方法返回一个新的字符串,其中从字符串的末尾删除了所有空白字符。</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> str = <span class="hljs-string">&quot;   Hello, world!   &quot;</span>;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(str.<span class="hljs-title function_">trimEnd</span>()); <span class="hljs-comment">// Output: &quot;   Hello, world!&quot;</span><br></code></pre></td></tr></table></figure>
<p>这三个方法的主要区别在于它们删除空白字符的位置:</p>
<ul>
<li><code>trim()</code> 删除字符串两端的空白字符</li>
<li><code>trimStart()</code> 删除字符串开头的空白字符</li>
<li><code>trimEnd()</code> 删除字符串末尾的空白字符</li>
</ul>
<h2 id="ES11-BigInt"><a href="#ES11-BigInt" class="headerlink" title="ES11-BigInt"></a>ES11-BigInt</h2><p>要表示大于NUmber.MAX_SAFE_INTEGER的数值，需要在数值后面加上n![[Pasted image 20240812151216.png]]</p>
<h2 id="ES11-Nullish-Coalescing-Operator-空值合并运算符"><a href="#ES11-Nullish-Coalescing-Operator-空值合并运算符" class="headerlink" title="ES11-Nullish Coalescing Operator (空值合并运算符)"></a>ES11-Nullish Coalescing Operator (空值合并运算符)</h2><p>Nullish Coalescing Operator (空值合并运算符) 是 ECMAScript 2020 (ES11) 引入的一个新的运算符,它可以帮助我们处理 <code>null</code> 和 <code>undefined</code> 值。<br>这个运算符的符号是 <code>??</code>它的工作原理是:</p>
<ol>
<li>如果左侧的操作数不是 <code>null</code> 或 <code>undefined</code>，则返回左侧的操作数。</li>
<li>如果左侧的操作数是 <code>null</code> 或 <code>undefined</code>，则返回右侧的操作数。<br>下面是一些例子:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 基本用法</span><br><span class="hljs-keyword">const</span> username = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-keyword">const</span> displayName = username ?? <span class="hljs-string">&#x27;Guest&#x27;</span>; <span class="hljs-comment">// 输出: &#x27;Guest&#x27;</span><br><br><span class="hljs-keyword">const</span> age = <span class="hljs-number">0</span>;<br><span class="hljs-keyword">const</span> defaultAge = age ?? <span class="hljs-number">30</span>; <span class="hljs-comment">// 输出: 0</span><br><br><span class="hljs-comment">// 与逻辑OR (||) 运算符的比较</span><br><span class="hljs-keyword">const</span> username2 = <span class="hljs-string">&#x27;&#x27;</span>;<br><span class="hljs-keyword">const</span> displayName2 = username2 || <span class="hljs-string">&#x27;Guest&#x27;</span>; <span class="hljs-comment">// 输出: &#x27;Guest&#x27;</span><br></code></pre></td></tr></table></figure>
<p>在上面的例子中,当 <code>username</code> 为空字符串时,逻辑 OR (<code>||</code>) 运算符将返回 <code>&#39;Guest&#39;</code>。但是,空字符串在 JavaScript 中是一个有效的值,我们可能不希望将其视为”falsy”。这时,Nullish Coalescing Operator 就很有用,它只会在值为 <code>null</code> 或 <code>undefined</code> 时返回右侧操作数。</p>
<p>另一个常见的用例是设置默认值:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">greet</span>(<span class="hljs-params">name</span>) &#123;<br>  <span class="hljs-keyword">const</span> displayName = name ?? <span class="hljs-string">&#x27;Guest&#x27;</span>;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Hello, <span class="hljs-subst">$&#123;displayName&#125;</span>!`</span>);<br>&#125;<br><br><span class="hljs-title function_">greet</span>(<span class="hljs-literal">null</span>); <span class="hljs-comment">// 输出: &quot;Hello, Guest!&quot;</span><br><span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;&#x27;</span>); <span class="hljs-comment">// 输出: &quot;Hello, !&quot;</span><br><span class="hljs-title function_">greet</span>(<span class="hljs-string">&#x27;John&#x27;</span>); <span class="hljs-comment">// 输出: &quot;Hello, John!&quot;</span><br></code></pre></td></tr></table></figure>
<p>在这个例子中,如果 <code>name</code> 参数是 <code>null</code> 或 <code>undefined</code>，Nullish Coalescing Operator 会将 <code>displayName</code> 设置为 <code>&#39;Guest&#39;</code>。但如果 <code>name</code> 是一个空字符串,它仍然会被使用,因为空字符串不是 <code>null</code> 或 <code>undefined</code>。</p>
<h2 id="ES11-Optional-Chaining-可选链"><a href="#ES11-Optional-Chaining-可选链" class="headerlink" title="ES11-Optional Chaining (可选链)"></a>ES11-Optional Chaining (可选链)</h2><p>Optional Chaining (可选链) 是 ECMAScript 2020 (ES11) 引入的一个新的运算符,用于安全地访问嵌套对象的属性。它的符号是 <code>?.</code><br>Optional Chaining 可以帮助我们避免在访问嵌套对象属性时出现的 <code>TypeError: Cannot read property &#39;x&#39; of undefined</code> 错误。<br>下面是一些例子:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 不使用可选链</span><br><span class="hljs-keyword">let</span> adventurer = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>  <span class="hljs-attr">cat</span>: &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Dinah&#x27;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(adventurer.<span class="hljs-property">dog</span>.<span class="hljs-property">name</span>); <span class="hljs-comment">// TypeError: Cannot read property &#x27;name&#x27; of undefined</span><br><br><span class="hljs-comment">// 使用可选链</span><br><span class="hljs-keyword">let</span> adventurer2 = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Alice&#x27;</span>,<br>  <span class="hljs-attr">cat</span>: &#123;<br>    <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Dinah&#x27;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(adventurer2?.<span class="hljs-property">dog</span>?.<span class="hljs-property">name</span>); <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure>
<p>在第一个例子中,尝试访问 <code>adventurer.dog.name</code> 会抛出 <code>TypeError</code>,因为 <code>adventurer.dog</code> 是 <code>undefined</code>。<br>但在第二个例子中,使用 Optional Chaining 运算符 <code>?.</code> 可以安全地访问嵌套属性。如果 <code>adventurer2.dog</code> 是 <code>undefined</code>,则整个表达式的结果也是 <code>undefined</code>,而不会抛出错误。</p>
<p>Optional Chaining 也可以与函数调用一起使用:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">let</span> customer = &#123;<br>  <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;Carl&#x27;</span>,<br>  <span class="hljs-attr">address</span>: &#123;<br>    <span class="hljs-attr">city</span>: <span class="hljs-string">&#x27;Seattle&#x27;</span><br>  &#125;<br>&#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(customer.<span class="hljs-property">address</span>.<span class="hljs-property">city</span>); <span class="hljs-comment">// &#x27;Seattle&#x27;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(customer.<span class="hljs-property">address</span>?.<span class="hljs-property">city</span>); <span class="hljs-comment">// &#x27;Seattle&#x27;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(customer.<span class="hljs-property">address</span>?.<span class="hljs-property">getZipCode</span>?.());  <span class="hljs-comment">// undefined</span><br></code></pre></td></tr></table></figure>
<p>在最后一个例子中,即使 <code>customer.address.getZipCode</code> 不存在,使用 Optional Chaining 也不会抛出错误,而是返回 <code>undefined</code>。</p>
<h2 id="ES12-FinalizationRegistry"><a href="#ES12-FinalizationRegistry" class="headerlink" title="ES12-FinalizationRegistry"></a>ES12-FinalizationRegistry</h2><p>FinalizationRegistry 是 ECMAScript 2021 (ES12) 引入的一个新的 API,它允许在对象被垃圾回收时执行自定义的清理逻辑。<br>FinalizationRegistry 的主要用途是:</p>
<ol>
<li><strong>监听对象的清理</strong>:当一个对象被垃圾回收时,FinalizationRegistry 会通知注册的回调函数。这可以用于执行清理操作,比如释放资源、发送通知等。</li>
<li><strong>避免内存泄漏</strong>:FinalizationRegistry 可以帮助开发者避免内存泄漏,因为它可以确保在对象被销毁时执行清理逻辑。<br> 示例:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建FinalizationRegistry实例</span><br><span class="hljs-keyword">const</span> registry = <span class="hljs-keyword">new</span> <span class="hljs-title class_">FinalizationRegistry</span>(<span class="hljs-function">(<span class="hljs-params">value</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`Finalized: <span class="hljs-subst">$&#123;value&#125;</span>`</span>);<br>&#125;);<br><br><span class="hljs-comment">// 注册对象</span><br><span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> &#125;;<br>registry.<span class="hljs-title function_">register</span>(obj, <span class="hljs-string">&#x27;object-1&#x27;</span>);<br><br><span class="hljs-comment">// 手动触发垃圾回收</span><br>obj = <span class="hljs-literal">null</span>;<br><span class="hljs-variable language_">global</span>.<span class="hljs-title function_">gc</span>(); <span class="hljs-comment">// 在Node.js中手动触发</span><br><br><span class="hljs-comment">// 输出: Finalized: object-1</span><br></code></pre></td></tr></table></figure>
<p>在上述示例中:</p>
<ol>
<li>我们创建了一个 FinalizationRegistry 实例,并传入一个回调函数,该函数将在对象被垃圾回收时被调用。</li>
<li>我们注册了一个对象 <code>obj</code> 到 FinalizationRegistry,并为其提供了一个标识符 <code>&#39;object-1&#39;</code>。</li>
<li>我们手动将 <code>obj</code> 设置为 <code>null</code>,然后调用 <code>global.gc()</code> 来触发垃圾回收(在 Node.js 中,需要使用 <code>--expose-gc</code> 标志来启用手动垃圾回收)。</li>
<li>当对象被垃圾回收时,FinalizationRegistry 会调用我们提供的回调函数,并输出 <code>&#39;Finalized: object-1&#39;</code>。<br>FinalizationRegistry 的一个主要优点是,它不会阻止对象被垃圾回收。相反,它会在对象被回收后执行清理逻辑,这使得它比 <code>WeakMap</code> 和 <code>WeakSet</code> 更加灵活和强大。<br>FinalizationRegistry 的典型用例包括:</li>
</ol>
<ul>
<li>清理 DOM 元素和事件监听器</li>
<li>关闭数据库连接或释放其他系统资源</li>
<li>发送对象销毁的通知</li>
</ul>
<h2 id="ES12-WeakRefs"><a href="#ES12-WeakRefs" class="headerlink" title="ES12-WeakRefs"></a>ES12-WeakRefs</h2><p>WeakRef 是 ECMAScript 2021 (ES12) 引入的一个新的 API,它允许创建对对象的”弱引用”。这意味着被引用的对象可以被垃圾回收器回收,即使还有 WeakRef 引用它。<br>主要用途:</p>
<ol>
<li><strong>避免内存泄漏</strong>: 由于 WeakRef 不会妨碍对象被垃圾回收,因此可以帮助开发者避免内存泄漏的问题。</li>
<li><strong>缓存模式</strong>: WeakRef 可以用于实现一种”缓存模式”,在需要时重新创建对象,而不是持有永久引用。</li>
<li><strong>观察对象生命周期</strong>: WeakRef 可以用于观察对象的生命周期,并在对象被垃圾回收时执行相应的清理操作。<br>示例:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-comment">// 创建一个对象</span><br><span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">id</span>: <span class="hljs-number">1</span> &#125;;<br><br><span class="hljs-comment">// 创建一个 WeakRef 实例</span><br><span class="hljs-keyword">const</span> weakRef = <span class="hljs-keyword">new</span> <span class="hljs-title class_">WeakRef</span>(obj);<br><br><span class="hljs-comment">// 手动触发垃圾回收</span><br>obj = <span class="hljs-literal">null</span>;<br><span class="hljs-variable language_">global</span>.<span class="hljs-title function_">gc</span>(); <span class="hljs-comment">// 在Node.js中手动触发</span><br><br><span class="hljs-comment">// 尝试访问 WeakRef 持有的对象</span><br><span class="hljs-keyword">const</span> refObj = weakRef.<span class="hljs-title function_">deref</span>();<br><span class="hljs-keyword">if</span> (refObj) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(refObj.<span class="hljs-property">id</span>); <span class="hljs-comment">// 输出 1</span><br>&#125; <span class="hljs-keyword">else</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;Object has been garbage collected&#x27;</span>);<br>&#125;<br></code></pre></td></tr></table></figure>
<ol>
<li>我们创建了一个对象 <code>obj</code>。</li>
<li>我们使用 <code>new WeakRef(obj)</code> 创建了一个 WeakRef 实例,它持有对 <code>obj</code> 的引用。</li>
<li>我们手动将 <code>obj</code> 设置为 <code>null</code>,然后调用 <code>global.gc()</code> 来触发垃圾回收(在 Node.js 中,需要使用 <code>--expose-gc</code> 标志来启用手动垃圾回收)。</li>
<li>我们尝试使用 <code>weakRef.deref()</code> 方法访问 WeakRef 持有的对象。如果对象还存在,则输出 <code>1</code>。否则,输出 <code>&#39;Object has been garbage collected&#39;</code>。</li>
</ol>
<p>WeakRef 的一个主要特点是,它不会阻止被引用的对象被垃圾回收。相反,一旦对象没有其他强引用,它就可以被垃圾回收,即使还有 WeakRef 引用它。这使得 WeakRef 非常适合于缓存模式和生命周期观察等用例<br>WeakRef 通常与 FinalizationRegistry 配合使用,后者可以在对象被垃圾回收时执行清理逻辑。这种组合可以帮助开发者更好地管理内存和系统资源。</p>
<h2 id="ES13-method-at"><a href="#ES13-method-at" class="headerlink" title="ES13-method.at()"></a>ES13-method.at()</h2><p><code>method.at()</code> 是 ECMAScript 2022 (ES13) 引入的一个新的数组方法,它允许使用索引值访问数组元素,并且可以接受负值索引。<br>特点:</p>
<ol>
<li><strong>支持负值索引</strong>: <code>at()</code> 方法可以接受负值索引,这意味着可以从数组末尾开始计数。例如, <code>arr.at(-1)</code> 返回数组的最后一个元素。</li>
<li><strong>返回 undefined 而不是抛出错误</strong>: 如果使用无效的索引值(例如索引超出数组范围),<code>at()</code> 方法不会抛出错误,而是返回 <code>undefined</code>。</li>
<li><strong>更简洁的语法</strong>: <code>at()</code> 方法提供了一种更简洁的语法来访问数组元素,相比于使用方括号语法 (<code>arr[index]</code>) 更加直观。<br>示例:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> arr = [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>];<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">at</span>(<span class="hljs-number">2</span>)); <span class="hljs-comment">// 输出: 3</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">at</span>(-<span class="hljs-number">1</span>)); <span class="hljs-comment">// 输出: 5</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(arr.<span class="hljs-title function_">at</span>(<span class="hljs-number">10</span>)); <span class="hljs-comment">// 输出: undefined</span><br></code></pre></td></tr></table></figure>
<h2 id="ES13-Object-hasOwn-obj-prop"><a href="#ES13-Object-hasOwn-obj-prop" class="headerlink" title="ES13-Object.hasOwn(obj, prop)"></a>ES13-Object.hasOwn(obj, prop)</h2><p><code>Object.hasOwn()</code> 是 ECMAScript 2022 (ES13) 引入的一个新的静态方法,它用于检查一个对象是否包含指定的属性。这个方法是 <code>Object.prototype.hasOwnProperty()</code> 方法的一种更简洁的替代方式。<br>特点:</p>
<ol>
<li><strong>更简洁的语法</strong>: <code>Object.hasOwn(obj, prop)</code> 方法提供了一种更简洁的语法来检查对象是否包含指定的属性,相比于使用 <code>obj.hasOwnProperty(prop)</code> 更加简洁。   </li>
<li><strong>更安全的属性检查</strong>: <code>Object.hasOwn()</code> 避免了原型污染问题,因为它直接在对象上检查属性,而不会受到原型链上的属性影响。这使得它更安全地用于检查对象属性。   </li>
<li><strong>支持 null 和 undefined</strong>: 与 <code>obj.hasOwnProperty(prop)</code> 不同, <code>Object.hasOwn()</code> 可以接受 <code>null</code> 或 <code>undefined</code> 作为第一个参数,并在这种情况下返回 <code>false</code>。<br>示例:</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> obj = &#123; <span class="hljs-attr">name</span>: <span class="hljs-string">&#x27;John&#x27;</span>, <span class="hljs-attr">age</span>: <span class="hljs-number">30</span> &#125;;<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(obj, <span class="hljs-string">&#x27;name&#x27;</span>)); <span class="hljs-comment">// true</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(obj, <span class="hljs-string">&#x27;address&#x27;</span>)); <span class="hljs-comment">// false</span><br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(<span class="hljs-literal">null</span>, <span class="hljs-string">&#x27;name&#x27;</span>)); <span class="hljs-comment">// false</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-title class_">Object</span>.<span class="hljs-title function_">hasOwn</span>(<span class="hljs-literal">undefined</span>, <span class="hljs-string">&#x27;name&#x27;</span>)); <span class="hljs-comment">// false</span><br></code></pre></td></tr></table></figure>
<p>与 <code>obj.hasOwnProperty(prop)</code> 语法相比, <code>Object.hasOwn()</code> 的优势优势:</p>
<ul>
<li>更简洁的语法,更容易阅读和理解。</li>
<li>避免了原型污染问题,更安全地检查对象属性。</li>
<li>可以处理 <code>null</code> 和 <code>undefined</code> 参数,返回 <code>false</code>。</li>
</ul>
<h1 id="Proxy-Reflect"><a href="#Proxy-Reflect" class="headerlink" title="Proxy-Reflect"></a>Proxy-Reflect</h1><h2 id="Proxy基本使用"><a href="#Proxy基本使用" class="headerlink" title="Proxy基本使用"></a>Proxy基本使用</h2><ul>
<li>如果我们希望 <em>监听一个对象的相关操作</em>，那么我们可以 <em>先创建一个代理对象（Proxy对象）</em></li>
<li>之后通过对代理对象的操作来监听我们想要对原对象进行的操作<br>步骤：</li>
<li>首先需要 <em>new Proxy对象</em>，并且传入需要监听的对象以及一个处理对象，称之为handler<br><code>const p = new Proxy(target, handler)</code></li>
<li>其次， <em>我们之后的操作都是直接对Proxy的操作</em>，而不是原有的对象，因为我们需要在handler里</li>
</ul>
<h2 id="Proxy的捕获器"><a href="#Proxy的捕获器" class="headerlink" title="Proxy的捕获器"></a>Proxy的捕获器</h2><p>如果想要监听某些具体的操作，就可以在handler中添加对应的 <em>捕获器</em><br>![[Pasted image 20240812213843.png]]</p>
<ul>
<li>set函数有4个参数<ul>
<li>target：目标对象（监听的对象）</li>
<li>property：将被设置的属性key</li>
<li>value：新属性值</li>
<li>receiver：调用的代理对象</li>
</ul>
</li>
<li>get函数有3个参数<ul>
<li>target：目标对象（监听的对象）</li>
<li>property：将被设置的属性key</li>
<li>receiver：调用的代理对象</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">const</span> obj = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>      <span class="hljs-attr">height</span>: <span class="hljs-number">1.88</span><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> objProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, &#123;<br>      <span class="hljs-attr">set</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">target, key, value</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`属性<span class="hljs-subst">$&#123;key&#125;</span>被设置成<span class="hljs-subst">$&#123;value&#125;</span>`</span>)<br>        target[key] = value<br>      &#125;,<br>      <span class="hljs-attr">get</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params">target, key</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`属性<span class="hljs-subst">$&#123;key&#125;</span>被读取`</span>)<br>        <span class="hljs-keyword">return</span> target[key] <span class="hljs-comment">// 这里返回target[key]，可以让属性的读取操作正常进行</span><br>      &#125;<br>    &#125;)<br><br>    objProxy.<span class="hljs-property">address</span> = <span class="hljs-string">&quot;四川省&quot;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(objProxy.<span class="hljs-property">address</span>) <span class="hljs-comment">// 四川省</span><br>    objProxy.<span class="hljs-property">age</span> = <span class="hljs-number">20</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<p>![[Pasted image 20240812215441.png]]</p>
<h2 id="Reflect"><a href="#Reflect" class="headerlink" title="Reflect"></a>Reflect</h2><ul>
<li>作用：Reflect 是 JavaScript 中的一个内置对象,它提供了一组方法和属性,用于更好地反映和操作对象。相比于直接使用对象的属性和方法,Reflect 提供了一些额外的功能和便利。</li>
<li>与Object的区别： Reflect 与 Object 的方法名称很相似,但 Reflect 方法会返回操作结果,而 Object 方法则会返回操作对象本身。![[Pasted image 20240813000221.png]]</li>
<li>常见方法：</li>
</ul>
<ol>
<li><strong>获取属性值</strong>:<ul>
<li><code>Reflect.get(target, property[, receiver])</code>: 获取对象 <code>target</code> 的属性 <code>property</code> 的值。</li>
</ul>
</li>
<li><strong>设置属性值</strong>:<ul>
<li><code>Reflect.set(target, property, value[, receiver])</code>: 设置对象 <code>target</code> 的属性 <code>property</code> 的值为 <code>value</code>。</li>
</ul>
</li>
<li><strong>删除属性</strong>:<ul>
<li><code>Reflect.deleteProperty(target, property)</code>: 删除对象 <code>target</code> 的属性 <code>property</code>。</li>
</ul>
</li>
<li><strong>检查属性是否存在</strong>:<ul>
<li><code>Reflect.has(target, property)</code>: 检查对象 <code>target</code> 是否拥有属性 <code>property</code>。</li>
</ul>
</li>
<li><strong>获取对象原型</strong>:<ul>
<li><code>Reflect.getPrototypeOf(target)</code>: 获取对象 <code>target</code> 的原型。</li>
</ul>
</li>
<li><strong>设置对象原型</strong>:<ul>
<li><code>Reflect.setPrototypeOf(target, prototype)</code>: 设置对象 <code>target</code> 的原型为 <code>prototype</code></li>
</ul>
</li>
<li><strong>判断对象是否可扩展</strong>:<ul>
<li><code>Reflect.isExtensible(target)</code>: 判断对象 <code>target</code> 是否可扩展。</li>
</ul>
</li>
<li><strong>冻结对象</strong>:<ul>
<li><code>Reflect.preventExtensions(target)</code>: 让对象 <code>target</code> 变为不可扩展。</li>
</ul>
</li>
<li><strong>获取自身属性描述符</strong>:<ul>
<li><code>Reflect.getOwnPropertyDescriptor(target, property)</code>: 获取对象 <code>target</code> 的属性 <code>property</code> 的描述符。</li>
</ul>
</li>
<li><strong>定义属性</strong>:<ul>
<li><code>Reflect.defineProperty(target, property, descriptor)</code>: 在对象 <code>target</code> 上定义属性 <code>property</code>。</li>
</ul>
</li>
<li><strong>调用函数</strong>:<ul>
<li><code>Reflect.apply(target, thisArgument, argumentsList)</code>: 使用给定的 <code>this</code> 值和参数列表调用目标函数。</li>
</ul>
</li>
<li><strong>使用 new 创建实例</strong>:<ul>
<li><code>Reflect.construct(target, argumentsList[, newTarget])</code>: 使用给定的构造函数 <code>target</code> 和参数列表创建一个新实例。<br>![[Pasted image 20240813000437.png]]</li>
</ul>
</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">const</span> obj = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;why&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">18</span>,<br>      <span class="hljs-keyword">get</span> <span class="hljs-title function_">info</span>() &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">name</span><br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> objProxy = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Proxy</span>(obj, &#123;<br>      <span class="hljs-title function_">set</span>(<span class="hljs-params">target, key, value, receiver</span>) &#123;<br><br>        <span class="hljs-comment">// target[key] = value</span><br>        <span class="hljs-comment">// return true</span><br>        <span class="hljs-comment">// 好处1、代理对象的目的：不再直接操作原对象</span><br>        <span class="hljs-comment">// 好处2、Reflect.set()方法可以返回一个布尔值，表示是否设置成功</span><br>        <span class="hljs-comment">/* 好处3、</span><br><span class="hljs-comment">          reciver === objProxy,就是外层的Proxy对象</span><br><span class="hljs-comment">          Reflect.set/get最后一个参数receiver可以决定对象访问器的setter/getter的this指向</span><br><span class="hljs-comment">        */</span><br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Proxy中的设置方法被调用&quot;</span>)<br>        <span class="hljs-keyword">const</span> isSuccess = <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">set</span>(target, key, value)<br><br>        <span class="hljs-keyword">if</span>(!isSuccess) &#123;<br>          <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;set failed&quot;</span>)<br>        &#125;<br>      &#125;,<br>      <span class="hljs-title function_">get</span>(<span class="hljs-params">target, key, receiver</span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;Proxy中的获取方法被调用&quot;</span>)<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Reflect</span>.<span class="hljs-title function_">get</span>(target, key, receiver)<br>      &#125;<br>    &#125;)<br><br>    objProxy.<span class="hljs-property">name</span> = <span class="hljs-string">&quot;kobe&quot;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(objProxy.<span class="hljs-property">info</span>)<br><br></code></pre></td></tr></table></figure>
<h1 id="Promise-1"><a href="#Promise-1" class="headerlink" title="Promise"></a>Promise</h1><h2 id="异步任务的处理"><a href="#异步任务的处理" class="headerlink" title="异步任务的处理"></a>异步任务的处理</h2><ul>
<li>我们调用一个函数，这个函数中发送网络请求</li>
<li>如果 <em>发送网络请求成功了</em>，那么告知调用者发送成功，并且返回相关数据</li>
<li>如果 <em>发送网络请求失败了</em>，那么告知调用者发送失败，并且告知错误信息![[Pasted image 20240816165910.png]]</li>
</ul>
<h2 id="Promise的基本使用"><a href="#Promise的基本使用" class="headerlink" title="Promise的基本使用"></a>Promise的基本使用</h2><ul>
<li>Promise是一个类，当我们需要的时候，给予调用者一个承诺：待会儿回调函数的时候，就可以创建一个Promise对象</li>
<li>在通过new创建Promise对象时，我们需要传入一个回调函数，称为executor<ul>
<li>这个回调函数会被立即执行，并且给传入另外两个回调函数resolve、reject</li>
<li>调用resolve回调函数时，会执行Promise对象的then方法传入的回调函数</li>
<li>调用reject回调函数时，会执行Promise对象的catch方法传入的回调函数![[Pasted image 20240816172919.png]]</li>
</ul>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">execCode</span>(<span class="hljs-params">counter</span>) &#123;<br>      <span class="hljs-comment">// 异步处理</span><br>      <span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>        <span class="hljs-comment">// 模拟异步处理</span><br>        <span class="hljs-keyword">if</span>(counter &gt; <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">let</span> total = <span class="hljs-number">0</span><br>          <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; counter; i++) &#123;<br>            total += i<br>          &#125;<br>          <span class="hljs-title function_">resolve</span>(total)<br>        &#125; <span class="hljs-keyword">else</span> &#123;<br>          <span class="hljs-title function_">reject</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;counter&#125;</span>输入错误`</span>)<br>        &#125;<br>      &#125;)<br>      <span class="hljs-keyword">return</span> promise<br>    &#125;<br><br>    <span class="hljs-title function_">execCode</span>(<span class="hljs-number">5</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">sucessed</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;成功：&quot;</span>, sucessed)<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;失败：&quot;</span>, error)<br>    &#125;)<br><br>    <span class="hljs-title function_">execCode</span>(-<span class="hljs-number">5</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">sucessed</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;成功：&quot;</span>, sucessed)<br>    &#125;).<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;失败：&quot;</span>, error)<br>    &#125;)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="resolve不同值"><a href="#resolve不同值" class="headerlink" title="resolve不同值"></a>resolve不同值</h2><ol>
<li><strong>传递普通值</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;success&#x27;</span>);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;success&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递一个普通值,这个值会作为 Promise 的 resolve 结果被传递到后续的 <code>.then()</code> 方法中。</li>
</ul>
</li>
<li><strong>传递 Promise 对象</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">innerResolve, innerReject</span>) =&gt;</span> &#123;<br>      <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-title function_">innerResolve</span>(<span class="hljs-string">&#x27;inner promise result&#x27;</span>);<br>      &#125;, <span class="hljs-number">2000</span>);<br>    &#125;)<br>  );<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;inner promise result&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递的是另一个 Promise 对象,那么外层 Promise 的状态会跟随内层 Promise 的状态进行变化。</li>
<li>外层 Promise 会”等待”内层 Promise 完成,然后采用内层 Promise 的状态和结果。</li>
</ul>
</li>
<li><strong>传递 thenable 对象</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">const</span> myThenable = &#123;<br>  <span class="hljs-title function_">then</span>(<span class="hljs-params">resolve, reject</span>) &#123;<br>    <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;thenable result&#x27;</span>);<br>  &#125;<br>&#125;;<br><br><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">resolve</span>(myThenable);<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: &#x27;thenable result&#x27;</span><br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error);<br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果 <code>resolve()</code> 函数传递的是一个具有 <code>.then()</code> 方法的对象(称为 thenable 对象),那么 Promise 会”等待”这个对象执行完 <code>.then()</code> 方法,并采用其返回的结果。</li>
</ul>
</li>
<li><strong>传递 throw 或 reject()</strong> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>  <span class="hljs-title function_">reject</span>(<span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&#x27;Something went wrong&#x27;</span>));<br>&#125;)<br>.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result);<br>&#125;)<br>.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error); <span class="hljs-comment">// 输出: Error: Something went wrong</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果在 Promise 执行器函数内部调用 <code>throw</code> 或 <code>reject()</code> 函数,那么 Promise 的状态会变为 <code>rejected</code>。</li>
<li>后续的 <code>.catch()</code> 方法会捕获到这个错误,并进行处理。</li>
</ul>
</li>
</ol>
<h2 id="then的返回值"><a href="#then的返回值" class="headerlink" title="then的返回值"></a>then的返回值</h2><p><code>Promise</code> 的 <code>then</code> 方法的返回值是一个新的 <code>Promise</code> 对象。这个返回值可以用于实现链式调用。</p>
<ul>
<li>关键点</li>
</ul>
<ol>
<li><strong>成功回调的返回值</strong>:<ul>
<li>如果在 <code>then</code> 的成功回调中返回一个值，这个值将作为下一个 <code>then</code> 的输入。</li>
<li>如果返回的是一个 <code>Promise</code>，下一个 <code>then</code> 将等待该 <code>Promise</code> 完成。</li>
</ul>
</li>
<li><strong>失败回调的返回值</strong>:<ul>
<li>如果在 <code>then</code> 的失败回调中返回一个值，该值将被忽略，链中的下一个 <code>then</code> 将继续执行。</li>
<li>如果返回的是一个 <code>Promise</code>，同样会等待下一个 <code>Promise</code> 完成。</li>
</ul>
</li>
</ol>
<ul>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>);<br>&#125;);<br><br>promise<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: 42</span><br>        <span class="hljs-keyword">return</span> result + <span class="hljs-number">1</span>; <span class="hljs-comment">// 返回 43</span><br>    &#125;)<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: 43</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(result + <span class="hljs-number">1</span>); <span class="hljs-comment">// 返回一个新的 Promise</span><br>    &#125;)<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: 44</span><br>    &#125;);<br></code></pre></td></tr></table></figure>
<h2 id="catch的返回值"><a href="#catch的返回值" class="headerlink" title="catch的返回值"></a>catch的返回值</h2><p><code>Promise</code> 的 <code>catch</code> 方法的返回值也会是一个新的 <code>Promise</code> 对象，具有和 <code>then</code> 方法相似的特性。具体来说，<code>catch</code> 主要用于处理链中的错误，但是它的返回值可以影响后续的链式调用。</p>
<ul>
<li>关键点</li>
</ul>
<ol>
<li><strong>处理错误并返回值</strong>:<ul>
<li>如果 <code>catch</code> 处理了错误并返回一个值，这个值将作为后续链中下一个 <code>then</code> 的输入。</li>
</ul>
</li>
<li><strong>返回新 Promise</strong>:<ul>
<li>如果在 <code>catch</code> 中返回一个 <code>Promise</code>，下一个 <code>then</code> 会等待这个 <code>Promise</code> 完成，然后将结果传递下去。</li>
</ul>
</li>
</ol>
<ul>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;出错了&#x27;</span>);<br>&#125;);<br><br>promise<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 不会执行</span><br>    &#125;)<br>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error); <span class="hljs-comment">// 输出: 出错了</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;处理完毕&#x27;</span>; <span class="hljs-comment">// 返回一个字符串</span><br>    &#125;)<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: 处理完毕</span><br>    &#125;);<br></code></pre></td></tr></table></figure>
<ul>
<li>如果我们希望后续继续执行catch，那么需要抛出一个异常![[Pasted image 20240816202837.png]]</li>
</ul>
<h2 id="finally的回调"><a href="#finally的回调" class="headerlink" title="finally的回调"></a>finally的回调</h2><p><code>Promise</code> 的 <code>finally</code> 方法用于在 <code>Promise</code> 操作结束后执行一个回调函数，无论是成功还是失败。这使得 <code>finally</code> 非常适合用于清理或执行一些始终需要进行的操作，比如关闭文件、清理资源等。</p>
<ul>
<li>特点</li>
</ul>
<ol>
<li><strong>不影响链的结果</strong>:<ul>
<li><code>finally</code> 的回调不会接收 <code>Promise</code> 的结果或错误。</li>
<li>无论前面的 <code>then</code> 或 <code>catch</code> 是否成功，<code>finally</code> 始终会执行。</li>
</ul>
</li>
<li><strong>返回值</strong>:<ul>
<li><code>finally</code> 返回一个新的 <code>Promise</code>，其解析方式与前面的 <code>Promise</code> 一致。</li>
<li>如果在 <code>finally</code> 中返回一个值或 <code>Promise</code>，将不会影响前面 <code>then</code> 或 <code>catch</code> 的结果。</li>
</ul>
</li>
</ol>
<ul>
<li>示例</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-keyword">const</span> success = <span class="hljs-literal">true</span>; <span class="hljs-comment">// 模拟操作成功或失败</span><br><br>    <span class="hljs-keyword">if</span> (success) &#123;<br>        <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;成功&#x27;</span>);<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;失败&#x27;</span>);<br>    &#125;<br>&#125;);<br><br>promise<br>    .<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">result</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(result); <span class="hljs-comment">// 输出: 成功</span><br>    &#125;)<br>    .<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error); <span class="hljs-comment">// 不会执行</span><br>    &#125;)<br>    .<span class="hljs-title function_">finally</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;清理操作&#x27;</span>); <span class="hljs-comment">// 输出: 清理操作</span><br>    &#125;);<br></code></pre></td></tr></table></figure>
<h2 id="Promise类方法"><a href="#Promise类方法" class="headerlink" title="Promise类方法"></a>Promise类方法</h2><p><code>Promise</code> 的类方法提供了用于创建和操作 <code>Promise</code> 实例的多种功能。以下是主要的 <code>Promise</code> 类方法及其描述：</p>
<h3 id="1-Promise-resolve-value"><a href="#1-Promise-resolve-value" class="headerlink" title="1. Promise.resolve(value)"></a>1. <code>Promise.resolve(value)</code></h3><ul>
<li><strong>功能</strong>: 返回一个以给定值解析后的 <code>Promise</code> 对象。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise1 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">42</span>);<br>promise1.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value)); <span class="hljs-comment">// 输出: 42</span><br></code></pre></td></tr></table></figure>

<h3 id="2-Promise-reject-reason"><a href="#2-Promise-reject-reason" class="headerlink" title="2. Promise.reject(reason)"></a>2. <code>Promise.reject(reason)</code></h3><ul>
<li><strong>功能</strong>: 返回一个以给定原因拒绝后的 <code>Promise</code> 对象。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise2 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;出错了&#x27;</span>);<br>promise2.<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">error</span> =&gt;</span> <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">error</span>(error)); <span class="hljs-comment">// 输出: 出错了</span><br></code></pre></td></tr></table></figure>
<h3 id="3-Promise-all-iterable"><a href="#3-Promise-all-iterable" class="headerlink" title="3. Promise.all(iterable)"></a>3. <code>Promise.all(iterable)</code></h3><ul>
<li><strong>功能</strong>: 接受一个可迭代对象（如数组），当所有 <code>Promise</code> 都已成功时，返回一个新的 <code>Promise</code>，并解析为一个数组，包含所有 <code>Promise</code> 的结果。如果其中任何一个 <code>Promise</code> 被拒绝，它将立即返回拒绝状态。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise3 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">all</span>([<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">2</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>)<br>]);<br><br>promise3.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">values</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(values); <span class="hljs-comment">// 输出: [1, 2, 3]</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="4-Promise-allSettled-iterable"><a href="#4-Promise-allSettled-iterable" class="headerlink" title="4. Promise.allSettled(iterable)"></a>4. <code>Promise.allSettled(iterable)</code></h3><ul>
<li><strong>功能</strong>: 接受一个可迭代对象，返回一个新的 <code>Promise</code>，当所有 <code>Promise</code> 的状态都已确定时（不论成功还是失败），以数组的形式解析，数组中的每个对象描述了每个 <code>Promise</code> 的结果。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise4 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">allSettled</span>([<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">1</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;失败&#x27;</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>)<br>]);<br><br>promise4.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">results</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(results);<br>    <span class="hljs-comment">// 输出: [</span><br>    <span class="hljs-comment">//   &#123; status: &#x27;fulfilled&#x27;, value: 1 &#125;,</span><br>    <span class="hljs-comment">//   &#123; status: &#x27;rejected&#x27;, reason: &#x27;失败&#x27; &#125;,</span><br>    <span class="hljs-comment">//   &#123; status: &#x27;fulfilled&#x27;, value: 3 &#125;</span><br>    <span class="hljs-comment">// ]</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="5-Promise-any-iterable"><a href="#5-Promise-any-iterable" class="headerlink" title="5. Promise.any(iterable)"></a>5. <code>Promise.any(iterable)</code></h3><ul>
<li><strong>功能</strong>: 接受一个可迭代对象，返回一个新的 <code>Promise</code>。只要有一个 <code>Promise</code> 成功，它就会解析为那个成功的值。如果所有 <code>Promise</code> 都被拒绝，则返回一个拒绝的 <code>Promise</code>，其理由是一个 <code>AggregateError</code>。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise5 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">any</span>([<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;失败1&#x27;</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">resolve</span>(<span class="hljs-number">3</span>),<br>    <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">reject</span>(<span class="hljs-string">&#x27;失败2&#x27;</span>)<br>]);<br><br>promise5.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value); <span class="hljs-comment">// 输出: 3</span><br>&#125;);<br></code></pre></td></tr></table></figure>

<h3 id="6-Promise-race-iterable"><a href="#6-Promise-race-iterable" class="headerlink" title="6. Promise.race(iterable)"></a>6. <code>Promise.race(iterable)</code></h3><ul>
<li><strong>功能</strong>: 接受一个可迭代对象，返回一个新的 <code>Promise</code>，只要有一个 <code>Promise</code> 完成或被拒绝，返回的 <code>Promise</code> 就会返回这个完成或被拒绝的值。</li>
<li><strong>示例</strong>:</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">const</span> promise6 = <span class="hljs-title class_">Promise</span>.<span class="hljs-title function_">race</span>([<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;快速完成&#x27;</span>), <span class="hljs-number">100</span>)),<br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve</span>) =&gt;</span> <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> <span class="hljs-title function_">resolve</span>(<span class="hljs-string">&#x27;慢完成&#x27;</span>), <span class="hljs-number">200</span>))<br>]);<br><br>promise6.<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">value</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(value); <span class="hljs-comment">// 输出: 快速完成</span><br>&#125;);<br></code></pre></td></tr></table></figure>
<h1 id="迭代器和生成器"><a href="#迭代器和生成器" class="headerlink" title="迭代器和生成器"></a>迭代器和生成器</h1><h2 id="什么是迭代器"><a href="#什么是迭代器" class="headerlink" title="什么是迭代器"></a>什么是迭代器</h2><p>![[Pasted image 20240816214845.png]]![[Pasted image 20240816214905.png]]![[Pasted image 20240817154234.png]]</p>
<h2 id="自定义可迭代对象"><a href="#自定义可迭代对象" class="headerlink" title="自定义可迭代对象"></a>自定义可迭代对象</h2><p>![[Pasted image 20240817155356.png]]</p>
<h2 id="可迭代对象的应用"><a href="#可迭代对象的应用" class="headerlink" title="可迭代对象的应用"></a>可迭代对象的应用</h2><p>![[Pasted image 20240817162522.png]]</p>
<h2 id="什么是生成器"><a href="#什么是生成器" class="headerlink" title="什么是生成器"></a>什么是生成器</h2><p>![[Pasted image 20240817191031.png]]</p>
<h2 id="生成器函数参数返回值"><a href="#生成器函数参数返回值" class="headerlink" title="生成器函数参数返回值"></a>生成器函数参数返回值</h2><ul>
<li>在中间位置直接return</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generatorFunction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;结束&#x27;</span>; <span class="hljs-comment">// 在这里返回，终止生成器</span><br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// 此行不会被执行</span><br>&#125;<br><br><span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generatorFunction</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 1, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 2, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: &#x27;结束&#x27;, done: true &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: undefined, done: true &#125;</span><br></code></pre></td></tr></table></figure>
<ul>
<li>给函数每次执行的时候传入参数</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span>* <span class="hljs-title function_">foo</span>(<span class="hljs-params">name1</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：111&#x27;</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：222&#x27;</span>);<br>      <span class="hljs-keyword">const</span> name2 = <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;aaaa&quot;</span><br><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：333&#x27;</span>);<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：444&#x27;</span>);<br>      <span class="hljs-keyword">const</span> name3 = <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;bbbb&quot;</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：555&#x27;</span>); <br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;内部：666&#x27;</span>);<br>      <span class="hljs-keyword">yield</span> <span class="hljs-string">&quot;cccc&quot;</span><br>      <span class="hljs-keyword">return</span> <span class="hljs-literal">undefined</span><br>    &#125;<br><br>    <span class="hljs-keyword">const</span> bar = <span class="hljs-title function_">foo</span>(<span class="hljs-string">&quot;next1&quot;</span>)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-title function_">next</span>()) <span class="hljs-comment">// &#123;value: &quot;aaaa&quot;, done: false&#125;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-title function_">next</span>(<span class="hljs-string">&quot;next2&quot;</span>)) <span class="hljs-comment">// &#123;value: &quot;bbbb&quot;, done: false&#125;</span><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(bar.<span class="hljs-title function_">next</span>(<span class="hljs-string">&quot;next3&quot;</span>)) <span class="hljs-comment">// &#123;value: &quot;cccc&quot;, done: true&#125;</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="生成器函数提前结束"><a href="#生成器函数提前结束" class="headerlink" title="生成器函数提前结束"></a>生成器函数提前结束</h2><ul>
<li><ol>
<li>使用 <code>return</code> 语句</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generatorFunction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;<br>    <span class="hljs-keyword">return</span> <span class="hljs-string">&#x27;结束&#x27;</span>; <span class="hljs-comment">// 提前结束</span><br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// 不会被执行</span><br>&#125;<br><br><span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generatorFunction</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 1, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 2, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: &#x27;结束&#x27;, done: true &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: undefined, done: true &#125;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><ol start="2">
<li>使用 <code>throw</code> 语句</li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generatorFunction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">try</span> &#123;<br>        <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;<br>        <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;<br>    &#125; <span class="hljs-keyword">catch</span> (e) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(e); <span class="hljs-comment">// 捕获错误</span><br>    &#125;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">3</span>; <span class="hljs-comment">// 如果被抛出错误，将不会执行</span><br>&#125;<br><br><span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generatorFunction</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 1, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 2, done: false &#125;</span><br>gen.<span class="hljs-keyword">throw</span>(<span class="hljs-string">&#x27;捕获错误&#x27;</span>); <span class="hljs-comment">// 输出: 捕获错误</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: undefined, done: true &#125;</span><br></code></pre></td></tr></table></figure>

<ul>
<li><ol start="3">
<li>使用 <code>return</code> 结合 <code>next()</code></li>
</ol>
</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><code class="hljs JS"><span class="hljs-keyword">function</span>* <span class="hljs-title function_">generatorFunction</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">1</span>;<br>    <span class="hljs-keyword">yield</span> <span class="hljs-number">2</span>;<br>&#125;<br><br><span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">generatorFunction</span>();<br><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: 1, done: false &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-keyword">return</span>(<span class="hljs-string">&#x27;提前结束&#x27;</span>)); <span class="hljs-comment">// 输出: &#123; value: &#x27;提前结束&#x27;, done: true &#125;</span><br><span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>()); <span class="hljs-comment">// 输出: &#123; value: undefined, done: true &#125;</span><br></code></pre></td></tr></table></figure>
<h2 id="生成器替代迭代器"><a href="#生成器替代迭代器" class="headerlink" title="生成器替代迭代器"></a>生成器替代迭代器</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span>* <span class="hljs-title function_">foo</span>(<span class="hljs-params">start, end</span>) &#123;<br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = start; i &lt;= end; i++) &#123;<br>        <span class="hljs-keyword">yield</span> i<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> gen = <span class="hljs-title function_">foo</span>(<span class="hljs-number">1</span>, <span class="hljs-number">10</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(gen.<span class="hljs-title function_">next</span>())<br><br>    <span class="hljs-keyword">const</span> names = [<span class="hljs-string">&#x27;Alice&#x27;</span>, <span class="hljs-string">&#x27;Bob&#x27;</span>, <span class="hljs-string">&#x27;Charlie&#x27;</span>, <span class="hljs-string">&#x27;David&#x27;</span>]<br>    <span class="hljs-keyword">function</span>* <span class="hljs-title function_">nameGenerator</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">yield</span>* names<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> nameGen = <span class="hljs-title function_">nameGenerator</span>()<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nameGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nameGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nameGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(nameGen.<span class="hljs-title function_">next</span>().<span class="hljs-property">value</span>)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="异步处理方案"><a href="#异步处理方案" class="headerlink" title="异步处理方案"></a>异步处理方案</h2><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>   <span class="hljs-comment">/*</span><br><span class="hljs-comment">     需求：</span><br><span class="hljs-comment">     1、发送一次网络请求，等到这次网络请求的结果</span><br><span class="hljs-comment">     2、再发送一次网络请求，并将这次网络请求的结果作为参数，再次发送网络请求</span><br><span class="hljs-comment">     3、再次发送网络请求，并将这次网络请求的结果作为参数，再次发送网络请求</span><br><span class="hljs-comment">     4、最后一次的网络请求的结果作为最终结果</span><br><span class="hljs-comment">   */</span><br>   <span class="hljs-comment">// 异步请求代码结构</span><br>   <span class="hljs-keyword">function</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-params">url</span>) &#123;<br>     <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>       <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>         <span class="hljs-title function_">resolve</span>(url)<br>       &#125;, <span class="hljs-number">2000</span>);<br>     &#125;)<br>   &#125;<br><br>   <span class="hljs-comment">// 方法一：回调地域</span><br>   <span class="hljs-comment">// function getData() &#123;</span><br>   <span class="hljs-comment">//   requestData(&quot;why&quot;).then(res1 =&gt; &#123;</span><br>   <span class="hljs-comment">//     console.log(&quot;第一次结果：&quot;, res1)</span><br>   <span class="hljs-comment">//     requestData(res1 + &quot;aaa&quot;).then(res2 =&gt; &#123;</span><br>   <span class="hljs-comment">//       console.log(&quot;第二次结果：&quot;, res2)</span><br>   <span class="hljs-comment">//       requestData(res2 + &quot;bbb&quot;).then(res3 =&gt; &#123;</span><br>   <span class="hljs-comment">//         console.log(&quot;第三次结果：&quot;, res3)</span><br>   <span class="hljs-comment">//       &#125;)</span><br>   <span class="hljs-comment">//     &#125;)</span><br>   <span class="hljs-comment">//   &#125;)</span><br>   <span class="hljs-comment">// &#125;</span><br><br>   <span class="hljs-comment">// 方法二：使用Promise进行重构（解决回调地狱）</span><br>   <span class="hljs-comment">// function getData() &#123;</span><br>   <span class="hljs-comment">//   requestData(&quot;why&quot;).then(res1 =&gt; &#123;</span><br>   <span class="hljs-comment">//     console.log(&quot;第一次结果：&quot;, res1)</span><br>   <span class="hljs-comment">//     return requestData(res1 + &quot;aaa&quot;)</span><br>   <span class="hljs-comment">//   &#125;).then(res2 =&gt; &#123;</span><br>   <span class="hljs-comment">//     console.log(&quot;第二次结果：&quot;, res2)</span><br>   <span class="hljs-comment">//     return requestData(res2 + &quot;bbb&quot;)</span><br>   <span class="hljs-comment">//   &#125;).then(res3 =&gt; &#123;</span><br>   <span class="hljs-comment">//     console.log(&quot;第三次结果：&quot;, res3)</span><br>   <span class="hljs-comment">//     requestData(res3 + &quot;ccc&quot;)</span><br>   <span class="hljs-comment">//   &#125;)</span><br>   <span class="hljs-comment">// &#125;</span><br><br>   <span class="hljs-comment">// 方法三：使用生成器进行重构</span><br>   <span class="hljs-comment">// function* getData() &#123;</span><br>   <span class="hljs-comment">//   const res1 = yield requestData(&quot;why&quot;)</span><br>   <span class="hljs-comment">//   console.log(&quot;第一次结果：&quot;, res1)</span><br>   <span class="hljs-comment">//   const res2 = yield requestData(res1 + &quot;aaa&quot;)</span><br>   <span class="hljs-comment">//   console.log(&quot;第二次结果：&quot;, res2)</span><br>   <span class="hljs-comment">//   const res3 = yield requestData(res2 + &quot;bbb&quot;)</span><br>   <span class="hljs-comment">//   console.log(&quot;第三次结果：&quot;, res3)</span><br>   <span class="hljs-comment">// &#125;</span><br><br>   <span class="hljs-comment">// const gen = getData()</span><br>   <span class="hljs-comment">// gen.next().value.then(res1 =&gt; &#123;</span><br>   <span class="hljs-comment">//   gen.next(res1).value.then(res2 =&gt; &#123;</span><br>   <span class="hljs-comment">//     gen.next(res2).value.then(res3 =&gt; &#123;</span><br>   <span class="hljs-comment">//       gen.next(res3)</span><br>   <span class="hljs-comment">//     &#125;)</span><br>   <span class="hljs-comment">//   &#125;)</span><br>   <span class="hljs-comment">// &#125;)</span><br><br>   <span class="hljs-comment">// 方法四：使用async/await进行重构</span><br>     <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>) &#123;<br>       <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">&quot;why&quot;</span>)<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;第一次结果：&quot;</span>, res1)<br>       <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(res1 + <span class="hljs-string">&quot;aaa&quot;</span>)<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;第二次结果：&quot;</span>, res2)<br>       <span class="hljs-keyword">const</span> res3 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(res2 + <span class="hljs-string">&quot;bbb&quot;</span>)<br>       <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;第三次结果：&quot;</span>, res3)<br>     &#125;<br>   <span class="hljs-title function_">getData</span>()<br><br> &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h1 id="async、await-队列"><a href="#async、await-队列" class="headerlink" title="async、await - 队列"></a>async、await - 队列</h1><h2 id="异步函数async-function"><a href="#异步函数async-function" class="headerlink" title="异步函数async function"></a>异步函数async function</h2><ul>
<li></li>
</ul>
<h2 id="await关键字"><a href="#await关键字" class="headerlink" title="await关键字"></a>await关键字</h2><p>![[Pasted image 20240819154154.png]]<br>处理异步请求</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>        <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-title function_">reject</span>(<span class="hljs-string">&quot;error message&quot;</span>)<br>      &#125;, <span class="hljs-number">2000</span>);<br>    &#125;)<br>  &#125;<br><br>  <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">getData</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">const</span> res1 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">&quot;why&quot;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res1)<br>    <span class="hljs-keyword">const</span> res2 = <span class="hljs-keyword">await</span> <span class="hljs-title function_">requestData</span>(<span class="hljs-string">&quot;how&quot;</span>)<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res2)<br>  &#125;<br><br>  <span class="hljs-title function_">getData</span>().<span class="hljs-title function_">catch</span>(<span class="hljs-function"><span class="hljs-params">err</span> =&gt;</span> &#123;<br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(err)<br>  &#125;)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="进程和线程"><a href="#进程和线程" class="headerlink" title="进程和线程"></a>进程和线程</h2><p>![[Pasted image 20240819193235.png]]</p>
<h2 id="浏览器中的JavaScript线程"><a href="#浏览器中的JavaScript线程" class="headerlink" title="浏览器中的JavaScript线程"></a>浏览器中的JavaScript线程</h2><p>![[Pasted image 20240819205046.png]]</p>
<h2 id="浏览器的事件循环"><a href="#浏览器的事件循环" class="headerlink" title="浏览器的事件循环"></a>浏览器的事件循环</h2><p>![[Pasted image 20240819205801.png]]</p>
<h2 id="微任务和宏任务"><a href="#微任务和宏任务" class="headerlink" title="微任务和宏任务"></a>微任务和宏任务</h2><p>![[Pasted image 20240819210919.png]]</p>
<h2 id="Promise面试题"><a href="#Promise面试题" class="headerlink" title="Promise面试题"></a>Promise面试题</h2><h3 id="1"><a href="#1" class="headerlink" title="1"></a>1</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;script start&quot;</span>)<br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;setTimeout1&quot;</span>)<br>      <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>        <span class="hljs-title function_">resolve</span>()<br>      &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>          <span class="hljs-title function_">resolve</span>()<br>        &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>          <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;then4&quot;</span>)<br>        &#125;)<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;then2&quot;</span>)<br>      &#125;)<br>    &#125;)<br>    <br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;promise1&quot;</span>)<br>      <span class="hljs-title function_">resolve</span>()<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;then1&quot;</span>)<br>    &#125;)<br><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;setTimeout2&quot;</span>)<br>    &#125;)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-number">2</span>)<br><br>    <span class="hljs-title function_">queueMicrotask</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;queueMicrotask1&quot;</span>)<br>    &#125;)<br><br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>      <span class="hljs-title function_">resolve</span>()<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;then3&quot;</span>)<br>    &#125;)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;script end&quot;</span>)<br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">     代码执行顺序：</span><br><span class="hljs-comment">      script start</span><br><span class="hljs-comment">      promise1</span><br><span class="hljs-comment">      2</span><br><span class="hljs-comment">      script end</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">      then1</span><br><span class="hljs-comment">      queueMicrotask1</span><br><span class="hljs-comment">      then3</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">      setTimeout1</span><br><span class="hljs-comment">      then2</span><br><span class="hljs-comment">      then4</span><br><span class="hljs-comment"></span><br><span class="hljs-comment">      setTimeout2</span><br><span class="hljs-comment">    */</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="2"><a href="#2" class="headerlink" title="2"></a>2</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async1</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 start&#x27;</span>)<br>      <span class="hljs-keyword">await</span> <span class="hljs-title function_">async2</span>()<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;async1 end&#x27;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">async</span> <span class="hljs-keyword">function</span> <span class="hljs-title function_">async2</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;async2&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script start&#x27;</span>)<br><br>    <span class="hljs-built_in">setTimeout</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;setTimeout&#x27;</span>)<br>    &#125;, <span class="hljs-number">0</span>)<br><br>    <span class="hljs-title function_">async1</span>()<br><br>    <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span> (<span class="hljs-keyword">function</span> (<span class="hljs-params">resolve</span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise1&#x27;</span>)<br>      <span class="hljs-title function_">resolve</span>()<br>    &#125;).<span class="hljs-title function_">then</span>(<span class="hljs-keyword">function</span> (<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;promise2&#x27;</span>)<br>    &#125;)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;script end&#x27;</span>)<br><br>    <span class="hljs-comment">/*</span><br><span class="hljs-comment">      代码执行顺序：</span><br><span class="hljs-comment">      script start</span><br><span class="hljs-comment">      async1 start</span><br><span class="hljs-comment">      async2</span><br><span class="hljs-comment">      promise1</span><br><span class="hljs-comment">      script end</span><br><span class="hljs-comment">      async1 end</span><br><span class="hljs-comment">      promise2</span><br><span class="hljs-comment">      setTimeout</span><br><span class="hljs-comment">    */</span><br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h2><h3 id="throw关键字"><a href="#throw关键字" class="headerlink" title="throw关键字"></a>throw关键字</h3><p>![[Pasted image 20240820191231.png]]</p>
<h3 id="Error类型"><a href="#Error类型" class="headerlink" title="Error类型"></a>Error类型</h3><p>![[Pasted image 20240820191257.png]]<br>![[Pasted image 20240820191347.png]]</p>
<h3 id="异常的捕获"><a href="#异常的捕获" class="headerlink" title="异常的捕获"></a>异常的捕获</h3><p>![[Pasted image 20240820191801.png]]</p>
<h1 id="Storage和正则表达式"><a href="#Storage和正则表达式" class="headerlink" title="Storage和正则表达式"></a>Storage和正则表达式</h1><h2 id="认识Storage"><a href="#认识Storage" class="headerlink" title="认识Storage"></a>认识Storage</h2><p>![[Pasted image 20240821160128.png]]</p>
<h3 id="Storage的基本使用"><a href="#Storage的基本使用" class="headerlink" title="Storage的基本使用"></a>Storage的基本使用</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-comment">// token操作</span><br>    <span class="hljs-keyword">let</span> token = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;token&quot;</span>)<br>    <span class="hljs-keyword">if</span>(!token) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;从服务器获取token&quot;</span>)<br>      token = <span class="hljs-string">&quot;aaaaaaaaa&quot;</span><br>      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;token&quot;</span>, token)<br>    &#125;<br><br>    <span class="hljs-comment">// 用户名和密码操作</span><br>    <span class="hljs-keyword">let</span> username = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;username&quot;</span>)<br>    <span class="hljs-keyword">let</span> password = <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">getItem</span>(<span class="hljs-string">&quot;password&quot;</span>)<br>    <span class="hljs-keyword">if</span>(!username || !password) &#123;<br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;从服务器获取用户名和密码&quot;</span>)<br>      username = <span class="hljs-string">&quot;admin&quot;</span><br>      password = <span class="hljs-string">&quot;123456&quot;</span><br>      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;username&quot;</span>, username)<br>      <span class="hljs-variable language_">localStorage</span>.<span class="hljs-title function_">setItem</span>(<span class="hljs-string">&quot;password&quot;</span>, password)<br>    &#125;<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(token)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h3 id="localStorage和sessionStorage的区别"><a href="#localStorage和sessionStorage的区别" class="headerlink" title="localStorage和sessionStorage的区别"></a>localStorage和sessionStorage的区别</h3><p>![[Pasted image 20240821160903.png]]</p>
<h3 id="Storage工具封装"><a href="#Storage工具封装" class="headerlink" title="Storage工具封装"></a>Storage工具封装</h3><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">Cache</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params">isLoacl = <span class="hljs-literal">true</span></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span> = isLocal ? <span class="hljs-variable language_">localStorage</span> : <span class="hljs-variable language_">sessionStorage</span><br>  &#125;<br><br>  <span class="hljs-title function_">setCache</span>(<span class="hljs-params">key, value</span>) &#123;<br>    <span class="hljs-keyword">if</span>(!value) &#123;<br>      <span class="hljs-keyword">throw</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Error</span>(<span class="hljs-string">&quot;value error: value 必须有值&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-keyword">if</span>(value) &#123;<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">setItem</span>(key, <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(value))<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">getCache</span>(<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-keyword">const</span> res = <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">getItem</span>(key)<br>    <span class="hljs-keyword">if</span> (res) &#123;<br>      <span class="hljs-keyword">return</span> <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(res)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-title function_">removeCache</span>(<span class="hljs-params">key</span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">removeItem</span>(key)<br>  &#125;<br><br>  <span class="hljs-title function_">clear</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">storage</span>.<span class="hljs-title function_">clear</span>()<br>  &#125;<br>&#125;<br><br><span class="hljs-keyword">const</span> localCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(<span class="hljs-literal">true</span>)<br><span class="hljs-keyword">const</span> sessionCache = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Cache</span>(<span class="hljs-literal">false</span>)<br></code></pre></td></tr></table></figure>
<h2 id="正则表达式"><a href="#正则表达式" class="headerlink" title="正则表达式"></a>正则表达式</h2><ul>
<li>使用单个字符串来描述、匹配一系列句法规则的字符串，是一种字符串匹配利器，可以帮助我们搜索、获取、替代字符串</li>
<li>正则表达式主要由两部分组成：模式和修饰符![[Pasted image 20240821170906.png]]</li>
</ul>
<h3 id="正则表达式的使用方法"><a href="#正则表达式的使用方法" class="headerlink" title="正则表达式的使用方法"></a>正则表达式的使用方法</h3><ul>
<li>JavaScript的正则表达式被用于RegExp的exec和test方法，String的match、matchAll、replace、search、split方法![[Pasted image 20240821172016.png]]![[Pasted image 20240821173022.png]]<br> ![[Pasted image 20240821173046.png]]</li>
</ul>
<h3 id="修饰符flag的使用"><a href="#修饰符flag的使用" class="headerlink" title="修饰符flag的使用"></a>修饰符flag的使用</h3><p>![[Pasted image 20240821173451.png]]</p>
<h3 id="正则表达式规则"><a href="#正则表达式规则" class="headerlink" title="正则表达式规则"></a>正则表达式规则</h3><h4 id="字符类"><a href="#字符类" class="headerlink" title="字符类"></a>字符类</h4><p>![[Pasted image 20240821174044.png]]</p>
<h4 id="锚点"><a href="#锚点" class="headerlink" title="锚点"></a>锚点</h4><p>![[Pasted image 20240821182149.png]]</p>
<h4 id="转义"><a href="#转义" class="headerlink" title="转义"></a>转义</h4><p>![[Pasted image 20240821193427.png]]</p>
<h4 id="集合"><a href="#集合" class="headerlink" title="集合"></a>集合</h4><p>![[Pasted image 20240821193816.png]]</p>
<h4 id="量词"><a href="#量词" class="headerlink" title="量词"></a>量词</h4><p>![[Pasted image 20240821195144.png]]<br>![[Pasted image 20240821195046.png]]</p>
<h4 id="贪婪和惰性"><a href="#贪婪和惰性" class="headerlink" title="贪婪和惰性"></a>贪婪和惰性</h4><p>![[Pasted image 20240821200334.png]]<br>![[Pasted image 20240821200355.png]]</p>
<h4 id="捕获组"><a href="#捕获组" class="headerlink" title="捕获组"></a>捕获组</h4><p>![[Pasted image 20240821201218.png]]<br>![[Pasted image 20240821201443.png]]<br>![[Pasted image 20240821201509.png]]</p>
<h4 id="正则练习-歌词解析"><a href="#正则练习-歌词解析" class="headerlink" title="正则练习-歌词解析"></a>正则练习-歌词解析</h4><p>![[Pasted image 20240822152859.png]]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">parseLyric</span>(<span class="hljs-params">lyricstring</span>) &#123;<br>  <span class="hljs-comment">// 根据\n切割字符串</span><br>  <span class="hljs-keyword">const</span> lyricLineStrings = lyricstring.<span class="hljs-title function_">split</span>(<span class="hljs-string">&quot;\n&quot;</span>)<br>  <span class="hljs-comment">// console.log(lyricLineStrings)</span><br><br>  <span class="hljs-comment">// 根据每一行歌词进行解析</span><br>  <span class="hljs-keyword">const</span> timeRe = <span class="hljs-regexp">/\[(\d&#123;2&#125;):(\d&#123;2&#125;)\.(\d&#123;2,3&#125;)\]/i</span><br>  <span class="hljs-keyword">const</span> lyricInfos = []<br>  <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> lineString <span class="hljs-keyword">of</span> lyricLineStrings) &#123;<br>    <span class="hljs-comment">// 获取时间</span><br>    <span class="hljs-keyword">const</span> result = lineString.<span class="hljs-title function_">match</span>(timeRe)<br>    <span class="hljs-keyword">if</span>(!result) <span class="hljs-keyword">continue</span><br>    <span class="hljs-keyword">const</span> minuteTime = result[<span class="hljs-number">1</span>] * <span class="hljs-number">60</span> * <span class="hljs-number">1000</span><br>    <span class="hljs-keyword">const</span> secondTime = result[<span class="hljs-number">2</span>] * <span class="hljs-number">1000</span><br>    <span class="hljs-keyword">const</span> millisecondTime = result[<span class="hljs-number">3</span>].<span class="hljs-property">length</span> === <span class="hljs-number">3</span>? result[<span class="hljs-number">3</span>] : result[<span class="hljs-number">3</span>] * <span class="hljs-number">10</span><br>    <span class="hljs-keyword">const</span> time = minuteTime + secondTime + millisecondTime<br><br>    <span class="hljs-comment">// 获取歌词</span><br>    <span class="hljs-keyword">const</span> content = lineString.<span class="hljs-title function_">replace</span>(timeRe, <span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">trim</span>()<br><br>    <span class="hljs-comment">// 保存歌词信息</span><br>    lyricInfos.<span class="hljs-title function_">push</span>(&#123;<br>      time,<br>      content <br>    &#125;)<br>  &#125;<br><br>    <span class="hljs-keyword">return</span> lyricInfos<br>&#125;<br></code></pre></td></tr></table></figure>
<h4 id="正则练习-时间格式化"><a href="#正则练习-时间格式化" class="headerlink" title="正则练习-时间格式化"></a>正则练习-时间格式化</h4><p>![[Pasted image 20240822161914.png]]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;h2 <span class="hljs-keyword">class</span>=<span class="hljs-string">&quot;time&quot;</span>&gt;&lt;/h2&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">function</span> <span class="hljs-title function_">formatTime</span>(<span class="hljs-params">timestamp, fmtString</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">// 将时间戳转化为Date</span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">const</span> date = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>(timestamp)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-comment">// 将正则和值匹配</span></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">const</span> dateO = &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;y+&quot;</span>: date.<span class="hljs-title function_">getFullYear</span>(),</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;M+&quot;</span>: date.<span class="hljs-title function_">getMonth</span>() + <span class="hljs-number">1</span>,</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;d+&quot;</span>: date.<span class="hljs-title function_">getDate</span>(),</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;h+&quot;</span>: date.<span class="hljs-title function_">getHours</span>(),</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;m+&quot;</span>: date.<span class="hljs-title function_">getMinutes</span>(),</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-string">&quot;s+&quot;</span>: date.<span class="hljs-title function_">getSeconds</span>(),</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> dateO) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">const</span> keyRe = <span class="hljs-keyword">new</span> <span class="hljs-title class_">RegExp</span>(key) <span class="hljs-comment">// 构造正则表达式</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-comment">// 如果正则表达式匹配到fmtString中，则替换</span></span></span><br><span class="language-javascript"><span class="language-xml">        <span class="hljs-keyword">if</span>(keyRe.<span class="hljs-title function_">test</span>(fmtString)) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">          <span class="hljs-keyword">const</span> value = (dateO[key] + <span class="hljs-string">&quot;&quot;</span>).<span class="hljs-title function_">padStart</span>(<span class="hljs-number">2</span>, <span class="hljs-string">&quot;0&quot;</span>) <span class="hljs-comment">// 补零</span></span></span><br><span class="language-javascript"><span class="language-xml">          fmtString = fmtString.<span class="hljs-title function_">replace</span>(keyRe, value) <span class="hljs-comment">// 替换</span></span></span><br><span class="language-javascript"><span class="language-xml">        &#125;</span></span><br><span class="language-javascript"><span class="language-xml">      &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> fmtString</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> timeEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;.time&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> productJSON = &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      name : <span class="hljs-string">&quot;iphone&quot;</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      newPrice : <span class="hljs-number">10000</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      oldPrice : <span class="hljs-number">8000</span>,</span></span><br><span class="language-javascript"><span class="language-xml">      endTime : <span class="hljs-number">1659252290626</span> </span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">    timeEl.<span class="hljs-property">textContent</span> = <span class="hljs-title function_">formatTime</span>(productJSON.<span class="hljs-property">endTime</span>, <span class="hljs-string">&quot;yyyy/MM/dd hh:mm:ss&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<h1 id="防抖、节流、深拷贝、事件总线"><a href="#防抖、节流、深拷贝、事件总线" class="headerlink" title="防抖、节流、深拷贝、事件总线"></a>防抖、节流、深拷贝、事件总线</h1><h2 id="防抖函数"><a href="#防抖函数" class="headerlink" title="防抖函数"></a>防抖函数</h2><h3 id="认识防抖debounce函数"><a href="#认识防抖debounce函数" class="headerlink" title="认识防抖debounce函数"></a>认识防抖debounce函数</h3><p>![[Pasted image 20240822171403.png]]</p>
<h3 id="手动实现防抖函数"><a href="#手动实现防抖函数" class="headerlink" title="手动实现防抖函数"></a>手动实现防抖函数</h3><ul>
<li>基本实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-params">fn, delay</span>) &#123;<br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-keyword">const</span> <span class="hljs-title function_">_debounce</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          <span class="hljs-title function_">fn</span>()<br>          timer = <span class="hljs-literal">null</span><br>        &#125;, delay)<br>      &#125;<br>      <span class="hljs-keyword">return</span> _debounce<br>    &#125;<br>  &lt;/script&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;input&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> cnt = <span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`第<span class="hljs-subst">$&#123;cnt++&#125;</span>次输入`</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>绑定this</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-params">fn, delay</span>) &#123;<br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-keyword">const</span> _debounce = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args) <span class="hljs-comment">//这里的this绑定到inputEl</span><br>          timer = <span class="hljs-literal">null</span><br>        &#125;, delay)<br>      &#125;<br>      <span class="hljs-keyword">return</span> _debounce<br>    &#125;<br>  &lt;/script&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;input&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> cnt = <span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`第<span class="hljs-subst">$&#123;cnt++&#125;</span>次输入`</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>实现取消功能</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-params">fn, delay</span>) &#123;<br>      <span class="hljs-comment">// 用于记录上一次事件触发的timer</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-comment">// 触发事件时执行的函数</span><br>      <span class="hljs-keyword">const</span> _debounce = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 如果有再次触发事件，那么取消上一次的事件</span><br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br><br>        <span class="hljs-comment">// 延迟去执行对应 fn函数</span><br>        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args) <span class="hljs-comment">//这里的this绑定到inputEl</span><br>          timer = <span class="hljs-literal">null</span><br>        &#125;, delay)<br>      &#125;<br><br>      <span class="hljs-comment">// 给_debounce添加一个cancel方法，用于取消防抖</span><br>      _debounce.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _debounce<br>    &#125;<br>  &lt;/script&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;input&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> cnt = <span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`第<span class="hljs-subst">$&#123;cnt++&#125;</span>次输入`</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>立即执行功能</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-params">fn, delay, immediate = <span class="hljs-literal">true</span></span>) &#123;<br>      <span class="hljs-comment">// 用于记录上一次事件触发的timer</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>      <span class="hljs-keyword">let</span> isInvoke = <span class="hljs-literal">false</span> <span class="hljs-comment">// 是否立即执行</span><br><br>      <span class="hljs-comment">// 触发事件时执行的函数</span><br>      <span class="hljs-keyword">const</span> _debounce = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 如果有再次触发事件，那么取消上一次的事件</span><br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br><br>        <span class="hljs-comment">// 如果是立即执行，那么立即执行对应 fn函数</span><br>        <span class="hljs-keyword">if</span>(immediate &amp;&amp; !isInvoke) &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>          isInvoke = <span class="hljs-literal">true</span><br>          <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-comment">// 延迟去执行对应 fn函数</span><br>        timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args) <span class="hljs-comment">//这里的this绑定到inputEl</span><br>          <span class="hljs-comment">// 重置timer和isInvoke</span><br>          timer = <span class="hljs-literal">null</span><br>          isInvoke = <span class="hljs-literal">false</span><br>        &#125;, delay)<br>      &#125;<br><br>      <span class="hljs-comment">// 给_debounce添加一个cancel方法，用于取消防抖</span><br>      _debounce.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>        <span class="hljs-comment">// 重置timer和isInvoke</span><br>        timer = <span class="hljs-literal">null</span><br>        isInvoke = <span class="hljs-literal">false</span><br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _debounce<br>    &#125;<br>  &lt;/script&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;input&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">let</span> cnt = <span class="hljs-number">1</span></span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`第<span class="hljs-subst">$&#123;cnt++&#125;</span>次输入:`</span>, <span class="hljs-variable language_">this</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>获取返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-params">fn, delay, immediate = <span class="hljs-literal">true</span>, resultCallback</span>) &#123;<br>      <span class="hljs-comment">// 用于记录上一次事件触发的timer</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br>      <span class="hljs-keyword">let</span> isInvoke = <span class="hljs-literal">false</span> <span class="hljs-comment">// 是否立即执行</span><br><br>      <span class="hljs-comment">// 触发事件时执行的函数</span><br>      <span class="hljs-keyword">const</span> _debounce = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">try</span> &#123;<br>                <span class="hljs-comment">// 如果有再次触发事件，那么取消上一次的事件</span><br>                <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br><br>                <span class="hljs-keyword">let</span> res = <span class="hljs-literal">undefined</span><br>                <span class="hljs-comment">// 如果是立即执行，那么立即执行对应 fn函数</span><br>                <span class="hljs-keyword">if</span>(immediate &amp;&amp; !isInvoke) &#123;<br>                  res = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>                  <span class="hljs-keyword">if</span> (resultCallback) <span class="hljs-title function_">resultCallback</span>(res)<br>                  <span class="hljs-title function_">resolve</span>(res)<br>                  isInvoke = <span class="hljs-literal">true</span><br>                  <span class="hljs-keyword">return</span><br>                &#125;<br><br>                <span class="hljs-comment">// 延迟去执行对应 fn函数</span><br>                timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>                  res = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args) <span class="hljs-comment">//这里的this绑定到inputEl</span><br>                  <span class="hljs-keyword">if</span> (resultCallback) <span class="hljs-title function_">resultCallback</span>(res)<br>                  <span class="hljs-title function_">resolve</span>(res)<br>                  <span class="hljs-comment">// 重置timer和isInvoke</span><br>                  timer = <span class="hljs-literal">null</span><br>                  isInvoke = <span class="hljs-literal">false</span><br>                &#125;, delay);<br>              &#125; <span class="hljs-keyword">catch</span> (error) &#123;<br>                <span class="hljs-title function_">reject</span>(error)<br>              &#125;<br>            &#125;)<br>          &#125;<br>          <span class="hljs-comment">// 给_debounce添加一个cancel方法，用于取消防抖</span><br>        _debounce.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>            <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>            <span class="hljs-comment">// 重置timer和isInvoke</span><br>            timer = <span class="hljs-literal">null</span><br>             isInvoke = <span class="hljs-literal">false</span><br>        &#125;<br>      <span class="hljs-keyword">return</span> _debounce<br>    &#125;<br>  &lt;/script&gt;<br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;input&quot;</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> myDebounce = <span class="hljs-title function_">yy_debounce</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">name, age, height</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`name: <span class="hljs-subst">$&#123;name&#125;</span>, age: <span class="hljs-subst">$&#123;age&#125;</span>, height: <span class="hljs-subst">$&#123;height&#125;</span>`</span>)</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;jojo&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>, <span class="hljs-literal">false</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-title function_">myDebounce</span>(<span class="hljs-string">&quot;jojo&quot;</span>, <span class="hljs-number">20</span>, <span class="hljs-number">1.80</span>).<span class="hljs-title function_">then</span>(<span class="hljs-function"><span class="hljs-params">res</span> =&gt;</span> &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(res)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<p>可以用underscore库</p>
<h2 id="节流函数"><a href="#节流函数" class="headerlink" title="节流函数"></a>节流函数</h2><h3 id="认识节流throttle函数"><a href="#认识节流throttle函数" class="headerlink" title="认识节流throttle函数"></a>认识节流throttle函数</h3><p>![[Pasted image 20240825101157.png]]</p>
<h3 id="手动实现节流函数"><a href="#手动实现节流函数" class="headerlink" title="手动实现节流函数"></a>手动实现节流函数</h3><ul>
<li>实现思路<br>![[Pasted image 20240825103812.png]]</li>
<li>基本实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval</span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">const</span> noeTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br>        <span class="hljs-keyword">const</span> waitTime = interval - (noeTime - startTime)<br>        <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-title function_">fn</span>()<br>          startTime = noeTime<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>this绑定</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval</span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-keyword">const</span> noeTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br>        <span class="hljs-keyword">const</span> waitTime = interval - (noeTime - startTime)<br>        <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>          startTime = noeTime<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input:&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>控制立即执行</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval, leading = <span class="hljs-literal">false</span></span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 获取当前时间</span><br>        <span class="hljs-keyword">const</span> nowTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br><br>        <span class="hljs-comment">// 对立即执行函数进行控制</span><br>        <span class="hljs-keyword">if</span>(!leading &amp;&amp; startTime === <span class="hljs-number">0</span>) &#123;<br>          startTime = nowTime<br>        &#125;<br><br>        <span class="hljs-keyword">const</span> waitTime = interval - (nowTime - startTime)<br>        <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>          startTime = nowTime<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input:&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>尾部执行控制</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval, &#123;leading = <span class="hljs-literal">false</span>, trailing = <span class="hljs-literal">true</span>&#125; = &#123;&#125;</span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 获取当前时间</span><br>        <span class="hljs-keyword">const</span> nowTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br><br>        <span class="hljs-comment">// 对立即执行函数进行控制</span><br>        <span class="hljs-keyword">if</span>(!leading &amp;&amp; startTime === <span class="hljs-number">0</span>) &#123;<br>          startTime = nowTime<br>        &#125;<br><br>        <span class="hljs-keyword">const</span> waitTime = interval - (nowTime - startTime)<br>        <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>          startTime = nowTime<br>          timer = <span class="hljs-literal">null</span><br>          <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-comment">// 节流函数尾部执行控制</span><br>        <span class="hljs-keyword">if</span> (trailing &amp;&amp; !timer) &#123;<br>          timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>            startTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br>            timer = <span class="hljs-literal">null</span><br>          &#125;, waitTime)<br>        &#125;<br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input:&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>, &#123;<span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>&#125;)</span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>取消尾部功能</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval, &#123;leading = <span class="hljs-literal">false</span>, trailing = <span class="hljs-literal">true</span>&#125; = &#123;&#125;</span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 获取当前时间</span><br>        <span class="hljs-keyword">const</span> nowTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br><br>        <span class="hljs-comment">// 对立即执行函数进行控制</span><br>        <span class="hljs-keyword">if</span>(!leading &amp;&amp; startTime === <span class="hljs-number">0</span>) &#123;<br>          startTime = nowTime<br>        &#125;<br><br>        <span class="hljs-keyword">const</span> waitTime = interval - (nowTime - startTime)<br>        <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>          <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>          fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>          startTime = nowTime<br>          timer = <span class="hljs-literal">null</span><br>          <span class="hljs-keyword">return</span><br>        &#125;<br><br>        <span class="hljs-comment">// 节流函数尾部执行控制</span><br>        <span class="hljs-keyword">if</span> (trailing &amp;&amp; !timer) &#123;<br>          timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>            fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>            startTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br>            timer = <span class="hljs-literal">null</span><br>          &#125;, waitTime)<br>        &#125;<br>      &#125;<br><br>      _throttle.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>        startTime = <span class="hljs-number">0</span><br>        timer = <span class="hljs-literal">null</span><br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> buttonEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;button&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input:&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>, &#123;<span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    </span></span><br><span class="language-javascript"><span class="language-xml">    buttonEl.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      inputEl.<span class="hljs-property">oninput</span>.<span class="hljs-title function_">cancel</span>()</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<ul>
<li>获取返回值</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-params">fn, interval, &#123;leading = <span class="hljs-literal">false</span>, trailing = <span class="hljs-literal">true</span>&#125; = &#123;&#125;</span>) &#123;<br>      <span class="hljs-keyword">let</span> startTime = <span class="hljs-number">0</span><br>      <span class="hljs-keyword">let</span> timer = <span class="hljs-literal">null</span><br><br>      <span class="hljs-keyword">const</span> _throttle = <span class="hljs-keyword">function</span>(<span class="hljs-params">...args</span>) &#123;<br>        <span class="hljs-comment">// 获取当前时间</span><br>        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>          <span class="hljs-keyword">try</span> &#123;<br>            <span class="hljs-keyword">const</span> nowTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br><br>            <span class="hljs-comment">// 对立即执行函数进行控制</span><br>            <span class="hljs-keyword">if</span>(!leading &amp;&amp; startTime === <span class="hljs-number">0</span>) &#123;<br>              startTime = nowTime<br>            &#125;<br><br>            <span class="hljs-keyword">const</span> waitTime = interval - (nowTime - startTime)<br>            <span class="hljs-keyword">if</span>(waitTime &lt;= <span class="hljs-number">0</span>) &#123;<br>              <span class="hljs-keyword">if</span> (timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>              <span class="hljs-keyword">const</span> res = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>              <span class="hljs-title function_">resolve</span>(res)<br>              startTime = nowTime<br>              timer = <span class="hljs-literal">null</span><br>              <span class="hljs-keyword">return</span><br>            &#125;<br><br>            <span class="hljs-comment">// 节流函数尾部执行控制</span><br>            <span class="hljs-keyword">if</span> (trailing &amp;&amp; !timer) &#123;<br>              timer = <span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>                <span class="hljs-keyword">const</span> res = fn.<span class="hljs-title function_">apply</span>(<span class="hljs-variable language_">this</span>, args)<br>                <span class="hljs-title function_">resolve</span>(res)<br>                startTime = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Date</span>().<span class="hljs-title function_">getTime</span>()<br>                timer = <span class="hljs-literal">null</span><br>              &#125;, waitTime);<br>            &#125;<br>          &#125;<br>          <span class="hljs-keyword">catch</span> (error) &#123;<br>            <span class="hljs-title function_">reject</span>(error)<br>          &#125;<br>        &#125;)<br>      &#125;<br><br>      _throttle.<span class="hljs-property">cancel</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-keyword">if</span>(timer) <span class="hljs-built_in">clearTimeout</span>(timer)<br>        startTime = <span class="hljs-number">0</span><br>        timer = <span class="hljs-literal">null</span><br>      &#125;<br><br>      <span class="hljs-keyword">return</span> _throttle<br>    &#125;<br><br>  &lt;/script&gt;<br><br>  <span class="language-xml"><span class="hljs-tag">&lt;<span class="hljs-name">script</span>&gt;</span><span class="language-javascript"></span></span><br><span class="language-javascript"><span class="language-xml"></span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> inputEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;input&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    <span class="hljs-keyword">const</span> buttonEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&#x27;button&#x27;</span>)</span></span><br><span class="language-javascript"><span class="language-xml">    inputEl.<span class="hljs-property">oninput</span> = <span class="hljs-title function_">yy_throttle</span>(<span class="hljs-keyword">function</span>(<span class="hljs-params">event</span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&#x27;input:&#x27;</span>,<span class="hljs-variable language_">this</span>.<span class="hljs-property">value</span>, event)</span></span><br><span class="language-javascript"><span class="language-xml">      <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;jojo&quot;</span></span></span><br><span class="language-javascript"><span class="language-xml">    &#125;, <span class="hljs-number">1000</span>, &#123;<span class="hljs-attr">trailing</span>: <span class="hljs-literal">true</span>&#125;)</span></span><br><span class="language-javascript"><span class="language-xml">    </span></span><br><span class="language-javascript"><span class="language-xml">    buttonEl.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;</span></span><br><span class="language-javascript"><span class="language-xml">      inputEl.<span class="hljs-property">oninput</span>.<span class="hljs-title function_">cancel</span>()</span></span><br><span class="language-javascript"><span class="language-xml">    &#125;</span></span><br><span class="language-javascript"><span class="language-xml">  </span><span class="hljs-tag">&lt;/<span class="hljs-name">script</span>&gt;</span></span><br></code></pre></td></tr></table></figure>
<h2 id="深拷贝"><a href="#深拷贝" class="headerlink" title="深拷贝"></a>深拷贝</h2><ul>
<li>深拷贝函数的基本使用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">const</span> objType = <span class="hljs-keyword">typeof</span> obj<br>      <span class="hljs-keyword">return</span> (obj !== <span class="hljs-literal">null</span>) &amp;&amp; (objType === <span class="hljs-string">&quot;object&quot;</span> || objType === <span class="hljs-string">&quot;function&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 深拷贝函数</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">isObject</span>(obj)) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-keyword">const</span> newObj = &#123;&#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;<br>        newObj[key] = <span class="hljs-title function_">deepCopy</span>(obj[key])<br>      &#125;<br>      <span class="hljs-keyword">return</span> newObj<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> info = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;jojo&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>      <span class="hljs-attr">friend</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;小羊&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>,<br>        <span class="hljs-attr">address</span>: &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;四川&quot;</span>,<br>          <span class="hljs-attr">detail</span>: <span class="hljs-string">&quot;成都市&quot;</span><br>        &#125;<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> newObj = <span class="hljs-title function_">deepCopy</span>(info)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>区分数组与对象</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">const</span> objType = <span class="hljs-keyword">typeof</span> obj<br>      <span class="hljs-keyword">return</span> (obj !== <span class="hljs-literal">null</span>) &amp;&amp; (objType === <span class="hljs-string">&quot;object&quot;</span> || objType === <span class="hljs-string">&quot;function&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 深拷贝函数</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">isObject</span>(obj)) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-keyword">const</span> newObj = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : &#123;&#125;<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;<br>        newObj[key] = <span class="hljs-title function_">deepCopy</span>(obj[key])<br>      &#125;<br>      <span class="hljs-keyword">return</span> newObj<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> info = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;jojo&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>      <span class="hljs-attr">friend</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;小羊&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>,<br>        <span class="hljs-attr">address</span>: &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;四川&quot;</span>,<br>          <span class="hljs-attr">detail</span>: <span class="hljs-string">&quot;成都市&quot;</span><br>        &#125;,<br>        <span class="hljs-attr">cnt</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-keyword">const</span> newObj = <span class="hljs-title function_">deepCopy</span>(info)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>其他类型处理</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">const</span> objType = <span class="hljs-keyword">typeof</span> obj<br>      <span class="hljs-keyword">return</span> (obj !== <span class="hljs-literal">null</span>) &amp;&amp; (objType === <span class="hljs-string">&quot;object&quot;</span> || objType === <span class="hljs-string">&quot;function&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 深拷贝函数</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">obj</span>) &#123;<br><br>      <span class="hljs-comment">// symbol类型</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;symbol&quot;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Symbol</span>(obj.<span class="hljs-property">description</span>)<br>      &#125;<br><br>      <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">isObject</span>(obj)) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-comment">// set类型</span><br>      <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>) &#123;<br>        <span class="hljs-keyword">const</span> newSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> setItem <span class="hljs-keyword">of</span> obj) &#123;<br>          newSet.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">deepCopy</span>(setItem))<br>        &#125;<br>        <span class="hljs-keyword">return</span> newSet<br>      &#125;<br><br>      <span class="hljs-comment">// function类型,不需要深拷贝</span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;function&quot;</span>) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-comment">// key为symbol类型</span><br>      <span class="hljs-keyword">const</span> symbolKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertySymbols</span>(obj)<br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> symbolKey <span class="hljs-keyword">of</span> symbolKeys) &#123;<br>        obj[symbolKey] = <span class="hljs-title function_">deepCopy</span>(obj[symbolKey])<br>      &#125;<br><br>      <span class="hljs-comment">// 如果是对象类型</span><br>      <span class="hljs-keyword">const</span> newObj = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : &#123;&#125;<br>      map.<span class="hljs-title function_">set</span>(obj, newObj)<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;<br>        newObj[key] = <span class="hljs-title function_">deepCopy</span>(obj[key])<br>      &#125;<br>      <span class="hljs-keyword">return</span> newObj<br>    &#125;<br><br><br>    <span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br>    <span class="hljs-keyword">const</span> s1 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;s1&quot;</span>)<br>    <span class="hljs-keyword">const</span> s2 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;s2&quot;</span>)<br>    <span class="hljs-keyword">const</span> info = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;jojo&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>      <span class="hljs-attr">friend</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;小羊&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>,<br>        <span class="hljs-attr">address</span>: &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;四川&quot;</span>,<br>          <span class="hljs-attr">detail</span>: <span class="hljs-string">&quot;成都市&quot;</span><br>        &#125;,<br>        <span class="hljs-attr">cnt</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>      &#125;,<br>      <span class="hljs-attr">set</span>: set,<br>      <span class="hljs-attr">running</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;running&quot;</span>)<br>      &#125;,<br>      <span class="hljs-attr">symbolKey</span>: <span class="hljs-title class_">Symbol</span>,<br>      <br>      [s1]: <span class="hljs-string">&quot;s1&quot;</span>,<br>      [s2]: <span class="hljs-string">&quot;s2&quot;</span><br>    &#125;<br><br><br>    <span class="hljs-keyword">const</span> newObj = <span class="hljs-title function_">deepCopy</span>(info)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<ul>
<li>函数的循环引用</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">isObject</span>(<span class="hljs-params">obj</span>) &#123;<br>      <span class="hljs-keyword">const</span> objType = <span class="hljs-keyword">typeof</span> obj<br>      <span class="hljs-keyword">return</span> (obj !== <span class="hljs-literal">null</span>) &amp;&amp; (objType === <span class="hljs-string">&quot;object&quot;</span> || objType === <span class="hljs-string">&quot;function&quot;</span>)<br>    &#125;<br><br>    <span class="hljs-comment">// 深拷贝函数</span><br>    <span class="hljs-keyword">function</span> <span class="hljs-title function_">deepCopy</span>(<span class="hljs-params">obj, map = <span class="hljs-keyword">new</span> <span class="hljs-built_in">WeakMap</span>()</span>) &#123;<br><br>      <span class="hljs-comment">// symbol类型</span><br>      <span class="hljs-keyword">if</span> (<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;symbol&quot;</span>) &#123;<br>        <span class="hljs-keyword">return</span> <span class="hljs-title class_">Symbol</span>(obj.<span class="hljs-property">description</span>)<br>      &#125;<br><br>      <span class="hljs-keyword">if</span>(!<span class="hljs-title function_">isObject</span>(obj)) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-comment">// set类型</span><br>      <span class="hljs-keyword">if</span>(obj <span class="hljs-keyword">instanceof</span> <span class="hljs-title class_">Set</span>) &#123;<br>        <span class="hljs-keyword">const</span> newSet = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>()<br>        <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> setItem <span class="hljs-keyword">of</span> obj) &#123;<br>          newSet.<span class="hljs-title function_">add</span>(<span class="hljs-title function_">deepCopy</span>(setItem))<br>        &#125;<br>        <span class="hljs-keyword">return</span> newSet<br>      &#125;<br><br>      <span class="hljs-comment">// function类型,不需要深拷贝</span><br>      <span class="hljs-keyword">if</span>(<span class="hljs-keyword">typeof</span> obj === <span class="hljs-string">&quot;function&quot;</span>) &#123;<br>        <span class="hljs-keyword">return</span> obj<br>      &#125;<br><br>      <span class="hljs-comment">// key为symbol类型</span><br>      <span class="hljs-keyword">const</span> symbolKeys = <span class="hljs-title class_">Object</span>.<span class="hljs-title function_">getOwnPropertySymbols</span>(obj)<br>      <span class="hljs-keyword">for</span>(<span class="hljs-keyword">const</span> symbolKey <span class="hljs-keyword">of</span> symbolKeys) &#123;<br>        obj[symbolKey] = <span class="hljs-title function_">deepCopy</span>(obj[symbolKey], map)<br>      &#125;<br><br>      <span class="hljs-comment">// 如果是对象类型</span><br>      <span class="hljs-keyword">if</span>(map.<span class="hljs-title function_">get</span>(obj)) &#123;<br>        <span class="hljs-keyword">return</span> map.<span class="hljs-title function_">get</span>(obj)<br>      &#125;<br>      <span class="hljs-keyword">const</span> newObj = <span class="hljs-title class_">Array</span>.<span class="hljs-title function_">isArray</span>(obj) ? [] : &#123;&#125;<br>      map.<span class="hljs-title function_">set</span>(obj, newObj)<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> obj) &#123;<br>        newObj[key] = <span class="hljs-title function_">deepCopy</span>(obj[key], map)<br>      &#125;<br>      <span class="hljs-keyword">return</span> newObj<br>    &#125;<br><br><br>    <span class="hljs-keyword">const</span> set = <span class="hljs-keyword">new</span> <span class="hljs-title class_">Set</span>([<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>, <span class="hljs-number">4</span>, <span class="hljs-number">5</span>])<br>    <span class="hljs-keyword">const</span> s1 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;s1&quot;</span>)<br>    <span class="hljs-keyword">const</span> s2 = <span class="hljs-title class_">Symbol</span>(<span class="hljs-string">&quot;s2&quot;</span>)<br>    <span class="hljs-keyword">const</span> info = &#123;<br>      <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;jojo&quot;</span>,<br>      <span class="hljs-attr">age</span>: <span class="hljs-number">20</span>,<br>      <span class="hljs-attr">friend</span>: &#123;<br>        <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;小羊&quot;</span>,<br>        <span class="hljs-attr">age</span>: <span class="hljs-number">19</span>,<br>        <span class="hljs-attr">address</span>: &#123;<br>          <span class="hljs-attr">name</span>: <span class="hljs-string">&quot;四川&quot;</span>,<br>          <span class="hljs-attr">detail</span>: <span class="hljs-string">&quot;成都市&quot;</span><br>        &#125;,<br>        <span class="hljs-attr">cnt</span>: [<span class="hljs-number">1</span>, <span class="hljs-number">2</span>, <span class="hljs-number">3</span>]<br>      &#125;,<br>      <span class="hljs-attr">set</span>: set,<br>      <span class="hljs-attr">running</span>: <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>        <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;running&quot;</span>)<br>      &#125;,<br>      <span class="hljs-attr">symbolKey</span>: <span class="hljs-title class_">Symbol</span>,<br>      <br>      [s1]: <span class="hljs-string">&quot;s1&quot;</span>,<br>      [s2]: <span class="hljs-string">&quot;s2&quot;</span><br>    &#125;<br><br>    info.<span class="hljs-property">self</span> = info<br><br>    <span class="hljs-keyword">const</span> newObj = <span class="hljs-title function_">deepCopy</span>(info)<br><br>    <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(newObj)<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h2 id="事件总线"><a href="#事件总线" class="headerlink" title="事件总线"></a>事件总线</h2><ul>
<li>实现</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">class</span> <span class="hljs-title class_">yy_EventBus</span> &#123;<br>  <span class="hljs-title function_">constructor</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-comment">// 用于存储所有注册的事件及其对应的回调函数</span><br>    <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span> = &#123;&#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 注册事件监听器</span><br>  <span class="hljs-title function_">on</span>(<span class="hljs-params">eventName, eventFn</span>) &#123;<br>    <span class="hljs-comment">// 获取指定事件名称下的回调函数列表</span><br>    <span class="hljs-keyword">let</span> eventFns = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span>[eventName]<br>    <span class="hljs-comment">// 如果列表不存在,则创建一个新的列表</span><br>    <span class="hljs-keyword">if</span>(!eventFns) &#123;<br>      eventFns = []<br>      <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span>[eventName] = eventFns<br>    &#125;<br>    <span class="hljs-comment">// 将新的回调函数添加到列表中</span><br>    eventFns.<span class="hljs-title function_">push</span>(eventFn)<br>  &#125;<br><br>  <span class="hljs-comment">// 取消事件监听器</span><br>  <span class="hljs-title function_">off</span>(<span class="hljs-params">eventName, eventFn</span>) &#123;<br>    <span class="hljs-comment">// 获取指定事件名称下的回调函数列表</span><br>    <span class="hljs-keyword">let</span> eventFns = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span>[eventName]<br>    <span class="hljs-comment">// 如果列表不存在,则直接返回</span><br>    <span class="hljs-keyword">if</span> (!eventFns) <span class="hljs-keyword">return</span> <br>    <span class="hljs-comment">// 遍历列表,找到与传入的 eventFn 相同的函数,并从列表中移除</span><br>    <span class="hljs-keyword">for</span>(<span class="hljs-keyword">let</span> i = <span class="hljs-number">0</span>; i &lt; eventFns.<span class="hljs-property">length</span>; i++) &#123;<br>      <span class="hljs-keyword">const</span> fn = eventFns[i]<br>      <span class="hljs-keyword">if</span>(fn === eventFn) &#123;<br>        eventFns.<span class="hljs-title function_">splice</span>(i, <span class="hljs-number">1</span>)<br>        <span class="hljs-keyword">break</span><br>      &#125;<br>    &#125;<br>    <span class="hljs-comment">// 如果列表中已经没有回调函数了,则从 eventMap 中移除该事件</span><br>    <span class="hljs-keyword">if</span>(eventFns.<span class="hljs-property">length</span> === <span class="hljs-number">0</span>) &#123;<br>      <span class="hljs-keyword">delete</span> <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span>[eventName]<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 发布事件,触发指定事件名称下的所有回调函数</span><br>  <span class="hljs-title function_">emit</span>(<span class="hljs-params">eventName, ...args</span>) &#123;<br>    <span class="hljs-comment">// 获取指定事件名称下的回调函数列表</span><br>    <span class="hljs-keyword">let</span> eventFns = <span class="hljs-variable language_">this</span>.<span class="hljs-property">eventMap</span>[eventName]<br>    <span class="hljs-comment">// 如果列表不存在,则直接返回</span><br>    <span class="hljs-keyword">if</span>(!eventFns) <span class="hljs-keyword">return</span> <br>    <span class="hljs-comment">// 遍历列表,依次执行回调函数,并传递参数</span><br>    eventFns.<span class="hljs-title function_">forEach</span>(<span class="hljs-function"><span class="hljs-params">fn</span> =&gt;</span> &#123;<br>      <span class="hljs-title function_">fn</span>(...args)<br>    &#125;)<br>  &#125;<br>&#125;<br><br><span class="hljs-comment">// 创建一个事件总线实例</span><br><span class="hljs-keyword">const</span> eventBus = <span class="hljs-keyword">new</span> <span class="hljs-title function_">yy_EventBus</span>()<br><br><span class="hljs-comment">// 注册事件监听器</span><br>eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;navclick&quot;</span>, <span class="hljs-function">(<span class="hljs-params">name, age, height</span>) =&gt;</span> &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">`navclick: <span class="hljs-subst">$&#123;name&#125;</span>, <span class="hljs-subst">$&#123;age&#125;</span>, <span class="hljs-subst">$&#123;height&#125;</span>`</span>)<br>&#125;)<br><br><span class="hljs-comment">// 另一个事件监听器</span><br><span class="hljs-keyword">const</span> <span class="hljs-title function_">click</span> = (<span class="hljs-params"></span>) =&gt; &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;click&quot;</span>)<br>&#125;<br>eventBus.<span class="hljs-title function_">on</span>(<span class="hljs-string">&quot;navclick&quot;</span>, click)<br><br><span class="hljs-comment">// 2 秒后取消 click 监听器</span><br><span class="hljs-built_in">setTimeout</span>(<span class="hljs-function">() =&gt;</span> &#123;<br>  eventBus.<span class="hljs-title function_">off</span>(<span class="hljs-string">&quot;navclick&quot;</span>, click)<br>&#125;, <span class="hljs-number">2000</span>)<br><br><span class="hljs-comment">// 点击按钮时触发事件</span><br><span class="hljs-keyword">const</span> navBtnEl = <span class="hljs-variable language_">document</span>.<span class="hljs-title function_">querySelector</span>(<span class="hljs-string">&quot;.nav-btn&quot;</span>)<br>navBtnEl.<span class="hljs-property">onclick</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>  <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(<span class="hljs-string">&quot;navBtnEl clicked&quot;</span>)<br>  eventBus.<span class="hljs-title function_">emit</span>(<span class="hljs-string">&quot;navclick&quot;</span>, <span class="hljs-string">&quot;张三&quot;</span>, <span class="hljs-number">25</span>, <span class="hljs-number">170</span>)<br>&#125;<br></code></pre></td></tr></table></figure>
<h1 id="JavaScript网络编程"><a href="#JavaScript网络编程" class="headerlink" title="JavaScript网络编程"></a>JavaScript网络编程</h1><h2 id="前后端分离的优势"><a href="#前后端分离的优势" class="headerlink" title="前后端分离的优势"></a>前后端分离的优势</h2><p>![[Pasted image 20240825203521.png]]</p>
<ul>
<li>服务器端渲染过程![[Pasted image 20240825203823.png]]</li>
<li>前后端分离渲染过程![[Pasted image 20240825203756.png]]</li>
</ul>
<h2 id="Http协议"><a href="#Http协议" class="headerlink" title="Http协议"></a>Http协议</h2><h3 id="什么是Http"><a href="#什么是Http" class="headerlink" title="什么是Http"></a>什么是Http</h3><p>![[Pasted image 20240825204441.png]]![[Pasted image 20240825204459.png]]</p>
<h3 id="网页中资源的获取"><a href="#网页中资源的获取" class="headerlink" title="网页中资源的获取"></a>网页中资源的获取</h3><p>![[Pasted image 20240825204658.png]]</p>
<h3 id="Http的组成"><a href="#Http的组成" class="headerlink" title="Http的组成"></a>Http的组成</h3><p>![[Pasted image 20240825211123.png]]</p>
<h3 id="Http的版本"><a href="#Http的版本" class="headerlink" title="Http的版本"></a>Http的版本</h3><p>![[Pasted image 20240825211713.png]]</p>
<h3 id="Http的请求方式"><a href="#Http的请求方式" class="headerlink" title="Http的请求方式"></a>Http的请求方式</h3><p>![[Pasted image 20240825212611.png]]</p>
<h4 id="Header"><a href="#Header" class="headerlink" title="Header"></a>Header</h4><p>![[Pasted image 20240826111103.png]]<br>![[Pasted image 20240826110852.png]]</p>
<h4 id="Response响应状态码"><a href="#Response响应状态码" class="headerlink" title="Response响应状态码"></a>Response响应状态码</h4><p>![[Pasted image 20240826120304.png]]</p>
<ul>
<li>MDN响应码地址：<a target="_blank" rel="noopener" href="https://developer.mozilla.org/zh-CN/docs/Web/HTTP/Status">HTTP 响应状态码 - HTTP | MDN (mozilla.org)</a><br>![[Pasted image 20240826120226.png]]</li>
</ul>
<h2 id="XHR发送请求"><a href="#XHR发送请求" class="headerlink" title="XHR发送请求"></a>XHR发送请求</h2><h3 id="XHR发送请求的基本过程"><a href="#XHR发送请求的基本过程" class="headerlink" title="XHR发送请求的基本过程"></a>XHR发送请求的基本过程</h3><h4 id="AJAX发送请求"><a href="#AJAX发送请求" class="headerlink" title="AJAX发送请求"></a>AJAX发送请求</h4><p>![[Pasted image 20240826150750.png]]</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><code class="hljs js">&lt;script&gt;<br><br>    <span class="hljs-comment">// 1.创建XMLHttpRequest对象</span><br>    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br><br>    <span class="hljs-comment">// 2.监听状态的改变</span><br>    xhr.<span class="hljs-property">onreadystatechange</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-comment">// 将字符串转化为json对象</span><br>      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">readyState</span> !== <span class="hljs-title class_">XMLHttpRequest</span>.<span class="hljs-property">DONE</span>) <span class="hljs-keyword">return</span> <br>      <span class="hljs-keyword">const</span> resJSON = <span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">parse</span>(xhr.<span class="hljs-property">response</span>)<br>      <span class="hljs-keyword">const</span> banner = resJSON.<span class="hljs-property">data</span>.<span class="hljs-property">banner</span><br>      <span class="hljs-variable language_">console</span>.<span class="hljs-title function_">log</span>(banner)<br>    &#125;<br><br>    <span class="hljs-comment">// 3.配置请求open</span><br>    xhr.<span class="hljs-title function_">open</span>(<span class="hljs-string">&quot;get&quot;</span>, <span class="hljs-string">&quot;http://123.207.32.32:8000/home/multidata&quot;</span>) <span class="hljs-comment">// 请求方式和请求地址</span><br><br>    <span class="hljs-comment">// 4.发送请求send</span><br>    xhr.<span class="hljs-title function_">send</span>()<br><br>  &lt;/script&gt;<br></code></pre></td></tr></table></figure>
<h4 id="XMLHttpRequest的state"><a href="#XMLHttpRequest的state" class="headerlink" title="XMLHttpRequest的state"></a>XMLHttpRequest的state</h4><p>![[Pasted image 20240826153519.png]]<br>![[Pasted image 20240826153458.png]]</p>
<h4 id="其他事件监听"><a href="#其他事件监听" class="headerlink" title="其他事件监听"></a>其他事件监听</h4><p>![[Pasted image 20240826154018.png]]</p>
<h4 id="响应数据和类型"><a href="#响应数据和类型" class="headerlink" title="响应数据和类型"></a>响应数据和类型</h4><p>![[Pasted image 20240826160123.png]]</p>
<h4 id="HTTP响应的状态status"><a href="#HTTP响应的状态status" class="headerlink" title="HTTP响应的状态status"></a>HTTP响应的状态status</h4><p>![[Pasted image 20240826160737.png]]</p>
<h3 id="GET-POST请求传递参数"><a href="#GET-POST请求传递参数" class="headerlink" title="GET&#x2F;POST请求传递参数"></a>GET&#x2F;POST请求传递参数</h3><p>![[Pasted image 20240826212439.png]]![[Pasted image 20240826212419.png]]</p>
<h3 id="ajax网络请求封装"><a href="#ajax网络请求封装" class="headerlink" title="ajax网络请求封装"></a>ajax网络请求封装</h3><ul>
<li>可以使用axios库</li>
<li>ajax封装</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  url,</span><br><span class="hljs-params">  method = <span class="hljs-string">&quot;get&quot;</span>,</span><br><span class="hljs-params">  data = &#123;&#125;,</span><br><span class="hljs-params">  success,</span><br><span class="hljs-params">  failure</span><br><span class="hljs-params">&#125; = &#123;&#125;</span>) &#123;<br>  <span class="hljs-comment">// 1.创建XMLHttpRequest对象</span><br>  <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br><br>  <span class="hljs-comment">// 2.监听数据</span><br>  xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>    <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) &#123;<br>      success &amp;&amp; <span class="hljs-title function_">success</span>(xhr.<span class="hljs-property">response</span>)<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      failure &amp;&amp; <span class="hljs-title function_">failure</span>(&#123; <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>, <span class="hljs-attr">message</span>: xhr.<span class="hljs-property">statusText</span>&#125;)<br>    &#125;<br>  &#125;<br><br>  <span class="hljs-comment">// 3.设置类型</span><br>  xhr.<span class="hljs-property">responseType</span> = <span class="hljs-string">&quot;json&quot;</span><br><br>  <span class="hljs-comment">// 4.配置请求open</span><br>  <span class="hljs-keyword">if</span>(method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">&quot;GET&quot;</span>) &#123;<br>    <span class="hljs-keyword">const</span> queryStrings = []<br>    <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> data) &#123;<br>      queryStrings.<span class="hljs-title function_">push</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;key&#125;</span>=<span class="hljs-subst">$&#123;data[key]&#125;</span>`</span>)<br>    &#125;<br>    url = url + <span class="hljs-string">&quot;?&quot;</span> + queryStrings.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&amp;&quot;</span>)<br>    xhr.<span class="hljs-title function_">open</span>(method, url)<br>    xhr.<span class="hljs-title function_">send</span>()<br>  &#125; <span class="hljs-keyword">else</span> &#123;<br>    xhr.<span class="hljs-title function_">open</span>(method, url)<br>    xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>)<br>    xhr.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>  &#125;<br>&#125;<br><br></code></pre></td></tr></table></figure>
<ul>
<li>ajax-promise封装</li>
</ul>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><code class="hljs js"><span class="hljs-keyword">function</span> <span class="hljs-title function_">ajax</span>(<span class="hljs-params">&#123;</span><br><span class="hljs-params">  url,</span><br><span class="hljs-params">  method = <span class="hljs-string">&quot;get&quot;</span>,</span><br><span class="hljs-params">  data = &#123;&#125;,</span><br><span class="hljs-params">&#125; = &#123;&#125;</span>) &#123;<br>  <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> <span class="hljs-title class_">Promise</span>(<span class="hljs-function">(<span class="hljs-params">resolve, reject</span>) =&gt;</span> &#123;<br>    <span class="hljs-comment">// 1.创建XMLHttpRequest对象</span><br>    <span class="hljs-keyword">const</span> xhr = <span class="hljs-keyword">new</span> <span class="hljs-title class_">XMLHttpRequest</span>()<br><br>    <span class="hljs-comment">// 2.监听数据</span><br>    xhr.<span class="hljs-property">onload</span> = <span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) &#123;<br>      <span class="hljs-keyword">if</span> (xhr.<span class="hljs-property">status</span> &gt;= <span class="hljs-number">200</span> &amp;&amp; xhr.<span class="hljs-property">status</span> &lt; <span class="hljs-number">300</span>) &#123;<br>        <span class="hljs-title function_">resolve</span>(xhr.<span class="hljs-property">response</span>)<br>      &#125; <span class="hljs-keyword">else</span> &#123;<br>        <span class="hljs-title function_">reject</span>(&#123; <span class="hljs-attr">status</span>: xhr.<span class="hljs-property">status</span>, <span class="hljs-attr">message</span>: xhr.<span class="hljs-property">statusText</span>&#125;)<br>      &#125;<br>    &#125;<br><br>    <span class="hljs-comment">// 3.设置类型</span><br>    xhr.<span class="hljs-property">responseType</span> = <span class="hljs-string">&quot;json&quot;</span><br><br>    <span class="hljs-comment">// 4.配置请求open</span><br>    <span class="hljs-keyword">if</span>(method.<span class="hljs-title function_">toUpperCase</span>() === <span class="hljs-string">&quot;GET&quot;</span>) &#123;<br>      <span class="hljs-keyword">const</span> queryStrings = []<br>      <span class="hljs-keyword">for</span> (<span class="hljs-keyword">const</span> key <span class="hljs-keyword">in</span> data) &#123;<br>        queryStrings.<span class="hljs-title function_">push</span>(<span class="hljs-string">`<span class="hljs-subst">$&#123;key&#125;</span>=<span class="hljs-subst">$&#123;data[key]&#125;</span>`</span>)<br>      &#125;<br>      url = url + <span class="hljs-string">&quot;?&quot;</span> + queryStrings.<span class="hljs-title function_">join</span>(<span class="hljs-string">&quot;&amp;&quot;</span>)<br>      xhr.<span class="hljs-title function_">open</span>(method, url)<br>      xhr.<span class="hljs-title function_">send</span>()<br>    &#125; <span class="hljs-keyword">else</span> &#123;<br>      xhr.<span class="hljs-title function_">open</span>(method, url)<br>      xhr.<span class="hljs-title function_">setRequestHeader</span>(<span class="hljs-string">&quot;Content-Type&quot;</span>, <span class="hljs-string">&quot;application/json&quot;</span>)<br>      xhr.<span class="hljs-title function_">send</span>(<span class="hljs-title class_">JSON</span>.<span class="hljs-title function_">stringify</span>(data))<br>    &#125;<br>  &#125;)<br>&#125;<br><br></code></pre></td></tr></table></figure>
<h3 id="过期时间和取消请求"><a href="#过期时间和取消请求" class="headerlink" title="过期时间和取消请求"></a>过期时间和取消请求</h3><p>![[Pasted image 20240827115020.png]]</p>
<h3 id="Fetch和Fetch-API"><a href="#Fetch和Fetch-API" class="headerlink" title="Fetch和Fetch API"></a>Fetch和Fetch API</h3><h4 id="认识Fetch和API"><a href="#认识Fetch和API" class="headerlink" title="认识Fetch和API"></a>认识Fetch和API</h4><p>![[Pasted image 20240827133055.png]]![[Pasted image 20240827133115.png]]</p>
<h4 id="Fetch数据的响应"><a href="#Fetch数据的响应" class="headerlink" title="Fetch数据的响应"></a>Fetch数据的响应</h4><p>![[Pasted image 20240827133215.png]]<br>![[Pasted image 20240827134223.png]]<br>![[Pasted image 20240827134242.png]]<br>![[Pasted image 20240827134254.png]]<br>![[Pasted image 20240827134308.png]]</p>
<h3 id="XMLHttpRequest文件上传"><a href="#XMLHttpRequest文件上传" class="headerlink" title="XMLHttpRequest文件上传"></a>XMLHttpRequest文件上传</h3><p>![[Pasted image 20240827164139.png]]![[Pasted image 20240827164146.png]]![[Pasted image 20240827164213.png]]</p>
<h3 id="Fetch文件上传"><a href="#Fetch文件上传" class="headerlink" title="Fetch文件上传"></a>Fetch文件上传</h3><p>![[Pasted image 20240827164955.png]]</p>
</article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cute.webp" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cute.webp" title="头像" alt="头像"></a><div class="post-copyright__author_name">匡思进</div><div class="post-copyright__author_desc">荥晋的博客</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html')">JavaScript下</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="/img/wchat.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/wchat.jpg" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="/img/zhifubao.jpg" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/zhifubao.jpg" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=undefined&amp;url=https://kkksj.cn/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/04-%20JavaScript%E9%AB%98%E7%BA%A7/b746f28d.html&amp;pic=undefined" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://kkksj.cn" target="_blank">荥晋</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>前端三件套<span class="tagsPageCount">5</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/img/9.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"><div class="next-post pull-full"><a href="/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/02-%20CSS/ee69e452.html"><img class="next-cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2.jpg" onerror="onerror=null;src='/img/404.jpg'" alt="cover of next post"><div class="pagination-info"><div class="label">下一篇</div><div class="next_info">CSS</div></div></a></div></nav><div class="relatedPosts"><div class="headline"><i class="anzhiyufont anzhiyu-icon-thumbs-up fa-fw" style="font-size: 1.5rem; margin-right: 4px"></i><span>喜欢这篇文章的人也看了</span></div><div class="relatedPosts-list"><div><a href="/posts/2025/04/Fronted/%E5%AD%A6%E4%B9%A0%E6%97%A5%E8%AE%B0/c4f4b3de.html" title="前端学习日记"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/10.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">前端学习日记</div></div></a></div><div><a href="/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/01-%20HTML/2eec1551.html" title="HTML"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/1.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">HTML</div></div></a></div><div><a href="/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/03-%20JavaScript%E5%9F%BA%E7%A1%80/c041c21b.html" title="JavaScript上"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/3.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">JavaScript上</div></div></a></div><div><a href="/posts/2025/04/Fronted/%E4%B8%89%E4%BB%B6%E5%A5%97/02-%20CSS/ee69e452.html" title="CSS"><img class="cover" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2.jpg" alt="cover"><div class="content is-center"><div class="date"><i class="anzhiyufont anzhiyu-icon-calendar-days fa-fw"></i> 2025-04-01</div><div class="title">CSS</div></div></a></div></div></div></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info__sayhi" id="author-info__sayhi" onclick="anzhiyu.changeSayHelloText()"></div><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/images.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/><div class="author-status"><img class="g-status" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://twikoo-magic.oss-cn-hangzhou.aliyuncs.com/Genshin/18.jpg" alt="status"/></div></div><div class="author-info__description"><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">这有关于<b style="color:#fff">产品、设计、开发</b>相关的问题和看法，还有<b style="color:#fff">文章翻译</b>和<b style="color:#fff">分享</b>。</div><div style="line-height:1.38;margin:0.6rem 0;text-align:justify;color:rgba(255, 255, 255, 0.8);">相信你可以在这里找到对你有用的<b style="color:#fff">知识</b>和<b style="color:#fff">教程</b>。</div></div><div class="author-info__bottom-group"><a class="author-info__bottom-group-left" href="/"><h1 class="author-info__name">匡思进</h1><div class="author-info__desc">荥晋的博客</div></a><div class="card-info-social-icons is-center"><a class="social-icon faa-parent animated-hover" href="https://github.com/nihaokkjj" target="_blank" title="Github"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-GitHub"></use></svg></a><a class="social-icon faa-parent animated-hover" href="https://space.bilibili.com/1276825147" target="_blank" title="BiliBili"><svg class="icon faa-tada" aria-hidden="true"><use xlink:href="#icon-BILIBILI"></use></svg></a></div></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#this%E6%8C%87%E5%90%91"><span class="toc-text">this指向</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#this%E7%9A%84%E7%BB%91%E5%AE%9A%E8%A7%84%E5%88%99"><span class="toc-text">this的绑定规则</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#this%E7%9A%84%E6%8C%87%E5%90%91"><span class="toc-text">this的指向</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%BB%98%E8%AE%A4%E7%BB%91%E5%AE%9A"><span class="toc-text">默认绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%9A%90%E5%BC%8F%E7%BB%91%E5%AE%9A"><span class="toc-text">隐式绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#new%E7%BB%91%E5%AE%9A"><span class="toc-text">new绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%98%BE%E5%BC%8F%E7%BB%91%E5%AE%9A"><span class="toc-text">显式绑定</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%91%E5%AE%9A%E4%BC%98%E5%85%88%E7%BA%A7"><span class="toc-text">绑定优先级</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#this%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">this面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%80"><span class="toc-text">一</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BA%8C"><span class="toc-text">二</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%89"><span class="toc-text">三</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%9B%9B"><span class="toc-text">四</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%86%99call%E3%80%81apply%E3%80%81bind%E5%87%BD%E6%95%B0"><span class="toc-text">手写call、apply、bind函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%AE%AD%E5%A4%B4%E5%87%BD%E6%95%B0"><span class="toc-text">箭头函数</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E6%B8%B2%E6%9F%93%E5%8E%9F%E7%90%86"><span class="toc-text">深入浏览器的渲染原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E8%A2%AB%E8%A7%A3%E6%9E%90%E7%9A%84%E8%BF%87%E7%A8%8B"><span class="toc-text">网页被解析的过程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E5%86%85%E6%A0%B8"><span class="toc-text">浏览器的内核</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B8%B2%E6%9F%93%E9%A1%B5%E9%9D%A2%E7%9A%84%E8%AF%A6%E7%BB%86%E6%B5%81%E7%A8%8B"><span class="toc-text">渲染页面的详细流程</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#HTML%E8%A7%A3%E6%9E%90%E8%BF%87%E7%A8%8B"><span class="toc-text">HTML解析过程</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%94%9F%E6%88%90CSS%E8%A7%84%E5%88%99"><span class="toc-text">生成CSS规则</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%9E%84%E5%BB%BARender-Tree"><span class="toc-text">构建Render Tree</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%83%E5%B1%80%EF%BC%88Layout%EF%BC%89%E5%92%8C%E7%BB%98%E5%88%B6%EF%BC%88paint%EF%BC%89"><span class="toc-text">布局（Layout）和绘制（paint）</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%9E%E6%B5%81%E5%92%8C%E9%87%8D%E7%BB%98"><span class="toc-text">回流和重绘</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%89%B9%E6%AE%8A%E8%A7%A3%E6%9E%90-composite%E5%90%88%E6%88%90"><span class="toc-text">特殊解析 - composite合成</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#script%E5%85%83%E7%B4%A0%E5%92%8C%E9%A1%B5%E9%9D%A2%E8%A7%A3%E6%9E%90%E7%9A%84%E5%85%B3%E7%B3%BB"><span class="toc-text">script元素和页面解析的关系</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#defer%E5%B1%9E%E6%80%A7"><span class="toc-text">defer属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#async%E5%B1%9E%E6%80%A7"><span class="toc-text">async属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E6%B7%B1%E5%85%A5JavaScript%E7%9A%84%E8%BF%90%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-text">深入JavaScript的运行原理</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#V8%E5%BC%95%E6%93%8E%E7%9A%84%E6%89%A7%E8%A1%8C%E5%8E%9F%E7%90%86"><span class="toc-text">V8引擎的执行原理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#V8%E5%BC%95%E6%93%8E%E7%9A%84%E6%9E%B6%E6%9E%84"><span class="toc-text">V8引擎的架构</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JS%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">JS执行上下文</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">执行上下文</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86VO%E5%AF%B9%E8%B1%A1"><span class="toc-text">认识VO对象</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E6%89%A7%E8%A1%8C%E4%B8%8A%E4%B8%8B%E6%96%87"><span class="toc-text">函数执行上下文</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript%E7%9A%84%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86%E5%92%8C%E9%97%AD%E5%8C%85"><span class="toc-text">JavaScript的内存管理和闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaScript%E5%86%85%E5%AD%98%E7%AE%A1%E7%90%86"><span class="toc-text">JavaScript内存管理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%9E%83%E5%9C%BE%E5%9B%9E%E6%94%B6%EF%BC%88GC%EF%BC%89%E7%AE%97%E6%B3%95"><span class="toc-text">垃圾回收（GC）算法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%95%E7%94%A8%E8%AE%A1%E6%95%B0"><span class="toc-text">引用计数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E8%AE%B0%E6%B8%85%E9%99%A4"><span class="toc-text">标记清除</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%B3%95%E4%BC%98%E5%8C%96"><span class="toc-text">算法优化</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%97%AD%E5%8C%85"><span class="toc-text">闭包</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%97%AD%E5%8C%85%E7%9A%84%E5%AE%9A%E4%B9%89"><span class="toc-text">闭包的定义</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript%E5%87%BD%E6%95%B0%E7%9A%84%E5%A2%9E%E5%BC%BA%E7%9F%A5%E8%AF%86"><span class="toc-text">JavaScript函数的增强知识</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%B1%9E%E6%80%A7%E5%92%8Cargumens"><span class="toc-text">函数对象的属性和argumens</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%9E%E6%80%A7name%E5%92%8Clength"><span class="toc-text">属性name和length</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86arguments"><span class="toc-text">认识arguments</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#arguments%E8%BD%ACArray"><span class="toc-text">arguments转Array</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E7%9A%84%E5%89%A9%E4%BD%99%EF%BC%88rest%EF%BC%89%E5%8F%82%E6%95%B0"><span class="toc-text">函数的剩余（rest）参数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-text">纯函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%90%86%E8%A7%A3%E7%BA%AF%E5%87%BD%E6%95%B0"><span class="toc-text">理解纯函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9F%AF%E9%87%8C%E5%8C%96%E5%87%BD%E6%95%B0"><span class="toc-text">柯里化函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E5%8A%A8%E6%9F%AF%E9%87%8C%E5%8C%96%EF%BC%88%E4%BA%86%E8%A7%A3%EF%BC%89"><span class="toc-text">自动柯里化（了解）</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%84%E5%90%88%E5%87%BD%E6%95%B0"><span class="toc-text">组合函数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%A5%E6%A0%BC%E6%A8%A1%E5%BC%8F"><span class="toc-text">严格模式</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%A2%9E%E5%BC%BA"><span class="toc-text">对象增强</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Object-defineProperty"><span class="toc-text">Object.defineProperty</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">数据属性描述符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AD%98%E5%8F%96%E5%B1%9E%E6%80%A7%E6%8F%8F%E8%BF%B0%E7%AC%A6"><span class="toc-text">存取属性描述符</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%8C%E6%97%B6%E5%AE%9A%E4%B9%89%E5%A4%9A%E4%B8%AA%E5%B1%9E%E6%80%A7"><span class="toc-text">同时定义多个属性</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ES5%E4%B8%AD%E7%9A%84%E7%BB%A7%E6%89%BF"><span class="toc-text">ES5中的继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E5%92%8C%E5%87%BD%E6%95%B0%E7%9A%84%E5%8E%9F%E5%9E%8B"><span class="toc-text">对象和函数的原型</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E5%AF%B9%E8%B1%A1%E5%8E%9F%E5%9E%8B"><span class="toc-text">认识对象原型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%87%BD%E6%95%B0%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%8E%9F%E5%9E%8B"><span class="toc-text">函数对象的原型</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#constructor%E5%B1%9E%E6%80%A7"><span class="toc-text">constructor属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%80%9A%E8%BF%87%E5%8E%9F%E5%9E%8B%E9%93%BE%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF"><span class="toc-text">通过原型链实现继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%80%9F%E7%94%A8%E6%9E%84%E9%80%A0%E5%87%BD%E6%95%B0%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF"><span class="toc-text">借用构造函数实现继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%84%E7%94%9F%E7%BB%84%E5%90%88%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF"><span class="toc-text">寄生组合实现继承</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AF%B9%E8%B1%A1%E7%9A%84%E6%96%B9%E6%B3%95%E8%A1%A5%E5%85%85"><span class="toc-text">对象的方法补充</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ES6%E5%AE%9E%E7%8E%B0%E7%BB%A7%E6%89%BF"><span class="toc-text">ES6实现继承</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8E%9F%E5%9E%8B%E7%BB%A7%E6%89%BF%E5%85%B3%E7%B3%BB%E5%9B%BE"><span class="toc-text">原型继承关系图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#class%E6%96%B9%E5%BC%8F%E5%AE%9A%E4%B9%89%E7%B1%BB"><span class="toc-text">class方式定义类</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AE%9E%E4%BE%8B%E6%96%B9%E6%B3%95"><span class="toc-text">实例方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E9%9D%99%E6%80%81%E6%96%B9%E6%B3%95"><span class="toc-text">类的静态方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#super%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">super关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%A7%E6%89%BF%E5%86%85%E7%BD%AE%E7%B1%BB"><span class="toc-text">继承内置类</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%B1%BB%E7%9A%84%E6%B7%B7%E5%85%A5mixins"><span class="toc-text">类的混入mixins</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES6%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%A2%9E%E5%BC%BA"><span class="toc-text">ES6对象的增强</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%AD%97%E9%9D%A2%E9%87%8F%E7%9A%84%E5%A2%9E%E5%BC%BA"><span class="toc-text">字面量的增强</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%A7%A3%E6%9E%84"><span class="toc-text">解构</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ES6%E6%96%B0%E7%89%B9%E6%80%A7"><span class="toc-text">ES6新特性</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#let%E3%80%81const"><span class="toc-text">let、const</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#let%E3%80%81const%E7%9A%84%E5%9D%97%E7%BA%A7%E4%BD%9C%E7%94%A8%E5%9F%9F"><span class="toc-text">let、const的块级作用域</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%BA%94%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-text">应用场景</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%A8%A1%E7%89%88%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">模版字符串</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%A0%87%E7%AD%BE%E6%A8%A1%E7%89%88%E5%AD%97%E7%AC%A6%E4%B8%B2"><span class="toc-text">标签模版字符串</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%B1%95%E5%BC%80%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">展开运算符</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B1%95%E5%BC%80%E8%AF%AD%E6%B3%95"><span class="toc-text">展开语法</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Symbol"><span class="toc-text">Symbol</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Set-Map"><span class="toc-text">Set-Map</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Set"><span class="toc-text">Set</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WeakSet"><span class="toc-text">WeakSet</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Map"><span class="toc-text">Map</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#WeakMap"><span class="toc-text">WeakMap</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise"><span class="toc-text">Promise</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#ES8-ES13"><span class="toc-text">ES8~ES13</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ES8%E4%B8%AD%E5%AF%B9%E8%B1%A1%E7%9A%84%E7%9B%B8%E5%85%B3%E5%B1%9E%E6%80%A7"><span class="toc-text">ES8中对象的相关属性</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES8-padStart%E5%92%8CpadEnd"><span class="toc-text">ES8-padStart和padEnd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES9-Object-spread-operators"><span class="toc-text">ES9-Object spread operators</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10-flat-flatMap"><span class="toc-text">ES10-flat flatMap</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10-Object-fromEntries"><span class="toc-text">ES10-Object.fromEntries</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES10-trimStart-trimEnd"><span class="toc-text">ES10-trimStart trimEnd</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-BigInt"><span class="toc-text">ES11-BigInt</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-Nullish-Coalescing-Operator-%E7%A9%BA%E5%80%BC%E5%90%88%E5%B9%B6%E8%BF%90%E7%AE%97%E7%AC%A6"><span class="toc-text">ES11-Nullish Coalescing Operator (空值合并运算符)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES11-Optional-Chaining-%E5%8F%AF%E9%80%89%E9%93%BE"><span class="toc-text">ES11-Optional Chaining (可选链)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES12-FinalizationRegistry"><span class="toc-text">ES12-FinalizationRegistry</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES12-WeakRefs"><span class="toc-text">ES12-WeakRefs</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES13-method-at"><span class="toc-text">ES13-method.at()</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ES13-Object-hasOwn-obj-prop"><span class="toc-text">ES13-Object.hasOwn(obj, prop)</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Proxy-Reflect"><span class="toc-text">Proxy-Reflect</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#Proxy%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">Proxy基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Proxy%E7%9A%84%E6%8D%95%E8%8E%B7%E5%99%A8"><span class="toc-text">Proxy的捕获器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Reflect"><span class="toc-text">Reflect</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Promise-1"><span class="toc-text">Promise</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E4%BB%BB%E5%8A%A1%E7%9A%84%E5%A4%84%E7%90%86"><span class="toc-text">异步任务的处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">Promise的基本使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#resolve%E4%B8%8D%E5%90%8C%E5%80%BC"><span class="toc-text">resolve不同值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#then%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">then的返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#catch%E7%9A%84%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">catch的返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#finally%E7%9A%84%E5%9B%9E%E8%B0%83"><span class="toc-text">finally的回调</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise%E7%B1%BB%E6%96%B9%E6%B3%95"><span class="toc-text">Promise类方法</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-Promise-resolve-value"><span class="toc-text">1. Promise.resolve(value)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2-Promise-reject-reason"><span class="toc-text">2. Promise.reject(reason)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-Promise-all-iterable"><span class="toc-text">3. Promise.all(iterable)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#4-Promise-allSettled-iterable"><span class="toc-text">4. Promise.allSettled(iterable)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-Promise-any-iterable"><span class="toc-text">5. Promise.any(iterable)</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#6-Promise-race-iterable"><span class="toc-text">6. Promise.race(iterable)</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%BF%AD%E4%BB%A3%E5%99%A8%E5%92%8C%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">迭代器和生成器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">什么是迭代器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%87%AA%E5%AE%9A%E4%B9%89%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1"><span class="toc-text">自定义可迭代对象</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8F%AF%E8%BF%AD%E4%BB%A3%E5%AF%B9%E8%B1%A1%E7%9A%84%E5%BA%94%E7%94%A8"><span class="toc-text">可迭代对象的应用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AF%E7%94%9F%E6%88%90%E5%99%A8"><span class="toc-text">什么是生成器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%87%BD%E6%95%B0%E5%8F%82%E6%95%B0%E8%BF%94%E5%9B%9E%E5%80%BC"><span class="toc-text">生成器函数参数返回值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E5%87%BD%E6%95%B0%E6%8F%90%E5%89%8D%E7%BB%93%E6%9D%9F"><span class="toc-text">生成器函数提前结束</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%94%9F%E6%88%90%E5%99%A8%E6%9B%BF%E4%BB%A3%E8%BF%AD%E4%BB%A3%E5%99%A8"><span class="toc-text">生成器替代迭代器</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E5%A4%84%E7%90%86%E6%96%B9%E6%A1%88"><span class="toc-text">异步处理方案</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#async%E3%80%81await-%E9%98%9F%E5%88%97"><span class="toc-text">async、await - 队列</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E6%AD%A5%E5%87%BD%E6%95%B0async-function"><span class="toc-text">异步函数async function</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#await%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">await关键字</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BF%9B%E7%A8%8B%E5%92%8C%E7%BA%BF%E7%A8%8B"><span class="toc-text">进程和线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E4%B8%AD%E7%9A%84JavaScript%E7%BA%BF%E7%A8%8B"><span class="toc-text">浏览器中的JavaScript线程</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B5%8F%E8%A7%88%E5%99%A8%E7%9A%84%E4%BA%8B%E4%BB%B6%E5%BE%AA%E7%8E%AF"><span class="toc-text">浏览器的事件循环</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E4%BB%BB%E5%8A%A1%E5%92%8C%E5%AE%8F%E4%BB%BB%E5%8A%A1"><span class="toc-text">微任务和宏任务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Promise%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-text">Promise面试题</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1"><span class="toc-text">1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2"><span class="toc-text">2</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E5%A4%84%E7%90%86"><span class="toc-text">异常处理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#throw%E5%85%B3%E9%94%AE%E5%AD%97"><span class="toc-text">throw关键字</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Error%E7%B1%BB%E5%9E%8B"><span class="toc-text">Error类型</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%BC%82%E5%B8%B8%E7%9A%84%E6%8D%95%E8%8E%B7"><span class="toc-text">异常的捕获</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Storage%E5%92%8C%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">Storage和正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Storage"><span class="toc-text">认识Storage</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Storage%E7%9A%84%E5%9F%BA%E6%9C%AC%E4%BD%BF%E7%94%A8"><span class="toc-text">Storage的基本使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#localStorage%E5%92%8CsessionStorage%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-text">localStorage和sessionStorage的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Storage%E5%B7%A5%E5%85%B7%E5%B0%81%E8%A3%85"><span class="toc-text">Storage工具封装</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F"><span class="toc-text">正则表达式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E7%9A%84%E4%BD%BF%E7%94%A8%E6%96%B9%E6%B3%95"><span class="toc-text">正则表达式的使用方法</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BF%AE%E9%A5%B0%E7%AC%A6flag%E7%9A%84%E4%BD%BF%E7%94%A8"><span class="toc-text">修饰符flag的使用</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E8%A1%A8%E8%BE%BE%E5%BC%8F%E8%A7%84%E5%88%99"><span class="toc-text">正则表达式规则</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%AD%97%E7%AC%A6%E7%B1%BB"><span class="toc-text">字符类</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%94%9A%E7%82%B9"><span class="toc-text">锚点</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%BD%AC%E4%B9%89"><span class="toc-text">转义</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%9B%86%E5%90%88"><span class="toc-text">集合</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%87%8F%E8%AF%8D"><span class="toc-text">量词</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%B4%AA%E5%A9%AA%E5%92%8C%E6%83%B0%E6%80%A7"><span class="toc-text">贪婪和惰性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%8D%95%E8%8E%B7%E7%BB%84"><span class="toc-text">捕获组</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%BB%83%E4%B9%A0-%E6%AD%8C%E8%AF%8D%E8%A7%A3%E6%9E%90"><span class="toc-text">正则练习-歌词解析</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%AD%A3%E5%88%99%E7%BB%83%E4%B9%A0-%E6%97%B6%E9%97%B4%E6%A0%BC%E5%BC%8F%E5%8C%96"><span class="toc-text">正则练习-时间格式化</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E3%80%81%E8%8A%82%E6%B5%81%E3%80%81%E6%B7%B1%E6%8B%B7%E8%B4%9D%E3%80%81%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-text">防抖、节流、深拷贝、事件总线</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%98%B2%E6%8A%96%E5%87%BD%E6%95%B0"><span class="toc-text">防抖函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E9%98%B2%E6%8A%96debounce%E5%87%BD%E6%95%B0"><span class="toc-text">认识防抖debounce函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E9%98%B2%E6%8A%96%E5%87%BD%E6%95%B0"><span class="toc-text">手动实现防抖函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%8A%82%E6%B5%81%E5%87%BD%E6%95%B0"><span class="toc-text">节流函数</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86%E8%8A%82%E6%B5%81throttle%E5%87%BD%E6%95%B0"><span class="toc-text">认识节流throttle函数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%89%8B%E5%8A%A8%E5%AE%9E%E7%8E%B0%E8%8A%82%E6%B5%81%E5%87%BD%E6%95%B0"><span class="toc-text">手动实现节流函数</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B7%B1%E6%8B%B7%E8%B4%9D"><span class="toc-text">深拷贝</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%8B%E4%BB%B6%E6%80%BB%E7%BA%BF"><span class="toc-text">事件总线</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JavaScript%E7%BD%91%E7%BB%9C%E7%BC%96%E7%A8%8B"><span class="toc-text">JavaScript网络编程</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%89%8D%E5%90%8E%E7%AB%AF%E5%88%86%E7%A6%BB%E7%9A%84%E4%BC%98%E5%8A%BF"><span class="toc-text">前后端分离的优势</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Http%E5%8D%8F%E8%AE%AE"><span class="toc-text">Http协议</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BB%80%E4%B9%88%E6%98%AFHttp"><span class="toc-text">什么是Http</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BD%91%E9%A1%B5%E4%B8%AD%E8%B5%84%E6%BA%90%E7%9A%84%E8%8E%B7%E5%8F%96"><span class="toc-text">网页中资源的获取</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http%E7%9A%84%E7%BB%84%E6%88%90"><span class="toc-text">Http的组成</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http%E7%9A%84%E7%89%88%E6%9C%AC"><span class="toc-text">Http的版本</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Http%E7%9A%84%E8%AF%B7%E6%B1%82%E6%96%B9%E5%BC%8F"><span class="toc-text">Http的请求方式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#Header"><span class="toc-text">Header</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Response%E5%93%8D%E5%BA%94%E7%8A%B6%E6%80%81%E7%A0%81"><span class="toc-text">Response响应状态码</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#XHR%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-text">XHR发送请求</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#XHR%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82%E7%9A%84%E5%9F%BA%E6%9C%AC%E8%BF%87%E7%A8%8B"><span class="toc-text">XHR发送请求的基本过程</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#AJAX%E5%8F%91%E9%80%81%E8%AF%B7%E6%B1%82"><span class="toc-text">AJAX发送请求</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#XMLHttpRequest%E7%9A%84state"><span class="toc-text">XMLHttpRequest的state</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B6%E4%BB%96%E4%BA%8B%E4%BB%B6%E7%9B%91%E5%90%AC"><span class="toc-text">其他事件监听</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%93%8D%E5%BA%94%E6%95%B0%E6%8D%AE%E5%92%8C%E7%B1%BB%E5%9E%8B"><span class="toc-text">响应数据和类型</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#HTTP%E5%93%8D%E5%BA%94%E7%9A%84%E7%8A%B6%E6%80%81status"><span class="toc-text">HTTP响应的状态status</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#GET-POST%E8%AF%B7%E6%B1%82%E4%BC%A0%E9%80%92%E5%8F%82%E6%95%B0"><span class="toc-text">GET&#x2F;POST请求传递参数</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ajax%E7%BD%91%E7%BB%9C%E8%AF%B7%E6%B1%82%E5%B0%81%E8%A3%85"><span class="toc-text">ajax网络请求封装</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%BF%87%E6%9C%9F%E6%97%B6%E9%97%B4%E5%92%8C%E5%8F%96%E6%B6%88%E8%AF%B7%E6%B1%82"><span class="toc-text">过期时间和取消请求</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fetch%E5%92%8CFetch-API"><span class="toc-text">Fetch和Fetch API</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%A4%E8%AF%86Fetch%E5%92%8CAPI"><span class="toc-text">认识Fetch和API</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#Fetch%E6%95%B0%E6%8D%AE%E7%9A%84%E5%93%8D%E5%BA%94"><span class="toc-text">Fetch数据的响应</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XMLHttpRequest%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">XMLHttpRequest文件上传</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Fetch%E6%96%87%E4%BB%B6%E4%B8%8A%E4%BC%A0"><span class="toc-text">Fetch文件上传</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/posts/2025/07/Fronted/Vue3/3a42db2d.html" title="Vue3"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Vue3"/></a><div class="content"><a class="title" href="/posts/2025/07/Fronted/Vue3/3a42db2d.html" title="Vue3">Vue3</a><time datetime="2025-07-01T00:00:00.000Z" title="发表于 2025-07-01 00:00:00">2025-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2025/07/Fronted/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/4723d6e9.html" title="前端学习"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="前端学习"/></a><div class="content"><a class="title" href="/posts/2025/07/Fronted/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0/4723d6e9.html" title="前端学习">前端学习</a><time datetime="2025-07-01T00:00:00.000Z" title="发表于 2025-07-01 00:00:00">2025-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2025/07/blog/butterfly%E5%AE%89%E8%A3%85/e70f18fc.html" title="butterfly安装之旅"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="butterfly安装之旅"/></a><div class="content"><a class="title" href="/posts/2025/07/blog/butterfly%E5%AE%89%E8%A3%85/e70f18fc.html" title="butterfly安装之旅">butterfly安装之旅</a><time datetime="2025-07-01T00:00:00.000Z" title="发表于 2025-07-01 00:00:00">2025-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2025/07/blog/%E9%AD%94%E6%94%B9%E4%B9%8B%E6%97%85/afacad78.html" title="魔改之旅"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/2.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="魔改之旅"/></a><div class="content"><a class="title" href="/posts/2025/07/blog/%E9%AD%94%E6%94%B9%E4%B9%8B%E6%97%85/afacad78.html" title="魔改之旅">魔改之旅</a><time datetime="2025-07-01T00:00:00.000Z" title="发表于 2025-07-01 00:00:00">2025-07-01</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/posts/2025/07/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B4%BB/%E9%9A%8F%E7%AC%94/3458e8f8.html" title="日记"><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/1.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="日记"/></a><div class="content"><a class="title" href="/posts/2025/07/%E5%A4%A7%E5%AD%A6%E7%94%9F%E6%B4%BB/%E9%9A%8F%E7%AC%94/3458e8f8.html" title="日记">日记</a><time datetime="2025-07-01T00:00:00.000Z" title="发表于 2025-07-01 00:00:00">2025-07-01</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2025 By <a class="footer-bar-link" href="/" title="匡思进" target="_blank">匡思进</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">13</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">8</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">4</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://kksj.cn" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/images.jpg" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://github.com/nihaokkjj" title="去我的github里面瞅瞅吧"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/cute.webp" alt="去我的github里面瞅瞅吧"/><span class="back-menu-item-text">去我的github里面瞅瞅吧</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 文章</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/categories/"><i class="anzhiyufont anzhiyu-icon-shapes faa-tada" style="font-size: 0.9em;"></i><span> 分类</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags faa-tada" style="font-size: 0.9em;"></i><span> 标签</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 关于</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/about/"><i class="anzhiyufont anzhiyu-icon-paper-plane faa-tada" style="font-size: 0.9em;"></i><span> 关于本人</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/essay/"><i class="anzhiyufont anzhiyu-icon-lightbulb faa-tada" style="font-size: 0.9em;"></i><span> 闲言碎语</span></a></li><li><a class="site-page child faa-parent animated-hover" href="javascript:toRandomPost()"><i class="anzhiyufont anzhiyu-icon-shoe-prints1 faa-tada" style="font-size: 0.9em;"></i><span> 随便逛逛</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/Vue/" style="font-size: 0.88rem;">Vue<sup>1</sup></a><a href="/tags/blog/" style="font-size: 0.88rem;">blog<sup>2</sup></a><a href="/tags/minvue/" style="font-size: 0.88rem;">minvue<sup>1</sup></a><a href="/tags/node/" style="font-size: 0.88rem;">node<sup>1</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E4%B8%89%E4%BB%B6%E5%A5%97/" style="font-size: 0.88rem;">前端三件套<sup>5</sup></a><a href="/tags/%E5%89%8D%E7%AB%AF%E5%AD%A6%E4%B9%A0%E8%B7%AF%E7%BA%BF/" style="font-size: 0.88rem;">前端学习路线<sup>1</sup></a><a href="/tags/%E6%89%8B%E6%9C%BA%E8%AE%BE%E7%BD%AE%E4%BB%A3%E7%90%86/" style="font-size: 0.88rem;">手机设置代理<sup>1</sup></a><a href="/tags/%E6%B2%A1%E6%9C%89%E8%90%A5%E5%85%BB%E7%9A%84%E8%AF%9D/" style="font-size: 0.88rem;">没有营养的话<sup>1</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="7593082970" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://i.y.qq.com/n2/m/share/details/taoge.html?id=7593082970&amp;hosteuin=&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("07/0111/2025 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2025 By 安知鱼 V1.6.14",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 匡思进 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><script async src="https://at.alicdn.com/t/c/font_4976895_bnl7971qvi.js?spm=a313x.manage_type_myprojects.i1.10.73873a816pIoEr&amp;file=font_4976895_bnl7971qvi.js"></script><canvas class="fireworks" mobile="false"></canvas><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/dist/fireworks.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>